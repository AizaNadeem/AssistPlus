(function(e){var t=/^\s*|\s*$/g,n,r="B".replace(/A(.)|B/,"$1")==="$1";var i={majorVersion:"3",minorVersion:"5.8",releaseDate:"2012-11-20",_init:function(){function t(e){if(e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)){if(/_(src|dev)\.js/g.test(e.src)){n.suffix="_src"}if((l=e.src.indexOf("?"))!=-1){n.query=e.src.substring(l+1)}n.baseURL=e.src.substring(0,e.src.lastIndexOf("/"));if(f&&n.baseURL.indexOf("://")==-1&&n.baseURL.indexOf("/")!==0){n.baseURL=f+n.baseURL}return n.baseURL}return null}var n=this,r=document,i=navigator,s=i.userAgent,o,u,a,f,l,c;n.isOpera=e.opera&&opera.buildNumber;n.isWebKit=/WebKit/.test(s);n.isIE=!n.isWebKit&&!n.isOpera&&/MSIE/gi.test(s)&&/Explorer/gi.test(i.appName);n.isIE6=n.isIE&&/MSIE [56]/.test(s);n.isIE7=n.isIE&&/MSIE [7]/.test(s);n.isIE8=n.isIE&&/MSIE [8]/.test(s);n.isIE9=n.isIE&&/MSIE [9]/.test(s);n.isGecko=!n.isWebKit&&/Gecko/.test(s);n.isMac=s.indexOf("Mac")!=-1;n.isAir=/adobeair/i.test(s);n.isIDevice=/(iPad|iPhone)/.test(s);n.isIOS5=n.isIDevice&&s.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){n.suffix=tinyMCEPreInit.suffix;n.baseURL=tinyMCEPreInit.base;n.query=tinyMCEPreInit.query;return}n.suffix="";u=r.getElementsByTagName("base");for(o=0;o<u.length;o++){c=u[o].href;if(c){if(/^https?:\/\/[^\/]+$/.test(c)){c+="/"}f=c?c.match(/.*\//)[0]:""}}u=r.getElementsByTagName("script");for(o=0;o<u.length;o++){if(t(u[o])){return}}a=r.getElementsByTagName("head")[0];if(a){u=a.getElementsByTagName("script");for(o=0;o<u.length;o++){if(t(u[o])){return}}}return},is:function(e,t){if(!t){return e!==n}if(t=="array"&&i.isArray(e)){return true}return typeof e==t},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},makeMap:function(e,t,n){var r;e=e||[];t=t||",";if(typeof e=="string"){e=e.split(t)}n=n||{};r=e.length;while(r--){n[e[r]]={}}return n},each:function(e,t,r){var i,s;if(!e){return 0}r=r||e;if(e.length!==n){for(i=0,s=e.length;i<s;i++){if(t.call(r,e[i],i,e)===false){return 0}}}else{for(i in e){if(e.hasOwnProperty(i)){if(t.call(r,e[i],i,e)===false){return 0}}}}return 1},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);o=e[3].match(/(^|\.)(\w+)$/i)[2];s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o]){return}if(e[2]=="static"){s[o]=t;if(this.onCreate){this.onCreate(e[2],e[3],s[o])}return}if(!t[o]){t[o]=function(){};f=1}s[o]=t[o];r.extend(s[o].prototype,t);if(e[5]){i=r.resolve(e[5]).prototype;u=e[5].match(/\.(\w+)$/i)[1];a=s[o];if(f){s[o]=function(){return i[u].apply(this,arguments)}}else{s[o]=function(){this.parent=i[u];return a.apply(this,arguments)}}s[o].prototype[o]=s[o];r.each(i,function(e,t){s[o].prototype[t]=i[t]});r.each(t,function(e,t){if(i[t]){s[o].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}}else{if(t!=o){s[o].prototype[t]=e}}})}r.each(t["static"],function(e,t){s[o][t]=e});if(this.onCreate){this.onCreate(e[2],e[3],s[o].prototype)}},walk:function(e,t,n,r){r=r||this;if(e){if(n){e=e[n]}i.each(e,function(e,s){if(t.call(r,e,s,n)===false){return false}i.walk(e,t,n,r)})}},createNS:function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0;r<t.length;r++){i=t[r];if(!n[i]){n[i]={}}n=n[i]}return n},resolve:function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n){break}}return n},addUnload:function(t,n){function r(){function t(){n.detachEvent("onstop",t);if(s){s()}n=0}var n=document;if(n.readyState=="interactive"){if(n){n.attachEvent("onstop",t)}e.setTimeout(function(){if(n){n.detachEvent("onstop",t)}},0)}}var i=this,s;s=function(){var t=i.unloads,n,o;if(t){for(o in t){n=t[o];if(n&&n.func){n.func.call(n.scope,1)}}if(e.detachEvent){e.detachEvent("onbeforeunload",r);e.detachEvent("onunload",s)}else{if(e.removeEventListener){e.removeEventListener("unload",s,false)}}i.unloads=n=t=w=s=0;if(e.CollectGarbage){CollectGarbage()}}};t={func:t,scope:n||this};if(!i.unloads){if(e.attachEvent){e.attachEvent("onunload",s);e.attachEvent("onbeforeunload",r)}else{if(e.addEventListener){e.addEventListener("unload",s,false)}}i.unloads=[t]}else{i.unloads.push(t)}return t},removeUnload:function(e){var t=this.unloads,n=null;i.each(t,function(r,i){if(r&&r.func==e){t.splice(i,1);n=e;return false}});return n},explode:function(e,t){if(!e||i.is(e,"array")){return e}return i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;if(!this.query){return e}t=(e.indexOf("?")==-1?"?":"&")+this.query;if(e.indexOf("#")==-1){return e+t}return e.replace("#",t+"#")},_replace:function(e,t,i){if(r){return i.replace(e,function(){var e=t,r=arguments,i;for(i=0;i<r.length-2;i++){if(r[i]===n){e=e.replace(new RegExp("\\$"+i,"g"),"")}else{e=e.replace(new RegExp("\\$"+i,"g"),r[i])}}return e})}return i.replace(e,t)}};i._init();e.tinymce=e.tinyMCE=i})(window);(function(e,t){var n=t.is,r=/^(href|src|style)$/i,i;if(!e&&window.console){return console.log("Load jQuery first!")}t.$=e;t.adapter={patchEditor:function(t){function n(e,t){var n=this;if(t){n.removeAttr("data-mce-style")}return u.css.apply(n,arguments)}function s(e,n){var s=this;if(r.test(e)){if(n!==i){s.each(function(r,i){t.dom.setAttrib(i,e,n)});return s}else{return s.attr("data-mce-"+e)}}return u.attr.apply(s,arguments)}function o(e){if(e.css!==n){e.css=n;e.attr=s;e.tinymce=t;e.pushStack=function(){return o(u.pushStack.apply(this,arguments))}}return e}var u=e.fn;t.$=function(n,r){var i=t.getDoc();return o(e(n||i,i||r))}}};t.extend=e.extend;t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var s={"tinymce.dom.DOMUtils":{select:function(t,n){var r=this;return e.find(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(t,n){return e(this.get(t)).is(n)}}};t.onCreate=function(e,n,r){t.extend(r,s[n])}})(window.jQuery,tinymce);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:false,Dispatcher:function(e){this.scope=e||this;this.listeners=[]},add:function(e,t){this.listeners.push({cb:e,scope:t||this.scope});return e},addToTop:function(e,t){var n=this,r={cb:e,scope:t||n.scope};if(n.inDispatch){n.listeners=[r].concat(n.listeners)}else{n.listeners.unshift(r)}return e},remove:function(e){var t=this.listeners,n=null;tinymce.each(t,function(r,i){if(e==r.cb){n=r;t.splice(i,1);return false}});return n},dispatch:function(){var e=this,t,n=arguments,r,i=e.listeners,s;e.inDispatch=true;for(r=0;r<i.length;r++){s=i[r];t=s.cb.apply(s.scope,n.length>0?n:[s.scope]);if(t===false){break}}e.inDispatch=false;return t}});(function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var r=this,i,s,o,u;t=tinymce.trim(t);n=r.settings=n||{};if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){r.source=t;return}if(t.indexOf("/")===0&&t.indexOf("//")!==0){t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t}if(!/^[\w\-]*:?\/\//.test(t)){u=n.base_uri?n.base_uri.path:(new tinymce.util.URI(location.href)).directory;t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(u,t)}t=t.replace(/@@/g,"(mce_at)");t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];if(i){i=i.replace(/\(mce_at\)/g,"@@")}r[e]=i});o=n.base_uri;if(o){if(!r.protocol){r.protocol=o.protocol}if(!r.userInfo){r.userInfo=o.userInfo}if(!r.port&&r.host==="mce_host"){r.port=o.port}if(!r.host||r.host==="mce_host"){r.host=o.host}r.source=""}},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t=this,n;if(e==="./"){return e}e=new tinymce.util.URI(e,{base_uri:t});if(e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol){return e.getURI()}var r=t.getURI(),i=e.getURI();if(r==i||r.charAt(r.length-1)=="/"&&r.substr(0,r.length-1)==i){return r}n=t.toRelPath(t.path,e.path);if(e.query){n+="?"+e.query}if(e.anchor){n+="#"+e.anchor}return n},toAbsolute:function(e,t){e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;e=e.substring(0,e.lastIndexOf("/"));e=e.split("/");n=t.split("/");if(e.length>=n.length){for(s=0,o=e.length;s<o;s++){if(s>=n.length||e[s]!=n[s]){r=s+1;break}}}if(e.length<n.length){for(s=0,o=n.length;s<o;s++){if(s>=e.length||e[s]!=n[s]){r=s+1;break}}}if(r===1){return t}for(s=0,o=e.length-(r-1);s<o;s++){i+="../"}for(s=r-1,o=n.length;s<o;s++){if(s!=r-1){i+="/"+n[s]}else{i+=n[s]}}return i},toAbsPath:function(t,n){var r,i=0,s=[],o,u;o=/\/$/.test(n)?"/":"";t=t.split("/");n=n.split("/");e(t,function(e){if(e){s.push(e)}});t=s;for(r=n.length-1,s=[];r>=0;r--){if(n[r].length===0||n[r]==="."){continue}if(n[r]===".."){i++;continue}if(i>0){i--;continue}s.push(n[r])}r=t.length-i;if(r<=0){u=s.reverse().join("/")}else{u=t.slice(0,r).join("/")+"/"+s.reverse().join("/")}if(u.indexOf("/")!==0){u="/"+u}if(o&&u.lastIndexOf("/")!==u.length-1){u+=o}return u},getURI:function(e){var t,n=this;if(!n.source||e){t="";if(!e){if(n.protocol){t+=n.protocol+"://"}if(n.userInfo){t+=n.userInfo+"@"}if(n.host){t+=n.host}if(n.port){t+=":"+n.port}}if(n.path){t+=n.path}if(n.query){t+="?"+n.query}if(n.anchor){t+="#"+n.anchor}n.source=t}return n.source}})})();(function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n=this.get(t),r;if(n){e(n.split("&"),function(e){e=e.split("=");r=r||{};r[unescape(e[0])]=unescape(e[1])})}return r},setHash:function(t,n,r,i,s,o){var u="";e(n,function(e,t){u+=(!u?"":"&")+escape(t)+"="+escape(e)});this.set(t,u,r,i,s,o)},get:function(e){var t=document.cookie,n,r=e+"=",i;if(!t){return}i=t.indexOf("; "+r);if(i==-1){i=t.indexOf(r);if(i!==0){return null}}else{i+=2}n=t.indexOf(";",i);if(n==-1){n=t.length}return unescape(t.substring(i+r.length,n))},set:function(e,t,n,r,i,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+escape(r):"")+(i?"; domain="+i:"")+(s?"; secure":"")},remove:function(e,t,n){var r=new Date;r.setTime(r.getTime()-1e3);this.set(e,"",r,t,n)}})})();(function(){function serialize(e,t){var n,r,i,s;t=t||'"';if(e==null){return"null"}i=typeof e;if(i=="string"){r="\bb	t\nn\ff\rr\"\"''\\\\";return t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){if(t==='"'&&e==="'"){return e}n=r.indexOf(i);if(n+1){return"\\"+r.charAt(n+1)}e=i.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+t}if(i=="object"){if(e.hasOwnProperty&&Object.prototype.toString.call(e)==="[object Array]"){for(n=0,r="[";n<e.length;n++){r+=(n>0?",":"")+serialize(e[n],t)}return r+"]"}r="{";for(s in e){if(e.hasOwnProperty(s)){r+=typeof e[s]!="function"?(r.length>1?","+t:t)+s+t+":"+serialize(e[s],t):""}}return r+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){if(!e.async||r.readyState==4||o++>1e4){if(e.success&&o<1e4&&r.status==200){e.success.call(e.success_scope,""+r.responseText,r,e)}else{if(e.error){e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",r,e)}}r=null}else{s.setTimeout(t,10)}}function n(e){r=0;try{r=new ActiveXObject(e)}catch(t){}return r}var r,i,s=window,o=0;e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===false?false:true;e.data=e.data||"";r=s.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP");if(r){if(r.overrideMimeType){r.overrideMimeType(e.content_type)}r.open(e.type||(e.data?"POST":"GET"),e.url,e.async);if(e.content_type){r.setRequestHeader("Content-Type",e.content_type)}r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.send(e.data);if(!e.async){return t()}i=s.setTimeout(t,10)}}});(function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t);this.count=0},send:function(r){var i=r.error,s=r.success;r=e(this.settings,r);r.success=function(e,n){e=t.parse(e);if(typeof e=="undefined"){e={error:"JSON Parse error."}}if(e.error){i.call(r.error_scope||r.scope,e.error,n)}else{s.call(r.success_scope||r.scope,e.result)}};r.error=function(e,t){if(i){i.call(r.error_scope||r.scope,e,t)}};r.data=t.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params});r.content_type="application/json";n.send(r)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})})();(function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}})(tinymce);tinymce.util.Quirks=function(e){function t(t,n){try{e.getDoc().execCommand(t,false,n)}catch(r){}}function n(){var t=e.getDoc().documentMode;return t?t:6}function r(e){return e.isDefaultPrevented()}function i(){function t(t){var n,r,i,s;n=M.getRng();r=O.getParent(n.startContainer,O.isBlock);if(t){r=O.getNext(r,O.isBlock)}if(r){i=r.firstChild;while(i&&i.nodeType==3&&i.nodeValue.length===0){i=i.nextSibling}if(i&&i.nodeName==="SPAN"){s=i.cloneNode(false)}}H(O.select("span",r),function(e){e.setAttribute("data-mce-mark","1")});e.getDoc().execCommand(t?"ForwardDelete":"Delete",false,null);r=O.getParent(n.startContainer,O.isBlock);H(O.select("span",r),function(e){var t=M.getBookmark();if(s){O.replace(s.cloneNode(false),e,true)}else{if(!e.getAttribute("data-mce-mark")){O.remove(e,true)}else{e.removeAttribute("data-mce-mark")}}M.moveToBookmark(t)})}e.onKeyDown.add(function(e,n){var i;i=n.keyCode==A;if(!r(n)&&(i||n.keyCode==L)&&!k.modifierPressed(n)){n.preventDefault();t(i)}});e.addCommand("Delete",function(){t()})}function s(){function t(e){var t=O.create("body");var n=e.cloneContents();t.appendChild(n);return M.serializer.serialize(t,{format:"html"})}function n(n){var r=t(n);var i=O.createRng();i.selectNode(e.getBody());var s=t(i);return r===s}e.onKeyDown.add(function(e,t){var i=t.keyCode,s;if(!r(t)&&(i==A||i==L)){s=e.selection.isCollapsed();if(s&&!O.isEmpty(e.getBody())){return}if(tinymce.isIE&&!s){return}if(!s&&!n(e.selection.getRng())){return}e.setContent("");e.selection.setCursorLocation(e.getBody(),0);e.nodeChanged()}})}function o(){e.onKeyDown.add(function(e,t){if(!r(t)&&t.keyCode==65&&k.metaKeyPressed(t)){t.preventDefault();e.execCommand("SelectAll")}})}function u(){if(!e.settings.content_editable){O.bind(e.getDoc(),"focusin",function(e){M.setRng(M.getRng())});O.bind(e.getDoc(),"mousedown",function(t){if(t.target==e.getDoc().documentElement){e.getWin().focus();M.setRng(M.getRng())}})}}function a(){e.onKeyDown.add(function(e,t){if(!r(t)&&t.keyCode===L){if(M.isCollapsed()&&M.getRng(true).startOffset===0){var n=M.getNode();var i=n.previousSibling;if(i&&i.nodeName&&i.nodeName.toLowerCase()==="hr"){O.remove(i);tinymce.dom.Event.cancel(t)}}}})}function f(){if(!Range.prototype.getClientRects){e.onMouseDown.add(function(e,t){if(!r(t)&&t.target.nodeName==="HTML"){var n=e.getBody();n.blur();setTimeout(function(){n.focus()},0)}})}}function l(){e.onClick.add(function(e,t){t=t.target;if(/^(IMG|HR)$/.test(t.nodeName)){M.getSel().setBaseAndExtent(t,0,t,1)}if(t.nodeName=="A"&&O.hasClass(t,"mceItemAnchor")){M.select(t)}e.nodeChanged()})}function c(){function t(){var t=O.getAttribs(M.getStart().cloneNode(false));return function(){var n=M.getStart();if(n!==e.getBody()){O.setAttrib(n,"style",null);H(t,function(e){n.setAttributeNode(e.cloneNode(true))})}}}function n(){return!M.isCollapsed()&&O.getParent(M.getStart(),O.isBlock)!=O.getParent(M.getEnd(),O.isBlock)}function i(e,t){t.preventDefault();return false}e.onKeyPress.add(function(e,i){var s;if(!r(i)&&(i.keyCode==8||i.keyCode==46)&&n()){s=t();e.getDoc().execCommand("delete",false,null);s();i.preventDefault();return false}});O.bind(e.getDoc(),"cut",function(s){var o;if(!r(s)&&n()){o=t();e.onKeyUp.addToTop(i);setTimeout(function(){o();e.onKeyUp.remove(i)},0)}})}function h(){var t,n;O.bind(e.getDoc(),"selectionchange",function(){if(n){clearTimeout(n);n=0}n=window.setTimeout(function(){var n=M.getRng();if(!t||!tinymce.dom.RangeUtils.compareRanges(n,t)){e.nodeChanged();t=n}},50)})}function p(){document.body.setAttribute("role","application")}function d(){e.onKeyDown.add(function(e,t){if(!r(t)&&t.keyCode===L){if(M.isCollapsed()&&M.getRng(true).startOffset===0){var n=M.getNode().previousSibling;if(n&&n.nodeName&&n.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(t)}}}})}function v(){if(n()>7){return}t("RespectVisibilityInDesign",true);e.contentStyles.push(".mceHideBrInPre pre br {display: none}");O.addClass(e.getBody(),"mceHideBrInPre");D.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br");i=r.length;while(i--){s=r[i];o=s.prev;if(o&&o.type===3&&o.value.charAt(o.value-1)!="\n"){o.value+="\n"}else{s.parent.insert(new tinymce.html.Node("#text",3),s,true).value="\n"}}}});P.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br");i=r.length;while(i--){s=r[i];o=s.prev;if(o&&o.type==3){o.value=o.value.replace(/\r?\n$/,"")}}}})}function m(){O.bind(e.getBody(),"mouseup",function(e){var t,n=M.getNode();if(n.nodeName=="IMG"){if(t=O.getStyle(n,"width")){O.setAttrib(n,"width",t.replace(/[^0-9%]+/g,""));O.setStyle(n,"width","")}if(t=O.getStyle(n,"height")){O.setAttrib(n,"height",t.replace(/[^0-9%]+/g,""));O.setStyle(n,"height","")}}})}function g(){e.onKeyDown.add(function(e,t){var n,i,s,o,u,a,f;n=t.keyCode==A;if(!r(t)&&(n||t.keyCode==L)&&!k.modifierPressed(t)){i=M.getRng();s=i.startContainer;o=i.startOffset;f=i.collapsed;if(s.nodeType==3&&s.nodeValue.length>0&&(o===0&&!f||f&&o===(n?0:1))){nonEmptyElements=e.schema.getNonEmptyElements();t.preventDefault();u=O.create("br",{id:"__tmp"});s.parentNode.insertBefore(u,s);e.getDoc().execCommand(n?"ForwardDelete":"Delete",false,null);s=M.getRng().startContainer;a=s.previousSibling;if(a&&a.nodeType==1&&!O.isBlock(a)&&O.isEmpty(a)&&!nonEmptyElements[a.nodeName.toLowerCase()]){O.remove(a)}O.remove("__tmp")}}})}function y(){e.onKeyDown.add(function(e,t){var n,i,s,o,u;if(r(t)||t.keyCode!=k.BACKSPACE){return}n=M.getRng();i=n.startContainer;s=n.startOffset;o=O.getRoot();u=i;if(!n.collapsed||s!==0){return}while(u&&u.parentNode&&u.parentNode.firstChild==u&&u.parentNode!=o){u=u.parentNode}if(u.tagName==="BLOCKQUOTE"){e.formatter.toggle("blockquote",null,u);n=O.createRng();n.setStart(i,0);n.setEnd(i,0);M.setRng(n)}})}function b(){function n(){e._refreshContentEditable();t("StyleWithCSS",false);t("enableInlineTableEditing",false);if(!_.object_resizing){t("enableObjectResizing",false)}}if(!_.readonly){e.onBeforeExecCommand.add(n);e.onMouseDown.add(n)}}function w(){function t(e,t){H(O.select("a"),function(e){var t=e.parentNode,n=O.getRoot();if(t.lastChild===e){while(t&&!O.isBlock(t)){if(t.parentNode.lastChild!==t||t===n){return}t=t.parentNode}O.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){if(n==="CreateLink"){t(e)}});e.onSetContent.add(M.onSetContent.add(t))}function E(){if(_.forced_root_block){e.onInit.add(function(){t("DefaultParagraphSeparator",_.forced_root_block)})}}function S(){function t(t,n){if(!t||!n.initial){e.execCommand("mceRepaint")}}e.onUndo.add(t);e.onRedo.add(t);e.onSetContent.add(t)}function x(){e.onKeyDown.add(function(e,t){var n;if(!r(t)&&t.keyCode==L){n=e.getDoc().selection.createRange();if(n&&n.item){t.preventDefault();e.undoManager.beforeChange();O.remove(n.item(0));e.undoManager.add()}}})}function T(){var t;if(n()>=10){t="";H("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"});e.contentStyles.push(t+"{padding-right: 1px !important}")}}function N(){function n(e){var t,n;t=e.screenX-h;n=e.screenY-p;y=t*c[2]+d;b=n*c[3]+v;y=y<5?5:y;b=b<5?5:b;if(k.modifierPressed(e)||f.nodeName=="IMG"&&c[2]*c[3]!==0){y=Math.round(b/m);b=Math.round(y*m)}O.setStyles(l,{width:y,height:b});if(c[2]<0&&l.clientWidth<=y){O.setStyle(l,"left",u+(d-y))}if(c[3]<0&&l.clientHeight<=b){O.setStyle(l,"top",a+(v-b))}}function r(){function t(t,n){if(n){if(f.style[t]||!e.schema.isValid(f.nodeName.toLowerCase(),t)){O.setStyle(f,t,n)}else{O.setAttrib(f,t,n)}}}t("width",y);t("height",b);O.unbind(E,"mousemove",n);O.unbind(E,"mouseup",r);if(w!=E){O.unbind(w,"mousemove",n);O.unbind(w,"mouseup",r)}O.remove(l);i(f)}function i(e){var t,i,o;s();t=O.getPos(e);u=t.x;a=t.y;i=e.offsetWidth;o=e.offsetHeight;if(f!=e){f=e;y=b=0}H(g,function(e,t){var s;s=O.get("mceResizeHandle"+t);if(!s){s=O.add(E.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"});O.bind(s,"mousedown",function(t){t.preventDefault();r();h=t.screenX;p=t.screenY;d=f.clientWidth;v=f.clientHeight;m=v/d;c=e;l=f.cloneNode(true);O.addClass(l,"mceClonedResizable");O.setStyles(l,{left:u,top:a,margin:0});E.documentElement.appendChild(l);O.bind(E,"mousemove",n);O.bind(E,"mouseup",r);if(w!=E){O.bind(w,"mousemove",n);O.bind(w,"mouseup",r)}})}else{O.show(s)}O.setStyles(s,{left:i*e[0]+u-s.offsetWidth/2,top:o*e[1]+a-s.offsetHeight/2})});if(!tinymce.isOpera&&f.nodeName=="IMG"){f.setAttribute("data-mce-selected","1")}}function s(){if(f){f.removeAttribute("data-mce-selected")}for(var e in g){O.hide("mceResizeHandle"+e)}}function o(){var e=O.getParent(M.getNode(),"table,img");H(O.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")});if(e){i(e)}else{s()}}var u,a,f,l,c,h,p,d,v,m,g,y,b,w=document,E=e.getDoc();if(!_.object_resizing||_.webkit_fake_resize===false){return}t("enableObjectResizing",false);g={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}");e.onNodeChange.add(o);O.bind(E,"selectionchange",o);e.serializer.addAttributeFilter("data-mce-selected",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}})}function C(){if(n()<9){D.addNodeFilter("noscript",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.firstChild;if(r){n.attr("data-mce-innertext",r.value)}}});P.addNodeFilter("noscript",function(e){var t=e.length,n,r,i;while(t--){n=e[t];r=e[t].firstChild;if(r){r.value=tinymce.html.Entities.decode(r.value)}else{i=n.attributes.map["data-mce-innertext"];if(i){n.attr("data-mce-innertext",null);r=new tinymce.html.Node("#text",3);r.value=i;r.raw=true;n.append(r)}}}})}}var k=tinymce.VK,L=k.BACKSPACE,A=k.DELETE,O=e.dom,M=e.selection,_=e.settings,D=e.parser,P=e.serializer,H=tinymce.each;d();y();s();if(tinymce.isWebKit){g();i();u();l();E();if(tinymce.isIDevice){h()}else{N();o()}}if(tinymce.isIE){a();p();v();m();x();T();C()}if(tinymce.isGecko){a();f();c();b();w();S()}if(tinymce.isOpera){N()}};(function(e){function t(e){var t;t=document.createElement("div");t.innerHTML=e;return t.textContent||t.innerText||e}function n(e,t){var n,r,s,o={};if(e){e=e.split(",");t=t||10;for(n=0;n<e.length;n+=2){r=String.fromCharCode(parseInt(e[n],t));if(!i[r]){s="&"+e[n+1]+";";o[r]=s;o[s]=r}}return o}}var r,i,s,o=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\"\']/g,f=/&(#x|#)?([\w]+);/g,l={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&"};s={"&lt;":"<","&gt;":">","&":"&","&quot;":'"',"&apos;":"'"};r=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);e.html=e.html||{};e.html.Entities={encodeRaw:function(e,t){return e.replace(t?o:u,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(a,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?o:u,function(e){if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){n=n||r;return e.replace(t?o:u,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(t,s){function a(e,t){return e.replace(t?o:u,function(e){return i[e]||s[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,t){return l.encodeNamed(e,t,s)}var l=e.html.Entities;s=n(s)||r;t=e.makeMap(t.replace(/\+/g,","));if(t.named&&t.numeric){return a}if(t.named){if(s){return f}return l.encodeNamed}if(t.numeric){return l.encodeNumeric}return l.encodeRaw},decode:function(e){return e.replace(f,function(e,n,i){if(n){i=parseInt(i,n.length===2?16:10);if(i>65535){i-=65536;return String.fromCharCode(55296+(i>>10),56320+(i&1023))}else{return l[i]||String.fromCharCode(i)}}return s[e]||r[e]||t(e)})}}})(tinymce);tinymce.html.Styles=function(e,t){function n(e,t,n,r){function i(e){e=parseInt(e).toString(16);return e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,u=/rgb/,a,f,l={},c;e=e||{};c="\\\" \\' \\; \\: ; : ﻿".split(" ");for(f=0;f<c.length;f++){l[c[f]]="﻿"+f;l["﻿"+f]=c[f]}return{toHex:function(e){return e.replace(r,n)},parse:function(t){function u(e,t){var n,r,i,s;n=d[e+"-top"+t];if(!n){return}r=d[e+"-right"+t];if(n!=r){return}i=d[e+"-bottom"+t];if(r!=i){return}s=d[e+"-left"+t];if(i!=s){return}d[e+t]=s;delete d[e+"-top"+t];delete d[e+"-right"+t];delete d[e+"-bottom"+t];delete d[e+"-left"+t]}function a(e){var t=d[e],n;if(!t||t.indexOf(" ")<0){return}t=t.split(" ");n=t.length;while(n--){if(t[n]!==t[0]){return false}}d[e]=t[0];return true}function f(e,t,n,r){if(!a(t)){return}if(!a(n)){return}if(!a(r)){return}d[e]=d[t]+" "+d[n]+" "+d[r];delete d[t];delete d[n];delete d[r]}function c(e){y=true;return l[e]}function h(e,t){if(y){e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e}function p(e,t,n,r,i,s){i=i||s;if(i){i=h(i);return"'"+i.replace(/\'/g,"\\'")+"'"}t=h(t||n||r);if(b){t=b.call(w,t,"style")}return"url('"+t.replace(/\'/g,"\\'")+"')"}var d={},v,m,g,y,b=e.url_converter,w=e.url_converter_scope||this;if(t){t=t.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,c)});while(v=s.exec(t)){m=v[1].replace(o,"").toLowerCase();g=v[2].replace(o,"");if(m&&g.length>0){if(m==="font-weight"&&g==="700"){g="bold"}else{if(m==="color"||m==="background-color"){g=g.toLowerCase()}}g=g.replace(r,n);g=g.replace(i,p);d[m]=y?h(g,true):g}s.lastIndex=v.index+v[0].length}u("border","");u("border","-width");u("border","-color");u("border","-style");u("padding","");u("margin","");f("border","border-width","border-style","border-color");if(d.border==="medium none"){delete d.border}}return d},serialize:function(e,n){function r(n){var r,s,o,u;r=t.styles[n];if(r){for(s=0,o=r.length;s<o;s++){n=r[s];u=e[n];if(u!==a&&u.length>0){i+=(i.length>0?" ":"")+n+": "+u+";"}}}}var i="",s,o;if(n&&t&&t.styles){r("*");r(n)}else{for(s in e){o=e[s];if(o!==a&&o.length>0){i+=(i.length>0?" ":"")+s+": "+o+";"}}}return i}}};(function(e){function t(e,t){return e.split(t||",")}function n(e,n){function r(t){return t.replace(/[A-Z]+/g,function(t){return r(e[t])})}var i,s={};for(i in e){if(e.hasOwnProperty(i)){e[i]=r(e[i])}}r(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,n,r,i){r=t(r,"|");s[n]={attributes:o(r),attributesOrder:r,children:o(i,"|",{"#comment":{}})}});return s}function r(){var e=s.html5;if(!e){e=s.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")}return e}function i(){var e=s.html4;if(!e){e=s.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")}return e}var s={},o=e.makeMap,u=e.each;e.html.Schema=function(n){function a(t,r,i){var u=n[t];if(!u){u=s[t];if(!u){u=o(r," ",o(r.toUpperCase()," "));u=e.extend(u,i);s[t]=u}}else{u=o(u,",",o(u.toUpperCase()," "))}return u}function f(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function l(n){var r,i,s,u,a,l,c,h,p,d,v,g,b,w,E,S,x,T,N,C,k,A,O=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,M=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(n){n=t(n);if(m["@"]){x=m["@"].attributes;T=m["@"].attributesOrder}for(r=0,i=n.length;r<i;r++){l=O.exec(n[r]);if(l){E=l[1];d=l[2];S=l[3];p=l[4];b={};w=[];c={attributes:b,attributesOrder:w};if(E==="#"){c.paddEmpty=true}if(E==="-"){c.removeEmpty=true}if(x){for(C in x){b[C]=x[C]}w.push.apply(w,T)}if(p){p=t(p,"|");for(s=0,u=p.length;s<u;s++){l=M.exec(p[s]);if(l){h={};g=l[1];v=l[2].replace(/::/g,":");E=l[3];A=l[4];if(g==="!"){c.attributesRequired=c.attributesRequired||[];c.attributesRequired.push(v);h.required=true}if(g==="-"){delete b[v];w.splice(e.inArray(w,v),1);continue}if(E){if(E==="="){c.attributesDefault=c.attributesDefault||[];c.attributesDefault.push({name:v,value:A});h.defaultValue=A}if(E===":"){c.attributesForced=c.attributesForced||[];c.attributesForced.push({name:v,value:A});h.forcedValue=A}if(E==="<"){h.validValues=o(A,"?")}}if(_.test(v)){c.attributePatterns=c.attributePatterns||[];h.pattern=f(v);c.attributePatterns.push(h)}else{if(!b[v]){w.push(v)}b[v]=h}}}}if(!x&&d=="@"){x=b;T=w}if(S){c.outputName=d;m[S]=c}if(_.test(d)){c.pattern=f(d);y.push(c)}else{m[d]=c}}}}}function c(e){m={};y=[];l(e);u(w,function(e,t){g[t]=e.children})}function h(e){var n=/^(~)?(.+)$/;if(e){u(t(e),function(e){var t=n.exec(e),r=t[1]==="~",i=r?"span":"div",s=t[2];g[s]=g[i];k[s]=i;if(!r){N[s.toUpperCase()]={};N[s]={}}if(!m[s]){m[s]=m[i]}u(g,function(e,t){if(e[i]){e[s]=e[i]}})})}}function p(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(e){u(t(e),function(e){var r=n.exec(e),i,s;if(r){s=r[1];if(s){i=g[r[2]]}else{i=g[r[2]]={"#comment":{}}}i=g[r[2]];u(t(r[3],"|"),function(e){if(s==="-"){delete i[e]}else{i[e]={}}})}})}}function d(e){var t=m[e],n;if(t){return t}n=y.length;while(n--){t=y[n];if(t.pattern.test(e)){return t}}}var v=this,m={},g={},y=[],b,w;var E,S,x,T,N,C,k={};n=n||{};w=n.schema=="html5"?r():i();if(n.verify_html===false){n.valid_elements="*[*]"}if(n.valid_styles){b={};u(n.valid_styles,function(t,n){b[n]=e.explode(t)})}E=a("whitespace_elements","pre script noscript style textarea");S=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");x=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr");T=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");C=a("non_empty_elements","td th iframe video audio object",x);textBlockElementsMap=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");N=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap);if(!n.valid_elements){u(w,function(e,t){m[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};g[t]=e.children});if(n.schema!="html5"){u(t("strong/b,em/i"),function(e){e=t(e,"/");m[e[1]].outputName=e[0]})}m.img.attributesDefault=[{name:"alt",value:""}];u(t("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){if(m[e]){m[e].removeEmpty=true}});u(t("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){m[e].paddEmpty=true})}else{c(n.valid_elements)}h(n.custom_elements);p(n.valid_children);l(n.extended_valid_elements);p("+ol[ul|ol],+ul[ul|ol]");if(n.invalid_elements){e.each(e.explode(n.invalid_elements),function(e){if(m[e]){delete m[e]}})}if(!d("span")){l("span[!data-mce-type|*]")}v.children=g;v.styles=b;v.getBoolAttrs=function(){return T};v.getBlockElements=function(){return N};v.getTextBlockElements=function(){return textBlockElementsMap};v.getShortEndedElements=function(){return x};v.getSelfClosingElements=function(){return S};v.getNonEmptyElements=function(){return C};v.getWhiteSpaceElements=function(){return E};v.isValidChild=function(e,t){var n=g[e];return!!(n&&n[t])};v.isValid=function(e,t){var n,r,i=d(e);if(i){if(t){if(i.attributes[t]){return true}n=i.attributePatterns;if(n){r=n.length;while(r--){if(n[r].pattern.test(e)){return true}}}}else{return true}}return false};v.getElementRule=d;v.getCustomElements=function(){return k};v.addValidElements=l;v.setValidElements=c;v.addCustomElements=h;v.addValidChildren=p;v.elements=m}})(tinymce);(function(e){e.html.SaxParser=function(t,n){var r=this,i=function(){};t=t||{};r.schema=n=n||new e.html.Schema;if(t.fix_self_closing!==false){t.fix_self_closing=true}e.each("comment cdata text start end pi doctype".split(" "),function(e){if(e){r[e]=t[e]||i}});r.parse=function(r){function i(e){var t,n;t=c.length;while(t--){if(c[t].name===e){break}}if(t>=0){for(n=c.length-1;n>=t;n--){e=c[n];if(e.valid){o.end(e.name)}}c.length=t}}function s(e,t,n,r,i){var s,o;t=t.toLowerCase();n=t in b?t:F(n||r||i||"");if(E&&!m&&t.indexOf("data-")!==0){s=k[t];if(!s&&L){o=L.length;while(o--){s=L[o];if(s.pattern.test(t)){break}}if(o===-1){s=null}}if(!s){return}if(s.validValues&&!(n in s.validValues)){return}}h.map[t]=n;h.push({name:t,value:n})}var o=this,u,a=0,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=e.html.Entities.decode,I,q;D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};y=n.getShortEndedElements();_=t.self_closing_elements||n.getSelfClosingElements();b=n.getBoolAttrs();E=t.validate;g=t.remove_internals;I=t.fix_self_closing;q=e.isIE;C=/^:/;while(u=D.exec(r)){if(a<u.index){o.text(F(r.substr(a,u.index-a)))}if(f=u[6]){f=f.toLowerCase();if(q&&C.test(f)){f=f.substr(1)}i(f)}else{if(f=u[7]){f=f.toLowerCase();if(q&&C.test(f)){f=f.substr(1)}w=f in y;if(I&&_[f]&&c.length>0&&c[c.length-1].name===f){i(f)}if(!E||(S=n.getElementRule(f))){x=true;if(E){k=S.attributes;L=S.attributePatterns}if(N=u[8]){m=N.indexOf("data-mce-type")!==-1;if(m&&g){x=false}h=[];h.map={};N.replace(P,s)}else{h=[];h.map={}}if(E&&!m){A=S.attributesRequired;O=S.attributesDefault;M=S.attributesForced;if(M){p=M.length;while(p--){T=M[p];v=T.name;B=T.value;if(B==="{$uid}"){B="mce_"+j++}h.map[v]=B;h.push({name:v,value:B})}}if(O){p=O.length;while(p--){T=O[p];v=T.name;if(!(v in h.map)){B=T.value;if(B==="{$uid}"){B="mce_"+j++}h.map[v]=B;h.push({name:v,value:B})}}}if(A){p=A.length;while(p--){if(A[p]in h.map){break}}if(p===-1){x=false}}if(h.map["data-mce-bogus"]){x=false}}if(x){o.start(f,h,w)}}else{x=false}if(l=H[f]){l.lastIndex=a=u.index+u[0].length;if(u=l.exec(r)){if(x){d=r.substr(a,u.index-a)}a=u.index+u[0].length}else{d=r.substr(a);a=r.length}if(x&&d.length>0){o.text(d,true)}if(x){o.end(f)}D.lastIndex=a;continue}if(!w){if(!N||N.indexOf("/")!=N.length-1){c.push({name:f,valid:x})}else{if(x){o.end(f)}}}}else{if(f=u[1]){o.comment(f)}else{if(f=u[2]){o.cdata(f)}else{if(f=u[3]){o.doctype(f)}else{if(f=u[4]){o.pi(f,u[5])}}}}}}a=u.index+u[0].length}if(a<r.length){o.text(F(r.substr(a)))}for(p=c.length-1;p>=0;p--){f=c[p];if(f.valid){o.end(f.name)}}}}})(tinymce);(function(e){function t(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s]){return e[s]}if(e!==t){r=e[o];if(r){return r}for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r){return r}}}}function n(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}}var r=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(n.prototype,{replace:function(e){var t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t},attr:function(e,t){var n=this,r,i,s;if(typeof e!=="string"){for(i in e){n.attr(i,e[i])}return n}if(r=n.attributes){if(t!==s){if(t===null){if(e in r.map){delete r.map[e];i=r.length;while(i--){if(r[i].name===e){r=r.splice(i,1);return n}}}return n}if(e in r.map){i=r.length;while(i--){if(r[i].name===e){r[i].value=t;break}}}else{r.push({name:e,value:t})}r.map[e]=t;return n}else{return r.map[e]}}},clone:function(){var e=this,t=new n(e.name,e.type),r,i,s,o,u;if(s=e.attributes){u=[];u.map={};for(r=0,i=s.length;r<i;r++){o=s[r];if(o.name!=="id"){u[u.length]={name:o.name,value:o.value};u.map[o.name]=o.value}}t.attributes=u}t.value=e.value;t.shortEnded=e.shortEnded;return t},wrap:function(e){var t=this;t.parent.insert(e,t);e.append(t);return t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;){n=t.next;e.insert(t,e,true);t=n}e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else{r.next=n}if(t.lastChild===e){t.lastChild=r;if(r){r.next=null}}else{n.prev=r}e.parent=e.next=e.prev=null}return e},append:function(e){var t=this,n;if(e.parent){e.remove()}n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e},insert:function(e,t,n){var r;if(e.parent){e.remove()}r=t.parent||this;if(n){if(t===r.firstChild){r.firstChild=e}else{t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===r.lastChild){r.lastChild=e}else{t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e},getAll:function(e){var n=this,r,i=[];for(r=n.firstChild;r;r=t(r,n)){if(r.name===e){i.push(r)}}return i},empty:function(){var e=this,n,r,i;if(e.firstChild){n=[];for(i=e.firstChild;i;i=t(i,e)){n.push(i)}r=n.length;while(r--){i=n[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}e.firstChild=e.lastChild=null;return e},isEmpty:function(e){var n=this,i=n.firstChild,s,o;if(i){do{if(i.type===1){if(i.attributes.map["data-mce-bogus"]){continue}if(e[i.name]){return false}s=i.attributes.length;while(s--){o=i.attributes[s].name;if(o==="name"||o.indexOf("data-mce-")===0){return false}}}if(i.type===8){return false}if(i.type===3&&!r.test(i.value)){return false}}while(i=t(i,n))}return true},walk:function(e){return t(this,null,e)}});e.extend(n,{create:function(e,t){var r,s;r=new n(e,i[e]||1);if(t){for(s in t){r.attr(s,t[s])}}return r}});e.html.Node=n})(tinymce);(function(e){var t=e.html.Node;e.html.DomParser=function(n,r){function i(n){var i,o,u,a,f,l,c,h,p,d,v,m,g,y,b;m=e.makeMap("tr,td,th,tbody,thead,tfoot,table");v=r.getNonEmptyElements();g=r.getTextBlockElements();for(i=0;i<n.length;i++){o=n[i];if(!o.parent||o.fixed){continue}if(g[o.name]&&o.parent.name=="li"){y=o.next;while(y){if(g[y.name]){y.name="li";y.fixed=true;o.parent.insert(y,o.parent)}else{break}y=y.next}o.unwrap(o);continue}a=[o];for(u=o.parent;u&&!r.isValidChild(u.name,o.name)&&!m[u.name];u=u.parent){a.push(u)}if(u&&a.length>1){a.reverse();f=l=s.filterNode(a[0].clone());for(p=0;p<a.length-1;p++){if(r.isValidChild(l.name,a[p].name)){c=s.filterNode(a[p].clone());l.append(c)}else{c=l}for(h=a[p].firstChild;h&&h!=a[p+1];){b=h.next;c.append(h);h=b}l=c}if(!f.isEmpty(v)){u.insert(f,a[0],true);u.insert(o,f)}else{u.insert(o,a[0],true)}u=a[0];if(u.isEmpty(v)||u.firstChild===u.lastChild&&u.firstChild.name==="br"){u.empty().remove()}}else{if(o.parent){if(o.name==="li"){y=o.prev;if(y&&(y.name==="ul"||y.name==="ul")){y.append(o);continue}y=o.next;if(y&&(y.name==="ul"||y.name==="ul")){y.insert(o,y.firstChild,true);continue}o.wrap(s.filterNode(new t("ul",1)));continue}if(r.isValidChild(o.parent.name,"div")&&r.isValidChild("div",o.name)){o.wrap(s.filterNode(new t("div",1)))}else{if(o.name==="style"||o.name==="script"){o.empty().remove()}else{o.unwrap()}}}}}}var s=this,o={},u=[],a={},f={};n=n||{};n.validate="validate"in n?n.validate:true;n.root_name=n.root_name||"body";s.schema=r=r||new e.html.Schema;s.filterNode=function(e){var t,n,r;if(n in o){r=a[n];if(r){r.push(e)}else{a[n]=[e]}}t=u.length;while(t--){n=u[t].name;if(n in e.attributes.map){r=f[n];if(r){r.push(e)}else{f[n]=[e]}}}return e};s.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=o[e];if(!t){o[e]=t=[]}t.push(n)})};s.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<u.length;t++){if(u[t].name===e){u[t].callbacks.push(n);return}}u.push({name:e,callbacks:[n]})})};s.parse=function(s,c){function h(){var e=g.firstChild,t,n;while(e){t=e.next;if(e.type==3||e.type==1&&e.name!=="p"&&!k[e.name]&&!e.attr("data-mce-type")){if(!n){n=p(j,1);g.insert(n,e);n.append(e)}else{n.append(e)}}else{n=null}e=t}}function p(e,n){var r=new t(e,n),i;if(e in o){i=a[e];if(i){i.push(r)}else{a[e]=[r]}}return r}function d(e){var t,n,r;for(t=e.prev;t&&t.type===3;){n=t.value.replace(M,"");if(n.length>0){t.value=n;t=t.prev}else{r=t.prev;t.remove();t=r}}}function v(e){var t,n={};for(t in e){if(t!=="li"&&t!="p"){n[t]=e[t]}}return n}var m,g,y,b,w,E,S,x,T,N,C,k,L,A=[],O,M,_,D,P,H,B,j;c=c||{};a={};f={};k=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),r.getBlockElements());B=r.getNonEmptyElements();H=r.children;C=n.validate;j="forced_root_block"in c?c.forced_root_block:n.forced_root_block;P=r.getWhiteSpaceElements();L=/^[ \t\r\n]+/;M=/[ \t\r\n]+$/;_=/[ \t\r\n]+/g;D=/^[ \t\r\n]+$/;m=new e.html.SaxParser({validate:C,self_closing_elements:v(r.getSelfClosingElements()),cdata:function(e){y.append(p("#cdata",4)).value=e},text:function(e,t){var n;if(!O){e=e.replace(_," ");if(y.lastChild&&k[y.lastChild.name]){e=e.replace(L,"")}}if(e.length!==0){n=p("#text",3);n.raw=!!t;y.append(n).value=e}},comment:function(e){y.append(p("#comment",8)).value=e},pi:function(e,t){y.append(p(e,7)).value=t;d(y)},doctype:function(e){var t;t=y.append(p("#doctype",10));t.value=e;d(y)},start:function(e,t,n){var i,s,o,a,l,c,h,v;o=C?r.getElementRule(e):{};if(o){i=p(o.outputName||e,1);i.attributes=t;i.shortEnded=n;y.append(i);v=H[y.name];if(v&&H[i.name]&&!v[i.name]){A.push(i)}s=u.length;while(s--){l=u[s].name;if(l in t.map){T=f[l];if(T){T.push(i)}else{f[l]=[i]}}}if(k[e]){d(i)}if(!n){y=i}if(!O&&P[e]){O=true}}},end:function(e){var n,i,s,o,u;i=C?r.getElementRule(e):{};if(i){if(k[e]){if(!O){n=y.firstChild;if(n&&n.type===3){s=n.value.replace(L,"");if(s.length>0){n.value=s;n=n.next}else{o=n.next;n.remove();n=o}while(n&&n.type===3){s=n.value;o=n.next;if(s.length===0||D.test(s)){n.remove();n=o}n=o}}n=y.lastChild;if(n&&n.type===3){s=n.value.replace(M,"");if(s.length>0){n.value=s;n=n.prev}else{o=n.prev;n.remove();n=o}while(n&&n.type===3){s=n.value;o=n.prev;if(s.length===0||D.test(s)){n.remove();n=o}n=o}}}}if(O&&P[e]){O=false}if(i.removeEmpty||i.paddEmpty){if(y.isEmpty(B)){if(i.paddEmpty){y.empty().append(new t("#text","3")).value=" "}else{if(!y.attributes.map.name&&!y.attributes.map.id){u=y.parent;y.empty().remove();y=u;return}}}}y=y.parent}}},r);g=y=new t(c.context||n.root_name,11);m.parse(s);if(C&&A.length){if(!c.context){i(A)}else{c.invalid=true}}if(j&&g.name=="body"){h()}if(!c.invalid){for(N in a){T=o[N];b=a[N];S=b.length;while(S--){if(!b[S].parent){b.splice(S,1)}}for(w=0,E=T.length;w<E;w++){T[w](b,N,c)}}for(w=0,E=u.length;w<E;w++){T=u[w];if(T.name in f){b=f[T.name];S=b.length;while(S--){if(!b[S].parent){b.splice(S,1)}}for(S=0,x=T.callbacks.length;S<x;S++){T.callbacks[S](b,T.name,c)}}}}return g};if(n.remove_trailing_brs){s.addNodeFilter("br",function(t,n){var i,s=t.length,o,u=e.extend({},r.getBlockElements()),a=r.getNonEmptyElements(),f,l,c,h;u.body=1;for(i=0;i<s;i++){o=t[i];f=o.parent;if(u[o.parent.name]&&o===f.lastChild){c=o.prev;while(c){h=c.name;if(h!=="span"||c.attr("data-mce-type")!=="bookmark"){if(h!=="br"){break}if(h==="br"){o=null;break}}c=c.prev}if(o){o.remove();if(f.isEmpty(a)){elementRule=r.getElementRule(f.name);if(elementRule){if(elementRule.removeEmpty){f.remove()}else{if(elementRule.paddEmpty){f.empty().append(new e.html.Node("#text",3)).value=" "}}}}}}else{l=o;while(f.firstChild===l&&f.lastChild===l){l=f;if(u[f.name]){break}f=f.parent}if(l===f){textNode=new e.html.Node("#text",3);textNode.value=" ";o.replace(textNode)}}}})}if(!n.allow_html_in_named_anchor){s.addAttributeFilter("id,name",function(e,t){var n=e.length,r,i,s,o;while(n--){o=e[n];if(o.name==="a"&&o.firstChild&&!o.attr("href")){s=o.parent;r=o.lastChild;do{i=r.prev;s.insert(r,o);r=i}while(r)}}})}}})(tinymce);tinymce.html.Writer=function(e){var t=[],n,r,i,s,o;e=e||{};n=e.indent;r=tinymce.makeMap(e.indent_before||"");i=tinymce.makeMap(e.indent_after||"");s=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);o=e.element_format=="html";return{start:function(e,u,a){var f,l,c,h;if(n&&r[e]&&t.length>0){h=t[t.length-1];if(h.length>0&&h!=="\n"){t.push("\n")}}t.push("<",e);if(u){for(f=0,l=u.length;f<l;f++){c=u[f];t.push(" ",c.name,'="',s(c.value,true),'"')}}if(!a||o){t[t.length]=">"}else{t[t.length]=" />"}if(a&&n&&i[e]&&t.length>0){h=t[t.length-1];if(h.length>0&&h!=="\n"){t.push("\n")}}},end:function(e){var r;t.push("</",e,">");if(n&&i[e]&&t.length>0){r=t[t.length-1];if(r.length>0&&r!=="\n"){t.push("\n")}}},text:function(e,n){if(e.length>0){t[t.length]=n?e:s(e)}},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("<!--",e,"-->")},pi:function(e,r){if(r){t.push("<?",e," ",r,"?>")}else{t.push("<?",e,"?>")}if(n){t.push("\n")}},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}};(function(e){e.html.Serializer=function(t,n){var r=this,i=new e.html.Writer(t);t=t||{};t.validate="validate"in t?t.validate:true;r.schema=n=n||new e.html.Schema;r.writer=i;r.serialize=function(e){function r(e){var t=s[e.type],u,a,f,l,c,h,p,d,v;if(!t){u=e.name;a=e.shortEnded;f=e.attributes;if(o&&f&&f.length>1){h=[];h.map={};v=n.getElementRule(e.name);for(p=0,d=v.attributesOrder.length;p<d;p++){l=v.attributesOrder[p];if(l in f.map){c=f.map[l];h.map[l]=c;h.push({name:l,value:c})}}for(p=0,d=f.length;p<d;p++){l=f[p].name;if(!(l in h.map)){c=f.map[l];h.map[l]=c;h.push({name:l,value:c})}}f=h}i.start(e.name,f,a);if(!a){if(e=e.firstChild){do{r(e)}while(e=e.next)}i.end(u)}}else{t(e)}}var s,o;o=t.validate;s={3:function(e,t){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild){do{r(e)}while(e=e.next)}}};i.reset();if(e.type==1&&!t.inner){r(e)}else{s[11](e)}return i.getContent()}}})(tinymce);tinymce.dom={};(function(e,t){function n(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r||false)}else{if(e.attachEvent){e.attachEvent("on"+t,n)}}}function r(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r||false)}else{if(e.detachEvent){e.detachEvent("on"+t,n)}}}function i(e,t){function n(){return false}function r(){return true}var i,s=t||{};for(i in e){if(i!=="layerX"&&i!=="layerY"){s[i]=e[i]}}if(!s.target){s.target=s.srcElement||document}s.preventDefault=function(){s.isDefaultPrevented=r;if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};s.stopPropagation=function(){s.isPropagationStopped=r;if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r;s.stopPropagation()};if(!s.isDefaultPrevented){s.isDefaultPrevented=n;s.isPropagationStopped=n;s.isImmediatePropagationStopped=n}return s}function s(e,t,i){function s(){if(!i.domLoaded){i.domLoaded=true;t(a)}}var o=e.document,a={type:"ready"};if(o.readyState=="complete"){s();return}if(u){n(e,"DOMContentLoaded",s)}else{n(o,"readystatechange",function(){if(o.readyState==="complete"){r(o,"readystatechange",arguments.callee);s()}});if(o.documentElement.doScroll&&e===e.top){(function(){try{o.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}s()})()}}n(e,"load",s)}function o(e){function o(e,t){var n,r,i,s;n=f[t][e.type];if(n){for(r=0,i=n.length;r<i;r++){s=n[r];if(s&&s.func.call(s.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}}var a=this,f={},l,c,h,p,d;p="onmouseenter"in document.documentElement;h="onfocusin"in document.documentElement;d={mouseenter:"mouseover",mouseleave:"mouseout"};l=1;a.domLoaded=false;a.events=f;a.bind=function(r,c,g,w){function E(e){o(i(e||A.event),S)}var S,x,T,N,C,k,L,A=window;if(!r||r.nodeType===3||r.nodeType===8){return}if(!r[t]){S=l++;r[t]=S;f[S]={}}else{S=r[t];if(!f[S]){f[S]={}}}w=w||r;c=c.split(" ");T=c.length;while(T--){N=c[T];k=E;C=L=false;if(N==="DOMContentLoaded"){N="ready"}if((a.domLoaded||r.readyState=="complete")&&N==="ready"){a.domLoaded=true;g.call(w,i({type:N}));continue}if(!p){C=d[N];if(C){k=function(e){var t,n;t=e.currentTarget;n=e.relatedTarget;if(n&&t.contains){n=t.contains(n)}else{while(n&&n!==t){n=n.parentNode}}if(!n){e=i(e||A.event);e.type=e.type==="mouseout"?"mouseleave":"mouseenter";e.target=t;o(e,S)}}}}if(!h&&(N==="focusin"||N==="focusout")){L=true;C=N==="focusin"?"focus":"blur";k=function(e){e=i(e||A.event);e.type=e.type==="focus"?"focusin":"focusout";o(e,S)}}x=f[S][N];if(!x){f[S][N]=x=[{func:g,scope:w}];x.fakeName=C;x.capture=L;x.nativeHandler=k;if(!u){x.proxyHandler=e(S)}if(N==="ready"){s(r,k,a)}else{n(r,C||N,u?k:x.proxyHandler,L)}}else{x.push({func:g,scope:w})}}r=x=0;return g};a.unbind=function(e,n,i){var s,o,l,c,h,p;if(!e||e.nodeType===3||e.nodeType===8){return a}s=e[t];if(s){p=f[s];if(n){n=n.split(" ");l=n.length;while(l--){h=n[l];o=p[h];if(o){if(i){c=o.length;while(c--){if(o[c].func===i){o.splice(c,1)}}}if(!i||o.length===0){delete p[h];r(e,o.fakeName||h,u?o.nativeHandler:o.proxyHandler,o.capture)}}}}else{for(h in p){o=p[h];r(e,o.fakeName||h,u?o.nativeHandler:o.proxyHandler,o.capture)}p={}}for(h in p){return a}delete f[s];try{delete e[t]}catch(d){e[t]=null}}return a};a.fire=function(e,n,r){var s,u;if(!e||e.nodeType===3||e.nodeType===8){return a}u=i(null,r);u.type=n;do{s=e[t];if(s){o(u,s)}e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!u.isPropagationStopped());return a};a.clean=function(e){var n,r,i=a.unbind;if(!e||e.nodeType===3||e.nodeType===8){return a}if(e[t]){i(e)}if(!e.getElementsByTagName){e=e.document}if(e&&e.getElementsByTagName){i(e);r=e.getElementsByTagName("*");n=r.length;while(n--){e=r[n];if(e[t]){i(e)}}}return a};a.callNativeHandler=function(e,t){if(f){f[e][t.type].nativeHandler(t)}};a.destory=function(){f={}};a.add=function(e,t,n,r){if(typeof e==="string"){e=document.getElementById(e)}if(e&&e instanceof Array){var i=e.length;while(i--){a.add(e[i],t,n,r)}return}if(t==="init"){t="ready"}return a.bind(e,t instanceof Array?t.join(" "):t,n,r)};a.remove=function(e,t,n,r){if(!e){return a}if(typeof e==="string"){e=document.getElementById(e)}if(e instanceof Array){var i=e.length;while(i--){a.remove(e[i],t,n,r)}return a}return a.unbind(e,t instanceof Array?t.join(" "):t,n)};a.clear=function(e){if(typeof e==="string"){e=document.getElementById(e)}return a.clean(e)};a.cancel=function(e){if(e){a.prevent(e);a.stop(e)}return false};a.prevent=function(e){if(!e.preventDefault){e=i(e)}e.preventDefault();return false};a.stop=function(e){if(!e.stopPropagation){e=i(e)}e.stopPropagation();return false}}var u=!!document.addEventListener;e.EventUtils=o;e.Event=new o(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}});e.Event.bind(window,"ready",function(){});e=0})(tinymce.dom,"data-mce-expando");tinymce.dom.TreeWalker=function(e,t){function n(e,n,r,i){var s,o;if(e){if(!i&&e[n]){return e[n]}if(e!=t){s=e[r];if(s){return s}for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s){return s}}}}}var r=e;this.current=function(){return r};this.next=function(e){return r=n(r,"firstChild","nextSibling",e)};this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}};(function(e){var t=e.each,n=e.is,r=e.isWebKit,i=e.isIE,s=e.html.Entities,o=/^([a-z0-9],?)+$/i,u=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var r=this,i,s,o;r.doc=t;r.win=window;r.files={};r.cssFlicker=false;r.counter=0;r.stdMode=!e.isIE||t.documentMode>=8;r.boxModel=!e.isIE||t.compatMode=="CSS1Compat"||r.stdMode;r.hasOuterHTML="outerHTML"in t.createElement("a");r.settings=n=e.extend({keep_values:false,hex_colors:1},n);r.schema=n.schema;r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(e.isIE6){try{t.execCommand("BackgroundImageCache",false,true)}catch(u){r.cssFlicker=true}}r.fixDoc(t);r.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event;e.addUnload(r.destroy,r);o=n.schema?n.schema.getBlockElements():{};r.isBlock=function(e){if(!e){return false}var t=e.nodeType;if(t){return!!(t===1&&o[e.nodeName])}return!!o[e]}},fixDoc:function(e){var t=this.settings,n;if(i&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements()){e.createElement(n)}}},clone:function(e,n){var r=this,s,o;if(!i||e.nodeType!==1||n){return e.cloneNode(n)}o=r.doc;if(!n){s=o.createElement(e.nodeName);t(r.getAttribs(e),function(t){r.setAttrib(s,t.nodeName,r.getAttrib(e,t.nodeName))});return s}return s.firstChild},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;e=!e?this.win:e;t=e.document;n=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n=this,r;e=n.get(e);t=n.getPos(e);r=n.getSize(e);return{x:t.x,y:t.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;e=t.get(e);n=t.getStyle(e,"width");r=t.getStyle(e,"height");if(n.indexOf("px")===-1){n=0}if(r.indexOf("px")===-1){r=0}return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,t,r,i){var s=this,o,u=s.settings,a=[];e=s.get(e);i=i===undefined;if(u.strict_root){r=r||s.getRoot()}if(n(t,"string")){o=t;if(t==="*"){t=function(e){return e.nodeType==1}}else{t=function(e){return s.is(e,o)}}}while(e){if(e==r||!e.nodeType||e.nodeType===9){break}if(!t||t(e)){if(i){a.push(e)}else{return e}}e=e.parentNode}return i?a:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e;e=this.doc.getElementById(e);if(e&&e.id!==t){return this.doc.getElementsByName(t)[1]}}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,r,i,s){var o=this;return this.run(e,function(e){var u,a;u=n(t,"string")?o.doc.createElement(t):t;o.setAttribs(u,r);if(i){if(i.nodeType){u.appendChild(i)}else{o.setHTML(u,i)}}return!s?e.appendChild(u):u})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i=this,s;r+="<"+e;for(s in t){if(t.hasOwnProperty(s)){r+=" "+s+'="'+i.encode(t[s])+'"'}}if(typeof n!="undefined"){return r+">"+n+"</"+e+">"}return r+" />"},remove:function(t,n){return this.run(t,function(t){var r,i=t.parentNode;if(!i){return null}if(n){while(r=t.firstChild){if(!e.isIE||r.nodeType!==3||r.nodeValue){i.insertBefore(r,t)}else{t.removeChild(r)}}}return i.removeChild(t)})},setStyle:function(t,n,r){var s=this;return s.run(t,function(o){var u,a;u=o.style;n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(s.pixelStyles.test(n)&&(e.is(r,"number")||/^[\-0-9\.]+$/.test(r))){r+="px"}switch(n){case"opacity":if(i){u.filter=r===""?"":"alpha(opacity="+r*100+")";if(!t.currentStyle||!t.currentStyle.hasLayout){u.display="inline-block"}}u[n]=u["-moz-opacity"]=u["-khtml-opacity"]=r||"";break;case"float":i?u.styleFloat=r:u.cssFloat=r;break;default:u[n]=r||""}if(s.settings.update_styles){s.setAttrib(o,"data-mce-style")}})},getStyle:function(e,t,n){e=this.get(e);if(!e){return}if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(r){return null}}t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(t=="float"){t=i?"styleFloat":"cssFloat"}if(e.currentStyle&&n){return e.currentStyle[t]}return e.style?e.style[t]:undefined},setStyles:function(e,n){var r=this,i=r.settings,s;s=i.update_styles;i.update_styles=0;t(n,function(t,n){r.setStyle(e,n,t)});i.update_styles=s;if(i.update_styles){r.setAttrib(e,i.cssText)}},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--){e.removeAttributeNode(n.item(t))}})},setAttrib:function(e,r,i){var s=this;if(!e||!r){return}if(s.settings.strict){r=r.toLowerCase()}return this.run(e,function(e){var o=s.settings;var u=e.getAttribute(r);if(i!==null){switch(r){case"style":if(!n(i,"string")){t(i,function(t,n){s.setStyle(e,n,t)});return}if(o.keep_values){if(i&&!s._isRes(i)){e.setAttribute("data-mce-style",i,2)}else{e.removeAttribute("data-mce-style",2)}}e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":if(o.keep_values){if(o.url_converter){i=o.url_converter.call(o.url_converter_scope||s,i,r,e)}s.setAttrib(e,"data-mce-"+r,i,2)}break;case"shape":e.setAttribute("data-mce-style",i);break}}if(n(i)&&i!==null&&i.length!==0){e.setAttribute(r,""+i,2)}else{e.removeAttribute(r,2)}if(tinyMCE.activeEditor&&u!=i){var a=tinyMCE.activeEditor;a.onSetAttrib.dispatch(a,e,r,i)}})},setAttribs:function(e,n){var r=this;return this.run(e,function(e){t(n,function(t,n){r.setAttrib(e,n,t)})})},getAttrib:function(t,s,o){var u,a=this,f;t=a.get(t);if(!t||t.nodeType!==1){return o===f?false:o}if(!n(o)){o=""}if(/^(src|href|style|coords|shape)$/.test(s)){u=t.getAttribute("data-mce-"+s);if(u){return u}}if(i&&a.props[s]){u=t[a.props[s]];u=u&&u.nodeValue?u.nodeValue:u}if(!u){u=t.getAttribute(s,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s)){if(t[a.props[s]]===true&&u===""){return s}return u?s:""}if(t.nodeName==="FORM"&&t.getAttributeNode(s)){return t.getAttributeNode(s).nodeValue}if(s==="style"){u=u||t.style.cssText;if(u){u=a.serializeStyle(a.parseStyle(u),t.nodeName);if(a.settings.keep_values&&!a._isRes(u)){t.setAttribute("data-mce-style",u)}}}if(r&&s==="class"&&u){u=u.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(i){switch(s){case"rowspan":case"colspan":if(u===1){u=""}break;case"size":if(u==="+0"||u===20||u===0){u=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(u===0){u=""}break;case"hspace":if(u===-1){u=""}break;case"maxlength":case"tabindex":if(u===32768||u===2147483647||u==="32768"){u=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(u===65535){return s}return o;case"shape":u=u.toLowerCase();break;default:if(s.indexOf("on")===0&&u){u=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+u)}}}return u!==f&&u!==null&&u!==""?""+u:o},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;e=n.get(e);t=t||o.body;if(e){if(e.getBoundingClientRect){e=e.getBoundingClientRect();s=n.boxModel?o.documentElement:o.body;r=e.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-s.clientTop;i=e.top+(o.documentElement.scrollTop||o.body.scrollTop)-s.clientLeft;return{x:r,y:i}}u=e;while(u&&u!=t&&u.nodeType){r+=u.offsetLeft||0;i+=u.offsetTop||0;u=u.offsetParent}u=e.parentNode;while(u&&u!=t&&u.nodeType){r-=u.scrollLeft||0;i-=u.scrollTop||0;u=u.parentNode}}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this.doc,n;styleElm=t.getElementById("mceDefaultStyles");if(!styleElm){styleElm=t.createElement("style"),styleElm.id="mceDefaultStyles";styleElm.type="text/css";n=t.getElementsByTagName("head")[0];if(n.firstChild){n.insertBefore(styleElm,n.firstChild)}else{n.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=e}else{styleElm.appendChild(t.createTextNode(e))}},loadCSS:function(n){var r=this,s=r.doc,o;if(!n){n=""}o=s.getElementsByTagName("head")[0];t(n.split(","),function(t){var n;if(r.files[t]){return}r.files[t]=true;n=r.create("link",{rel:"stylesheet",href:e._addVer(t)});if(i&&s.documentMode&&s.recalc){n.onload=function(){if(s.recalc){s.recalc()}n.onload=null}}o.appendChild(n)})},addClass:function(e,t){return this.run(e,function(e){var n;if(!t){return 0}if(this.hasClass(e,t)){return e.className}n=this.removeClass(e,t);return e.className=(n!=""?n+" ":"")+t})},removeClass:function(t,n){var r=this,i;return r.run(t,function(t){var s;if(r.hasClass(t,n)){if(!i){i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")}s=t.className.replace(i," ");s=e.trim(s!=" "?s:"");t.className=s;if(!s){t.removeAttribute("class");t.removeAttribute("className")}return s}return t.className})},hasClass:function(e,t){e=this.get(e);if(!e||!t){return false}return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){e=this.get(e);return!e||e.style.display=="none"||this.getStyle(e,"display")=="none"},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(n,r){var s=this;return s.run(n,function(n){if(i){while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br />"+r;n.removeChild(n.firstChild)}catch(o){var u=s.create("div");u.innerHTML="<br />"+r;t(e.grep(u.childNodes),function(e,t){if(t&&n.canHaveHTML){n.appendChild(e)}})}}else{n.innerHTML=r}return r})},getOuterHTML:function(e){var t,n=this;e=n.get(e);if(!e){return null}if(e.nodeType===1&&n.hasOuterHTML){return e.outerHTML}t=(e.ownerDocument||n.doc).createElement("body");t.appendChild(e.cloneNode(true));return t.innerHTML},setOuterHTML:function(e,t,n){function r(e,t,n){var r,i;i=n.createElement("body");i.innerHTML=t;r=i.lastChild;while(r){s.insertAfter(r.cloneNode(true),e);r=r.previousSibling}s.remove(e)}var s=this;return this.run(e,function(e){e=s.get(e);if(e.nodeType==1){n=n||e.ownerDocument||s.doc;if(i){try{if(i&&e.nodeType==1){e.outerHTML=t}else{r(e,t,n)}}catch(o){r(e,t,n)}}else{r(e,t,n)}}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){t=this.get(t);return this.run(e,function(e){var n,r;n=t.parentNode;r=t.nextSibling;if(r){n.insertBefore(e,r)}else{n.appendChild(e)}return e})},replace:function(r,i,s){var o=this;if(n(i,"array")){r=r.cloneNode(true)}return o.run(i,function(n){if(s){t(e.grep(n.childNodes),function(e){r.appendChild(e)})}return n.parentNode.replaceChild(r,n)})},rename:function(e,n){var r=this,i;if(e.nodeName!=n.toUpperCase()){i=r.create(n);t(r.getAttribs(e),function(t){r.setAttrib(i,t.nodeName,r.getAttrib(e,t.nodeName))});r.replace(i,e,1)}return i||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r){r=r.parentNode}if(n==r){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}return n},toHex:function(e){function t(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);if(n){e="#"+t(n[1])+t(n[2])+t(n[3]);return e}return e},getClasses:function(){function n(r){t(r.imports,function(e){n(e)});t(r.cssRules||r.rules,function(r){switch(r.type||1){case 1:if(r.selectorText){t(r.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t)){return}a=t;t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(u&&!(t=u(t,a))){return}if(!o[t]){i.push({"class":t});o[t]=1}})}break;case 3:n(r.styleSheet);break}})}var r=this,i=[],s,o={},u=r.settings.class_filter,a;if(r.classes){return r.classes}try{t(r.doc.styleSheets,n)}catch(f){}if(i.length>0){r.classes=i}return i},run:function(e,n,r){var i=this,s;if(i.doc&&typeof e==="string"){e=i.get(e)}if(!e){return false}r=r||this;if(!e.nodeType&&(e.length||e.length===0)){s=[];t(e,function(e,t){if(e){if(typeof e=="string"){e=i.doc.getElementById(e)}s.push(n.call(r,e,t))}});return s}return n.call(r,e)},getAttribs:function(e){var t;e=this.get(e);if(!e){return[]}if(i){t=[];if(e.nodeName=="OBJECT"){return e.attributes}if(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")){t.push({specified:1,nodeName:"selected"})}e.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})});return t}return e.attributes},isEmpty:function(t,n){var r=this,i,s,o,a,f,l=0;t=t.firstChild;if(t){a=new e.dom.TreeWalker(t,t.parentNode);n=n||r.schema?r.schema.getNonEmptyElements():null;do{o=t.nodeType;if(o===1){if(t.getAttribute("data-mce-bogus")){continue}f=t.nodeName.toLowerCase();if(n&&n[f]){if(f==="br"){l++;continue}return false}s=r.getAttribs(t);i=t.attributes.length;while(i--){f=t.attributes[i].nodeName;if(f==="name"||f==="data-mce-bookmark"){return false}}}if(o==8){return false}if(o===3&&!u.test(t.nodeValue)){return false}}while(t=a.next())}return l<=1},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null;if(!t){e.removeUnload(n.destroy)}},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e){for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling){s=e.nodeType;if(t&&s==3){if(s==r||!e.nodeValue.length){continue}}n++;r=s}}return n},split:function(t,n,r){function i(t){function n(e){var t=e.previousSibling&&e.previousSibling.nodeName=="SPAN";var n=e.nextSibling&&e.nextSibling.nodeName=="SPAN";return t&&n}var r,o=t.childNodes,u=t.nodeType;if(u==1&&t.getAttribute("data-mce-type")=="bookmark"){return}for(r=o.length-1;r>=0;r--){i(o[r])}if(u!=9){if(u==3&&t.nodeValue.length>0){var a=e.trim(t.nodeValue).length;if(!s.isBlock(t.parentNode)||a>0||a===0&&n(t)){return}}else{if(u==1){o=t.childNodes;if(o.length==1&&o[0]&&o[0].nodeType==1&&o[0].getAttribute("data-mce-type")=="bookmark"){t.parentNode.insertBefore(o[0],t)}if(o.length||/^(br|hr|input|img)$/i.test(t.nodeName)){return}}}s.remove(t)}return t}var s=this,o=s.createRng(),u,a,f;if(t&&n){o.setStart(t.parentNode,s.nodeIndex(t));o.setEnd(n.parentNode,s.nodeIndex(n));u=o.extractContents();o=s.createRng();o.setStart(n.parentNode,s.nodeIndex(n)+1);o.setEnd(t.parentNode,s.nodeIndex(t)+1);a=o.extractContents();f=t.parentNode;f.insertBefore(i(u),t);if(r){f.replaceChild(r,n)}else{f.insertBefore(n,t)}f.insertBefore(i(a),t);s.remove(t);return r||n}},bind:function(e,t,n,r){return this.events.add(e,t,n,r||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(e.nodeType!=1){return null}t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null},_findSib:function(e,t,r){var i=this,s=t;if(e){if(n(s,"string")){s=function(e){return i.is(e,t)}}for(e=e[r];e;e=e[r]){if(s(e)){return e}}}return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}});e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(e){function t(e){function n(){return P.createDocumentFragment()}function r(e,t){S(F,e,t)}function i(e,t){S(I,e,t)}function s(e){r(e.parentNode,X(e))}function o(e){r(e.parentNode,X(e)+1)}function u(e){i(e.parentNode,X(e))}function a(e){i(e.parentNode,X(e)+1)}function f(e){if(e){D[U]=D[R];D[z]=D[q]}else{D[R]=D[U];D[q]=D[z]}D.collapsed=F}function l(e){s(e);a(e)}function c(e){r(e,0);i(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function h(e,t){var n=D[R],r=D[q],i=D[U],s=D[z],o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset;if(e===0){return E(n,r,o,u)}if(e===1){return E(i,s,o,u)}if(e===2){return E(i,s,a,f)}if(e===3){return E(n,r,a,f)}}function p(){x(j)}function d(){return x(H)}function v(){return x(B)}function m(t){var n=this[R],r=this[q],i,s;if((n.nodeType===3||n.nodeType===4)&&n.nodeValue){if(!r){n.parentNode.insertBefore(t,n)}else{if(r>=n.nodeValue.length){e.insertAfter(t,n)}else{i=n.splitText(r);n.parentNode.insertBefore(t,i)}}}else{if(n.childNodes.length>0){s=n.childNodes[r]}if(s){n.insertBefore(t,s)}else{n.appendChild(t)}}}function g(e){var t=D.extractContents();D.insertNode(e);e.appendChild(t);D.selectNode(e)}function y(){return W(new t(e),{startContainer:D[R],startOffset:D[q],endContainer:D[U],endOffset:D[z],collapsed:D.collapsed,commonAncestorContainer:D.commonAncestorContainer})}function b(e,t){var n;if(e.nodeType==3){return e}if(t<0){return e}n=e.firstChild;while(n&&t>0){--t;n=n.nextSibling}if(n){return n}return e}function w(){return D[R]==D[U]&&D[q]==D[z]}function E(t,n,r,i){var s,o,u,a,f,l;if(t==r){if(n==i){return 0}if(n<i){return-1}return 1}s=r;while(s&&s.parentNode!=t){s=s.parentNode}if(s){o=0;u=t.firstChild;while(u!=s&&o<n){o++;u=u.nextSibling}if(n<=o){return-1}return 1}s=t;while(s&&s.parentNode!=r){s=s.parentNode}if(s){o=0;u=r.firstChild;while(u!=s&&o<i){o++;u=u.nextSibling}if(o<i){return-1}return 1}a=e.findCommonAncestor(t,r);f=t;while(f&&f.parentNode!=a){f=f.parentNode}if(!f){f=a}l=r;while(l&&l.parentNode!=a){l=l.parentNode}if(!l){l=a}if(f==l){return 0}u=a.firstChild;while(u){if(u==f){return-1}if(u==l){return 1}u=u.nextSibling}}function S(t,n,r){var i,s;if(t){D[R]=n;D[q]=r}else{D[U]=n;D[z]=r}i=D[U];while(i.parentNode){i=i.parentNode}s=D[R];while(s.parentNode){s=s.parentNode}if(s==i){if(E(D[R],D[q],D[U],D[z])>0){D.collapse(t)}}else{D.collapse(t)}D.collapsed=w();D.commonAncestorContainer=e.findCommonAncestor(D[R],D[U])}function x(e){var t,n=0,r=0,i,s,o,u,a,f;if(D[R]==D[U]){return T(e)}for(t=D[U],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[R]){return N(t,e)}++n}for(t=D[R],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[U]){return C(t,e)}++r}s=r-n;o=D[R];while(s>0){o=o.parentNode;s--}u=D[U];while(s<0){u=u.parentNode;s++}for(a=o.parentNode,f=u.parentNode;a!=f;a=a.parentNode,f=f.parentNode){o=a;u=f}return k(o,u,e)}function T(e){var t,r,i,s,o,u,a,f,l;if(e!=j){t=n()}if(D[q]==D[z]){return t}if(D[R].nodeType==3){r=D[R].nodeValue;i=r.substring(D[q],D[z]);if(e!=B){s=D[R];f=D[q];l=D[z]-D[q];if(f===0&&l>=s.nodeValue.length-1){s.parentNode.removeChild(s)}else{s.deleteData(f,l)}D.collapse(F)}if(e==j){return}if(i.length>0){t.appendChild(P.createTextNode(i))}return t}s=b(D[R],D[q]);o=D[z]-D[q];while(s&&o>0){u=s.nextSibling;a=M(s,e);if(t){t.appendChild(a)}--o;s=u}if(e!=B){D.collapse(F)}return t}function N(e,t){var r,i,s,o,u,a;if(t!=j){r=n()}i=L(e,t);if(r){r.appendChild(i)}s=X(e);o=s-D[q];if(o<=0){if(t!=B){D.setEndBefore(e);D.collapse(I)}return r}i=e.previousSibling;while(o>0){u=i.previousSibling;a=M(i,t);if(r){r.insertBefore(a,r.firstChild)}--o;i=u}if(t!=B){D.setEndBefore(e);D.collapse(I)}return r}function C(e,t){var r,i,s,o,u,a;if(t!=j){r=n()}s=A(e,t);if(r){r.appendChild(s)}i=X(e);++i;o=D[z]-i;s=e.nextSibling;while(s&&o>0){u=s.nextSibling;a=M(s,t);if(r){r.appendChild(a)}--o;s=u}if(t!=B){D.setStartAfter(e);D.collapse(F)}return r}function k(e,t,r){var i,s,o,u,a,f,l,c;if(r!=j){s=n()}i=A(e,r);if(s){s.appendChild(i)}o=e.parentNode;u=X(e);a=X(t);++u;f=a-u;l=e.nextSibling;while(f>0){c=l.nextSibling;i=M(l,r);if(s){s.appendChild(i)}l=c;--f}i=L(t,r);if(s){s.appendChild(i)}if(r!=B){D.setStartAfter(e);D.collapse(F)}return s}function L(e,t){var n=b(D[U],D[z]-1),r,i,s,o,u,a=n!=D[U];if(n==e){return O(n,a,I,t)}r=n.parentNode;i=O(r,I,I,t);while(r){while(n){s=n.previousSibling;o=O(n,a,I,t);if(t!=j){i.insertBefore(o,i.firstChild)}a=F;n=s}if(r==e){return i}n=r.previousSibling;r=r.parentNode;u=O(r,I,I,t);if(t!=j){u.appendChild(i)}i=u}}function A(e,t){var n=b(D[R],D[q]),r=n!=D[R],i,s,o,u,a;if(n==e){return O(n,r,F,t)}i=n.parentNode;s=O(i,I,F,t);while(i){while(n){o=n.nextSibling;u=O(n,r,F,t);if(t!=j){s.appendChild(u)}r=F;n=o}if(i==e){return s}n=i.nextSibling;i=i.parentNode;a=O(i,I,F,t);if(t!=j){a.appendChild(s)}s=a}}function O(t,n,r,i){var s,o,u,a,f;if(n){return M(t,i)}if(t.nodeType==3){s=t.nodeValue;if(r){a=D[q];o=s.substring(a);u=s.substring(0,a)}else{a=D[z];o=s.substring(0,a);u=s.substring(a)}if(i!=B){t.nodeValue=u}if(i==j){return}f=e.clone(t,I);f.nodeValue=o;return f}if(i==j){return}return e.clone(t,I)}function M(t,n){if(n!=j){return n==B?e.clone(t,F):t}t.parentNode.removeChild(t)}function _(){return e.create("body",null,v()).outerText}var D=this,P=e.doc,H=0,B=1,j=2,F=true,I=false,q="startOffset",R="startContainer",U="endContainer",z="endOffset",W=tinymce.extend,X=e.nodeIndex;W(D,{startContainer:P,startOffset:0,endContainer:P,endOffset:0,collapsed:F,commonAncestorContainer:P,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:i,setStartBefore:s,setStartAfter:o,setEndBefore:u,setEndAfter:a,collapse:f,selectNode:l,selectNodeContents:c,compareBoundaryPoints:h,deleteContents:p,extractContents:d,cloneContents:v,insertNode:m,surroundContents:g,cloneRange:y,toStringIE:_});return D}e.Range=t;t.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function e(e){function t(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;r=t.duplicate();r.collapse(n);h=r.parentElement();if(h.ownerDocument!==e.dom.doc){return}while(h.contentEditable==="false"){h=h.parentNode}if(!h.hasChildNodes()){return{node:h,inside:1}}u=h.children;s=u.length-1;while(i<=s){l=Math.floor((i+s)/2);a=u[l];r.moveToElementText(a);c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0){s=l-1}else{if(c<0){i=l+1}else{return{node:a}}}}if(c<0){if(!a){r.moveToElementText(h);r.collapse(true);a=h;o=true}else{r.collapse(false)}f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",1)===0||h!=r.parentElement()){break}f++}}else{r.collapse(true);f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",-1)===0||h!=r.parentElement()){break}f++}}return{node:a,position:c,offset:f,inside:o}}function n(){function n(e){var n=t(s,e),r,i,u=0,a,f,l;r=n.node;i=n.offset;if(n.inside&&!r.hasChildNodes()){o[e?"setStart":"setEnd"](r,0);return}if(i===f){o[e?"setStartBefore":"setEndAfter"](r);return}if(n.position<0){a=n.inside?r.firstChild:r.nextSibling;if(!a){o[e?"setStartAfter":"setEndAfter"](r);return}if(!i){if(a.nodeType==3){o[e?"setStart":"setEnd"](a,0)}else{o[e?"setStartBefore":"setEndBefore"](a)}return}while(a){l=a.nodeValue;u+=l.length;if(u>=i){r=a;u-=i;u=l.length-u;break}a=a.nextSibling}}else{a=r.previousSibling;if(!a){return o[e?"setStartBefore":"setEndBefore"](r)}if(!i){if(r.nodeType==3){o[e?"setStart":"setEnd"](a,r.nodeValue.length)}else{o[e?"setStartAfter":"setEndAfter"](a)}return}while(a){u+=a.nodeValue.length;if(u>=i){r=a;u-=i;break}a=a.previousSibling}}o[e?"setStart":"setEnd"](r,u)}var s=e.getRng(),o=i.createRng(),u,a,f,l,c,h;u=s.item?s.item(0):s.parentElement();if(u.ownerDocument!=i.doc){return o}a=e.isCollapsed();if(s.item){o.setStart(u.parentNode,i.nodeIndex(u));o.setEnd(o.startContainer,o.startOffset+1);return o}try{n(true);if(!a){n()}}catch(p){if(p.number==-2147024809){c=r.getBookmark(2);f=s.duplicate();f.collapse(true);u=f.parentElement();if(!a){f=s.duplicate();f.collapse(false);l=f.parentElement();l.innerHTML=l.innerHTML}u.innerHTML=u.innerHTML;r.moveToBookmark(c);s=e.getRng();n(true);if(!a){n()}}else{throw p}}return o}var r=this,i=e.dom,s=true,o=false;this.getBookmark=function(n){function r(e){var t,n,r,s,o=[];t=e.parentNode;n=i.getRoot().parentNode;while(t!=n&&t.nodeType!==9){r=t.children;s=r.length;while(s--){if(e===r[s]){o.push(s);break}}e=t;t=t.parentNode}return o}function s(e){var n;n=t(o,e);if(n){return{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}}}var o=e.getRng(),u,a,f={};if(n===2){if(!o.item){f.start=s(true);if(!e.isCollapsed()){f.end=s()}}else{f.start={ctrl:true,indexes:r(o.item(0))}}}return f};this.moveToBookmark=function(e){function t(e){var t,n,r,s;t=i.getRoot();for(n=e.length-1;n>=0;n--){s=t.children;r=e[n];if(r<=s.length-1){t=s[r]}}return t}function n(n){var i=e[n?"start":"end"],o,u,a;if(i){o=i.position>0;u=s.createTextRange();u.moveToElementText(t(i.indexes));offset=i.offset;if(offset!==a){u.collapse(i.inside||o);u.moveStart("character",o?-offset:offset)}else{u.collapse(n)}r.setEndPoint(n?"StartToStart":"EndToStart",u);if(n){r.collapse(true)}}}var r,s=i.doc.body;if(e.start){if(e.start.ctrl){r=s.createControlRange();r.addElement(t(e.start.indexes));r.select()}else{r=s.createTextRange();n(true);n();r.select()}}};this.addRange=function(t){function n(e){var t,n,s,c,d;s=i.create("a");t=e?u:f;n=e?a:l;c=r.duplicate();if(t==h||t==h.documentElement){t=p;n=0}if(t.nodeType==3){t.parentNode.insertBefore(s,t);c.moveToElementText(s);c.moveStart("character",n);i.remove(s);r.setEndPoint(e?"StartToStart":"EndToEnd",c)}else{d=t.childNodes;if(d.length){if(n>=d.length){i.insertAfter(s,d[d.length-1])}else{t.insertBefore(s,d[n])}c.moveToElementText(s)}else{if(t.canHaveHTML){t.innerHTML="<span>﻿</span>";s=t.firstChild;c.moveToElementText(s);c.collapse(o)}}r.setEndPoint(e?"StartToStart":"EndToEnd",c);i.remove(s)}}var r,s,u,a,f,l,c,h=e.dom.doc,p=h.body,d,v;u=t.startContainer;a=t.startOffset;f=t.endContainer;l=t.endOffset;r=p.createTextRange();if(u==f&&u.nodeType==1){if(a==l&&!u.hasChildNodes()){if(u.canHaveHTML){c=u.previousSibling;if(c&&!c.hasChildNodes()&&i.isBlock(c)){c.innerHTML="﻿"}else{c=null}u.innerHTML="<span>﻿</span><span>﻿</span>";r.moveToElementText(u.lastChild);r.select();i.doc.selection.clear();u.innerHTML="";if(c){c.innerHTML=""}return}else{a=i.nodeIndex(u);u=u.parentNode}}if(a==l-1){try{v=u.childNodes[a];s=p.createControlRange();s.addElement(v);s.select();d=e.getRng();if(d.item&&v===d.item(0)){return}}catch(m){}}}n(true);n();r.select()};this.getRangeAt=n}tinymce.dom.TridentSelection=e})();(function(e){e.dom.Element=function(t,n){var r=this,i,s;r.settings=n=n||{};r.id=t;r.dom=i=n.dom||e.DOM;if(!e.isIE){s=i.get(r.id)}e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n=[t],s;for(s=0;s<arguments.length;s++){n.push(arguments[s])}n=i[e].apply(i,n);r.update(e);return n}});e.extend(r,{on:function(t,n,i){return e.dom.Event.add(r.id,t,n,i)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=i.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var s;if(e.isIE6&&n.blocker){t=t||"";if(t.indexOf("get")===0||t.indexOf("has")===0||t.indexOf("is")===0){return}if(t=="remove"){i.remove(r.blocker);return}if(!r.blocker){r.blocker=i.uniqueId();s=i.add(n.container||i.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});i.setStyle(s,"opacity",0)}else{s=i.get(r.blocker)}i.setStyles(s,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(e){function t(e){return e.replace(/[\n\r]+/g,"")}var n=e.is,r=e.isIE,i=e.each,s=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,r,s){var o=this;o.dom=t;o.win=n;o.serializer=r;o.editor=s;i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){o[t]=new e.util.Dispatcher(o)});if(!o.win.getSelection){o.tridentSel=new e.dom.TridentSelection(o)}if(e.isIE&&t.boxModel){this._fixIESelection()}e.addUnload(o.destroy,o)},setCursorLocation:function(e,t){var n=this;var r=n.dom.createRng();r.setStart(e,t);r.setEnd(e,t);n.setRng(r);n.collapse(false)},getContent:function(e){var t=this,r=t.getRng(),i=t.dom.create("body"),s=t.getSel(),o,u,a;e=e||{};o=u="";e.get=true;e.format=e.format||"html";e.forced_root_block="";t.onBeforeGetContent.dispatch(t,e);if(e.format=="text"){return t.isCollapsed()?"":r.text||(s.toString?s.toString():"")}if(r.cloneContents){a=r.cloneContents();if(a){i.appendChild(a)}}else{if(n(r.item)||n(r.htmlText)){i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText);i.removeChild(i.firstChild)}else{i.innerHTML=r.toString()}}if(/^\s/.test(i.innerHTML)){o=" "}if(/\s+$/.test(i.innerHTML)){u=" "}e.getInner=true;e.content=t.isCollapsed()?"":o+t.serializer.serialize(i,e)+u;t.onGetContent.dispatch(t,e);return e.content},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;t=t||{format:"html"};t.set=true;e=t.content=e;if(!t.no_events){n.onBeforeSetContent.dispatch(n,t)}e=t.content;if(r.insertNode){e+='<span id="__caret">_</span>';if(r.startContainer==s&&r.endContainer==s){s.body.innerHTML=e}else{r.deleteContents();if(s.body.childNodes.length===0){s.body.innerHTML=e}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(e))}else{o=s.createDocumentFragment();u=s.createElement("div");o.appendChild(u);u.outerHTML=e;r.insertNode(o)}}}i=n.dom.get("__caret");r=s.createRange();r.setStartBefore(i);r.setEndBefore(i);n.setRng(r);n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else{if(r.item){s.execCommand("Delete",false,null);r=n.getRng()}if(/^\s+/.test(e)){r.pasteHTML('<span id="__mce_tmp">_</span>'+e);n.dom.remove("__mce_tmp")}else{r.pasteHTML(e)}}if(!t.no_events){n.onSetContent.dispatch(n,t)}},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item){return t.item(0)}i=t.duplicate();i.collapse(1);n=i.parentElement();if(n.ownerDocument!==e.dom.doc){n=e.dom.getRoot()}r=s=t.parentElement();while(s=s.parentNode){if(s==n){n=r;break}}return n}else{n=t.startContainer;if(n.nodeType==1&&n.hasChildNodes()){n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]}if(n&&n.nodeType==3){return n.parentNode}return n}},getEnd:function(){var e=this,t=e.getRng(),n,r;if(t.duplicate||t.item){if(t.item){return t.item(0)}t=t.duplicate();t.collapse(0);n=t.parentElement();if(n.ownerDocument!==e.dom.doc){n=e.dom.getRoot()}if(n&&n.nodeName=="BODY"){return n.lastChild||n}return n}else{n=t.endContainer;r=t.endOffset;if(n.nodeType==1&&n.hasChildNodes()){n=n.childNodes[r>0?r-1:r]}if(n&&n.nodeType==3){return n.parentNode}return n}},getBookmark:function(e,t){function n(e,t){var n=0;i(u.select(e),function(e,r){if(e==t){n=r}});return n}function r(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"];r=e[s+"Offset"];if(n.nodeType==1&&n.nodeName=="TR"){i=n.childNodes;n=i[Math.min(t?r:r-1,i.length-1)];if(n){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}}}t(true);t();return e}function s(){function e(e,n){var i=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],u=[],a,f,l=0;if(i.nodeType==3){if(t){for(a=i.previousSibling;a&&a.nodeType==3;a=a.previousSibling){s+=a.nodeValue.length}}u.push(s)}else{f=i.childNodes;if(s>=f.length&&f.length){l=1;s=Math.max(0,f.length-1)}u.push(o.dom.nodeIndex(f[s],t)+l)}for(;i&&i!=r;i=i.parentNode){u.push(o.dom.nodeIndex(i,t))}return u}var n=o.getRng(true),r=u.getRoot(),i={};i.start=e(n,true);if(!o.isCollapsed()){i.end=e(n)}return i}var o=this,u=o.dom,a,f,l,c,h,p,d,v="﻿",m;if(e==2){if(o.tridentSel){return o.tridentSel.getBookmark(e)}return s()}if(e){return{rng:o.getRng()}}a=o.getRng();l=u.uniqueId();c=tinyMCE.activeEditor.selection.isCollapsed();m="overflow:hidden;line-height:0px";if(a.duplicate||a.item){if(!a.item){f=a.duplicate();try{a.collapse();a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+m+'">'+v+"</span>");if(!c){f.collapse(false);a.moveToElementText(f.parentElement());if(a.compareEndPoints("StartToEnd",f)===0){f.move("character",-1)}f.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+m+'">'+v+"</span>")}}catch(g){return null}}else{p=a.item(0);h=p.nodeName;return{name:h,index:n(h,p)}}}else{p=o.getNode();h=p.nodeName;if(h=="IMG"){return{name:h,index:n(h,p)}}f=r(a.cloneRange());if(!c){f.collapse(false);f.insertNode(u.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:m},v))}a=r(a);a.collapse(true);a.insertNode(u.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:m},v))}o.moveToBookmark({id:l,keep:1});return{id:l}},moveToBookmark:function(t){function n(e){var n=t[e?"start":"end"],r,i,s,o;if(n){s=n[0];for(i=h,r=n.length-1;r>=1;r--){o=i.childNodes;if(n[r]>o.length-1){return}i=o[n[r]]}if(i.nodeType===3){s=Math.min(n[0],i.nodeValue.length)}if(i.nodeType===1){s=Math.min(n[0],i.childNodes.length)}if(e){c.setStart(i,s)}else{c.setEnd(i,s)}}return true}function s(n){var r=a.get(t.id+"_"+n),s,o,u,f,l=t.keep;if(r){s=r.parentNode;if(n=="start"){if(!l){o=a.nodeIndex(r)}else{s=r.firstChild;o=1}p=d=s;v=m=o}else{if(!l){o=a.nodeIndex(r)}else{s=r.firstChild;o=1}d=s;m=o}if(!l){f=r.previousSibling;u=r.nextSibling;i(e.grep(r.childNodes),function(e){if(e.nodeType==3){e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")}});while(r=a.get(t.id+"_"+n)){a.remove(r,1)}if(f&&u&&f.nodeType==u.nodeType&&f.nodeType==3&&!e.isOpera){o=f.nodeValue.length;f.appendData(u.nodeValue);a.remove(u);if(n=="start"){p=d=f;v=m=o}else{d=f;m=o}}}}}function o(e){if(a.isBlock(e)&&!e.innerHTML&&!r){e.innerHTML='<br data-mce-bogus="1" />'}return e}var u=this,a=u.dom,f,l,c,h,p,d,v,m;if(t){if(t.start){c=a.createRng();h=a.getRoot();if(u.tridentSel){return u.tridentSel.moveToBookmark(t)}if(n(true)&&n()){u.setRng(c)}}else{if(t.id){s("start");s("end");if(p){c=a.createRng();c.setStart(o(p),v);c.setEnd(o(d),m);u.setRng(c)}}else{if(t.name){u.select(a.select(t.name)[t.index])}else{if(t.rng){u.setRng(t.rng)}}}}}},select:function(t,n){function r(t,n){var r=new s(t,t);do{if(t.nodeType==3&&e.trim(t.nodeValue).length!==0){if(n){u.setStart(t,0)}else{u.setEnd(t,t.nodeValue.length)}return}if(t.nodeName=="BR"){if(n){u.setStartBefore(t)}else{u.setEndBefore(t)}return}}while(t=n?r.next():r.prev())}var i=this,o=i.dom,u=o.createRng(),a;if(t){a=o.nodeIndex(t);u.setStart(t.parentNode,a);u.setEnd(t.parentNode,a+1);if(n){r(t,1);r(t)}i.setRng(u)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();if(!t||t.item){return false}if(t.compareEndPoints){return t.compareEndPoints("StartToEnd",t)===0}return!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;if(n.item){r=n.item(0);n=t.win.document.body.createTextRange();n.moveToElementText(r)}n.collapse(!!e);t.setRng(n)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n=this,r,i,s,o=n.win.document;if(t&&n.tridentSel){return n.tridentSel.getRangeAt(0)}try{if(r=n.getSel()){i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():o.createRange()}}catch(u){}if(e.isIE&&i&&i.setStart&&o.selection.createRange().item){s=o.selection.createRange().item(0);i=o.createRange();i.setStartBefore(s);i.setEndAfter(s)}if(!i){i=o.createRange?o.createRange():o.body.createTextRange()}if(i.setStart&&i.startContainer.nodeType===9&&i.collapsed){s=n.dom.getRoot();i.setStart(s,0);i.setEnd(s,0)}if(n.selectedRange&&n.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,n.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,n.selectedRange)===0){i=n.explicitRange}else{n.selectedRange=null;n.explicitRange=null}}return i},setRng:function(e,t){var n,r=this;if(!r.tridentSel){n=r.getSel();if(n){r.explicitRange=e;try{n.removeAllRanges()}catch(i){}n.addRange(e);if(t===false&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}r.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}}else{if(e.cloneRange){try{r.tridentSel.addRange(e);return}catch(i){}}try{e.select()}catch(i){}}},setNode:function(e){var t=this;t.setContent(t.dom.getOuterHTML(e));return e},getNode:function(){function e(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n}var t=this,n=t.getRng(),r=t.getSel(),i,s=n.startContainer,o=n.endContainer;if(!n){return t.dom.getRoot()}if(n.setStart){i=n.commonAncestorContainer;if(!n.collapsed){if(n.startContainer==n.endContainer){if(n.endOffset-n.startOffset<2){if(n.startContainer.hasChildNodes()){i=n.startContainer.childNodes[n.startOffset]}}}if(s.nodeType===3&&o.nodeType===3){if(s.length===n.startOffset){s=e(s.nextSibling,true)}else{s=s.parentNode}if(n.endOffset===0){o=e(o.previousSibling,false)}else{o=o.parentNode}if(s&&s===o){return s}}}if(i&&i.nodeType==3){return i.parentNode}return i}return n.item?n.item(0):n.parentElement()},getSelectedBlocks:function(e,t){var n=this,r=n.dom,i,o,u,a=[];i=r.getParent(e||n.getStart(),r.isBlock);o=r.getParent(t||n.getEnd(),r.isBlock);if(i){a.push(i)}if(i&&o&&i!=o){u=i;var f=new s(i,r.getRoot());while((u=f.next())&&u!=o){if(r.isBlock(u)){a.push(u)}}}if(o&&i!=o){a.push(o)}return a},isForward:function(){var e=this.dom,t=this.getSel(),n,r;if(!t||t.anchorNode==null||t.focusNode==null){return true}n=e.createRng();n.setStart(t.anchorNode,t.anchorOffset);n.collapse(true);r=e.createRng();r.setStart(t.focusNode,t.focusOffset);r.collapse(true);return n.compareBoundaryPoints(n.START_TO_START,r)<=0},normalize:function(){function t(e){function t(e,t){var n=new s(e,c.getParent(e.parentNode,c.isBlock)||h);while(e=n[t?"prev":"next"]()){if(e.nodeName==="BR"){return true}}}function u(e,t){var n,r;t=t||a;n=new s(t,c.getParent(t.parentNode,c.isBlock)||h);while(p=n[e?"prev":"next"]()){if(p.nodeType===3&&p.nodeValue.length>0){a=p;f=e?p.nodeValue.length:0;i=true;return}if(c.isBlock(p)||d[p.nodeName.toLowerCase()]){return}r=p}if(o&&r){a=r;i=true;f=0}}var a,f,l,c=n.dom,h=c.getRoot(),p,d,v;a=r[(e?"start":"end")+"Container"];f=r[(e?"start":"end")+"Offset"];d=c.schema.getNonEmptyElements();if(a.nodeType===9){a=c.getRoot();f=0}if(a===h){if(e){p=a.childNodes[f>0?f-1:0];if(p){v=p.nodeName.toLowerCase();if(d[p.nodeName]||p.nodeName=="TABLE"){return}}}if(a.hasChildNodes()){a=a.childNodes[Math.min(!e&&f>0?f-1:f,a.childNodes.length-1)];f=0;if(a.hasChildNodes()&&!/TABLE/.test(a.nodeName)){p=a;l=new s(a,h);do{if(p.nodeType===3&&p.nodeValue.length>0){f=e?0:p.nodeValue.length;a=p;i=true;break}if(d[p.nodeName.toLowerCase()]){f=c.nodeIndex(p);a=p.parentNode;if(p.nodeName=="IMG"&&!e){f++}i=true;break}}while(p=e?l.next():l.prev())}}}if(o){if(a.nodeType===3&&f===0){u(true)}if(a.nodeType===1){p=a.childNodes[f];if(p&&p.nodeName==="BR"&&!t(p)&&!t(p,true)){u(true,a.childNodes[f])}}}if(e&&!o&&a.nodeType===3&&f===a.nodeValue.length){u(false)}if(i){r["set"+(e?"Start":"End")](a,f)}}var n=this,r,i,o,u,a;if(e.isIE){return}r=n.getRng();o=r.collapsed;t(true);if(!o){t()}if(i){if(o){r.collapse(true)}n.setRng(r,n.isForward())}},selectorChanged:function(e,t){var n=this,r;if(!n.selectorChangedData){n.selectorChangedData={};r={};n.editor.onNodeChange.addToTop(function(e,t,s){var o=n.dom,u=o.getParents(s,null,o.getRoot()),a={};i(n.selectorChangedData,function(e,t){i(u,function(n){if(o.is(n,t)){if(!r[t]){i(e,function(e){e(true,{node:n,selector:t,parents:u})});r[t]=e}a[t]=e;return false}})});i(r,function(e,t){if(!a[t]){delete r[t];i(e,function(e){e(false,{node:s,selector:t,parents:u})})}})})}if(!n.selectorChangedData[e]){n.selectorChangedData[e]=[]}n.selectorChangedData[e].push(t);return n},scrollIntoView:function(e){var t,n,r=this,i=r.dom;n=i.getViewPort(r.editor.getWin());t=i.getPos(e).y;if(t<n.y||t+25>n.y+n.h){r.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)}},destroy:function(t){var n=this;n.win=null;if(!t){e.removeUnload(n.destroy)}},_fixIESelection:function(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;if(t.button){r=e(t.x,t.y);if(r){if(r.compareEndPoints("StartToStart",u)>0){r.setEndPoint("StartToStart",u)}else{r.setEndPoint("EndToEnd",u)}r.select()}}else{n()}}function n(){var e=i.selection.createRange();if(u&&!e.item&&e.compareEndPoints("StartToEnd",e)===0){u.select()}r.unbind(i,"mouseup",n);r.unbind(i,"mousemove",t);u=o=0}var r=this.dom,i=r.doc,s=i.body,o,u,a;i.documentElement.unselectable=true;r.bind(i,["mousedown","contextmenu"],function(s){if(s.target.nodeName==="HTML"){if(o){n()}a=i.documentElement;if(a.scrollHeight>a.clientHeight){return}o=1;u=e(s.x,s.y);if(u){r.bind(i,"mouseup",n);r.bind(i,"mousemove",t);r.win.focus();u.select()}}})}})})(tinymce);(function(e){e.dom.Serializer=function(t,n,r){var i,s,o=e.isIE,u=e.each,a;if(!t.apply_source_formatting){t.indent=false}n=n||e.DOM;r=r||new e.html.Schema(t);t.entity_encoding=t.entity_encoding||"named";t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:true;i=new e.util.Dispatcher(self);s=new e.util.Dispatcher(self);a=new e.html.DomParser(t,r);a.addAttributeFilter("src,href,style",function(e,r){var i=e.length,s,o,u="data-mce-"+r,a=t.url_converter,f=t.url_converter_scope,l;while(i--){s=e[i];o=s.attributes.map[u];if(o!==l){s.attr(r,o.length>0?o:null);s.attr(u,null)}else{o=s.attributes.map[r];if(r==="style"){o=n.serializeStyle(n.parseStyle(o),s.name)}else{if(a){o=a.call(f,o,r,s.name)}}s.attr(r,o.length>0?o:null)}}});a.addAttributeFilter("class",function(e,t){var n=e.length,r,i;while(n--){r=e[n];i=r.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,"");r.attr("class",i.length>0?i:null)}});a.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--){i=e[r];if(i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){i.remove()}}});a.addAttributeFilter("data-mce-expando",function(e,t,n){var r=e.length;while(r--){e[r].attr(t,null)}});a.addNodeFilter("noscript",function(t){var n=t.length,r;while(n--){r=t[n].firstChild;if(r){r.value=e.html.Entities.decode(r.value)}}});a.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var r=e.length,i,s;while(r--){i=e[r];s=i.firstChild?i.firstChild.value:"";if(t==="script"){i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,""));if(s.length>0){i.firstChild.value="// <![CDATA[\n"+n(s)+"\n// ]]>"}}else{if(s.length>0){i.firstChild.value="<!--\n"+n(s)+"\n-->"}}}});a.addNodeFilter("#comment",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.value.indexOf("[CDATA[")===0){r.name="#cdata";r.type=4;r.value=r.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(r.value.indexOf("mce:protected ")===0){r.name="#text";r.type=3;r.raw=true;r.value=unescape(r.value).substr(14)}}}});a.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.type===7){r.remove()}else{if(r.type===1){if(t==="input"&&!("type"in r.attributes.map)){r.attr("type","text")}}}}});if(t.fix_list_elements){a.addNodeFilter("ul,ol",function(e,t){var n=e.length,r,i;while(n--){r=e[n];i=r.parent;if(i.name==="ul"||i.name==="ol"){if(r.prev&&r.prev.name==="li"){r.prev.append(r)}}}})}a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}});return{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:i,onPostProcess:s,serialize:function(l,c){var h,p,d,v,m;if(o&&n.select("script,style,select,map").length>0){m=l.innerHTML;l=l.cloneNode(false);n.setHTML(l,m)}else{l=l.cloneNode(true)}h=l.ownerDocument.implementation;if(h.createHTMLDocument){p=h.createHTMLDocument("");u(l.nodeName=="BODY"?l.childNodes:[l],function(e){p.body.appendChild(p.importNode(e,true))});if(l.nodeName!="BODY"){l=p.body.firstChild}else{l=p.body}d=n.doc;n.doc=p}c=c||{};c.format=c.format||"html";if(!c.no_events){c.node=l;i.dispatch(self,c)}v=new e.html.Serializer(t,r);c.content=v.serialize(a.parse(e.trim(c.getInner?l.innerHTML:n.getOuterHTML(l)),c));if(!c.cleanup){c.content=c.content.replace(/\uFEFF/g,"")}if(!c.no_events){s.dispatch(self,c)}if(d){n.doc=d}c.node=null;return c.content},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)}}}})(tinymce);(function(e){e.dom.ScriptLoader=function(t){function n(t,n){function r(){o.remove(l);if(u){u.onreadystatechange=u.onload=u=null}n()}function i(){if(typeof console!=="undefined"&&console.log){console.log("Failed to load: "+t)}}var s=this,o=e.DOM,u,a,f,l;l=o.uniqueId();if(e.isIE6){a=new e.util.URI(t);f=location;if(a.host==f.hostname&&a.port==f.port&&a.protocol+":"==f.protocol&&a.protocol.toLowerCase()!="file"){e.util.XHR.send({url:e._addVer(a.getURI()),success:function(e){var t=o.create("script",{type:"text/javascript"});t.text=e;document.getElementsByTagName("head")[0].appendChild(t);o.remove(t);r()},error:i});return}}u=document.createElement("script");u.id=l;u.type="text/javascript";u.src=e._addVer(t);if(!e.isIE){u.onload=r}u.onerror=i;if(!e.isOpera){u.onreadystatechange=function(){var e=u.readyState;if(e=="complete"||e=="loaded"){r()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(u)}var r=0,i=1,s=2,o={},u=[],a={},f=[],l=0,c;this.isDone=function(e){return o[e]==s};this.markDone=function(e){o[e]=s};this.add=this.load=function(e,t,n){var i,s=o[e];if(s==c){u.push(e);o[e]=r}if(t){if(!a[e]){a[e]=[]}a[e].push({func:t,scope:n||this})}};this.loadQueue=function(e,t){this.loadScripts(u,e,t)};this.loadScripts=function(t,r,u){function p(t){e.each(a[t],function(e){e.func.call(e.scope)});a[t]=c}var d;f.push({func:r,scope:u||this});d=function(){var r=e.grep(t);t.length=0;e.each(r,function(e){if(o[e]==s){p(e);return}if(o[e]!=i){o[e]=i;l++;n(e,function(){o[e]=s;l--;p(e);d()})}});if(!l){e.each(f,function(e){e.func.call(e.scope)});f.length=0}};d()}};e.ScriptLoader=new e.dom.ScriptLoader})(tinymce);(function(e){e.dom.RangeUtils=function(t){var n="﻿";this.walk=function(n,r){function i(e){var t;t=e[0];if(t.nodeType===3&&t===a&&f>=t.nodeValue.length){e.splice(0,1)}t=e[e.length-1];if(c===0&&e.length>0&&t===l&&t.nodeType===3){e.splice(e.length-1,1)}return e}function s(e,t,n){var r=[];for(;e&&e!=n;e=e[t]){r.push(e)}return r}function o(e,t){do{if(e.parentNode==t){return e}e=e.parentNode}while(e)}function u(e,t,n){var o=n?"nextSibling":"previousSibling";for(v=e,m=v.parentNode;v&&v!=t;v=m){m=v.parentNode;g=s(v==e?v:v[o],o);if(g.length){if(!n){g.reverse()}r(i(g))}}}var a=n.startContainer,f=n.startOffset,l=n.endContainer,c=n.endOffset,h,p,d,v,m,g,y;y=t.select("td.mceSelected,th.mceSelected");if(y.length>0){e.each(y,function(e){r([e])});return}if(a.nodeType==1&&a.hasChildNodes()){a=a.childNodes[f]}if(l.nodeType==1&&l.hasChildNodes()){l=l.childNodes[Math.min(c-1,l.childNodes.length-1)]}if(a==l){return r(i([a]))}h=t.findCommonAncestor(a,l);for(v=a;v;v=v.parentNode){if(v===l){return u(a,h,true)}if(v===h){break}}for(v=l;v;v=v.parentNode){if(v===a){return u(l,h)}if(v===h){break}}p=o(a,h)||a;d=o(l,h)||l;u(a,p,true);g=s(p==a?p:p.nextSibling,"nextSibling",d==l?d.nextSibling:d);if(g.length){r(i(g))}u(l,d)};this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset;if(n==i&&n.nodeType==3){if(r>0&&r<n.nodeValue.length){i=t(n,r);n=i.previousSibling;if(s>r){s=s-r;n=i=t(i,s).previousSibling;s=i.nodeValue.length;r=0}else{s=0}}}else{if(n.nodeType==3&&r>0&&r<n.nodeValue.length){n=t(n,r);r=0}if(i.nodeType==3&&s>0&&s<i.nodeValue.length){i=t(i,s).previousSibling;s=i.nodeValue.length}}return{startContainer:n,startOffset:r,endContainer:i,endOffset:s}}};e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(e.item||e.duplicate){if(e.item&&t.item&&e.item(0)===t.item(0)){return true}if(e.isEqual&&t.isEqual&&t.isEqual(e)){return true}}else{return e.startContainer==t.startContainer&&e.startOffset==t.startOffset}}return false}})(tinymce);(function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(r,i){var s=this,o=r.root,u=r.items,a=r.enableUpDown,f=r.enableLeftRight||!r.enableUpDown,l=r.excludeFromTabOrder,c,h,p,d,v;i=i||e.DOM;c=function(e){v=e.target.id};h=function(e){i.setAttrib(e.target.id,"tabindex","-1")};d=function(e){var t=i.get(v);i.setAttrib(t,"tabindex","0");t.focus()};s.focus=function(){i.get(v).focus()};s.destroy=function(){n(u,function(e){var t=i.get(e.id);i.unbind(t,"focus",c);i.unbind(t,"blur",h)});var e=i.get(o);i.unbind(e,"focus",d);i.unbind(e,"keydown",p);u=i=o=s.focus=c=h=p=d=null;s.destroy=function(){}};s.moveFocus=function(e,o){var a=-1,f=s.controls,l;if(!v){return}n(u,function(e,t){if(e.id===v){a=t;return false}});a+=e;if(a<0){a=u.length-1}else{if(a>=u.length){a=0}}l=u[a];i.setAttrib(v,"tabindex","-1");i.setAttrib(l.id,"tabindex","0");i.get(l.id).focus();if(r.actOnFocus){r.onAction(l.id)}if(o){t.cancel(o)}};p=function(e){var n=37,i=39,o=38,u=40,l=27,c=14,h=13,p=32;switch(e.keyCode){case n:if(f){s.moveFocus(-1)}break;case i:if(f){s.moveFocus(1)}break;case o:if(a){s.moveFocus(-1)}break;case u:if(a){s.moveFocus(1)}break;case l:if(r.onCancel){r.onCancel();t.cancel(e)}break;case c:case h:case p:if(r.onAction){r.onAction(v);t.cancel(e)}break}};n(u,function(e,t){var n,r;if(!e.id){e.id=i.uniqueId("_mce_item_")}r=i.get(e.id);if(l){i.bind(r,"blur",h);n="-1"}else{n=t===0?"0":"-1"}r.setAttribute("tabindex",n);i.bind(r,"focus",c)});if(u[0]){v=u[0].id}i.setAttrib(o,"tabindex","-1");var m=i.get(o);i.bind(m,"focus",d);i.bind(m,"keydown",p)}})})(tinymce);(function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,r){this.id=t;this.settings=n=n||{};this.rendered=false;this.onRender=new e.util.Dispatcher(this);this.classPrefix="";this.scope=n.scope||this;this.disabled=0;this.active=0;this.editor=r},setAriaProperty:function(e,n){var r=t.get(this.id+"_aria")||t.get(this.id);if(r){t.setAttrib(r,"aria-"+e,!!n)}},focus:function(){t.get(this.id).focus()},setDisabled:function(e){if(e!=this.disabled){this.setAriaProperty("disabled",e);this.setState("Disabled",e);this.setState("Enabled",!e);this.disabled=e}},isDisabled:function(){return this.disabled},setActive:function(e){if(e!=this.active){this.setState("Active",e);this.active=e;this.setAriaProperty("pressed",e)}},isActive:function(){return this.active},setState:function(e,n){var r=t.get(this.id);e=this.classPrefix+e;if(n){t.addClass(r,e)}else{t.removeClass(r,e)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e=this,t;if(n(e.disabled)){t=e.disabled;e.disabled=-1;e.setDisabled(t)}if(n(e.active)){t=e.active;e.active=-1;e.setActive(t)}},remove:function(){t.remove(this.id);this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n);this.controls=[];this.lookup={}},add:function(e){this.lookup[e.id]=e;this.controls.push(e);return e},get:function(e){return this.lookup[e]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t);this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e);this.setAriaProperty("checked",!!e);this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent();if(t(e.selected)){e.setSelected(e.selected)}}})})(tinymce);(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var r=this;r.parent(t,n);r.items={};r.collapsed=false;r.menuCount=0;r.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;if(e){i(t,function(e){if(e.expand){e.expand()}},"items",t)}t.collapsed=false},collapse:function(e){var t=this;if(e){i(t,function(e){if(e.collapse){e.collapse()}},"items",t)}t.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(t){if(!t.settings){t=new e.ui.MenuItem(t.id||n.uniqueId(),t)}this.onAddItem.dispatch(this,t);return this.items[t.id]=t},addSeparator:function(){return this.add({separator:true})},addMenu:function(e){if(!e.collapse){e=this.createMenu(e)}this.menuCount++;return this.add(e)},hasMenus:function(){return this.menuCount!==0},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){if(e.removeAll){e.removeAll()}else{e.remove()}e.destroy()},"items",e);e.items={}},createMenu:function(t){var r=new e.ui.Menu(t.id||n.uniqueId(),t);r.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return r}})})(tinymce);(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.dom.Event,s=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(r,i){i=i||{};i.container=i.container||n.doc.body;i.offset_x=i.offset_x||0;i.offset_y=i.offset_y||0;i.vp_offset_x=i.vp_offset_x||0;i.vp_offset_y=i.vp_offset_y||0;if(t(i.icons)&&!i.icons){i["class"]+=" mceNoIcons"}this.parent(r,i);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(t){var r=this,i=r.settings,s;t.container=t.container||i.container;t.parent=r;t.constrain=t.constrain||i.constrain;t["class"]=t["class"]||i["class"];t.vp_offset_x=t.vp_offset_x||i.vp_offset_x;t.vp_offset_y=t.vp_offset_y||i.vp_offset_y;t.keyboard_focus=i.keyboard_focus;s=new e.ui.DropMenu(t.id||n.uniqueId(),t);s.onAddItem.add(r.onAddItem.dispatch,r.onAddItem);return s},focus:function(){var e=this;if(e.keyboardNav){e.keyboardNav.focus()}},update:function(){var e=this,t=e.settings,r=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),s,o;s=t.max_width?Math.min(r.offsetWidth,t.max_width):r.offsetWidth;o=t.max_height?Math.min(r.offsetHeight,t.max_height):r.offsetHeight;if(!n.boxModel){e.element.setStyles({width:s+2,height:o+2})}else{e.element.setStyles({width:s,height:o})}if(t.max_width){n.setStyle(i,"width",s)}if(t.max_height){n.setStyle(i,"height",o);if(r.clientHeight<t.max_height){n.setStyle(i,"overflow","hidden")}}},showMenu:function(t,o,u){var a=this,f=a.settings,l,c=n.getViewPort(),h,p,d,v,m=2,g,y,b=a.classPrefix;a.collapse(1);if(a.isMenuVisible){return}l=n.add(a.settings.container,a.renderNode());r(a.items,function(e){e.postRender()});a.element=new s("menu_"+a.id,{blocker:1,container:f.container});if(!e.isOpera){n.setStyles(l,{left:-65535,top:-65535})}n.show(l);a.update();t+=f.offset_x||0;o+=f.offset_y||0;c.w-=4;c.h-=4;if(f.constrain){h=l.clientWidth-m;p=l.clientHeight-m;d=c.x+c.w;v=c.y+c.h;if(t+f.vp_offset_x+h>d){t=u?u-h:Math.max(0,d-f.vp_offset_x-h)}if(o+f.vp_offset_y+p>v){o=Math.max(0,v-f.vp_offset_y-p)}}n.setStyles(l,{left:t,top:o});a.element.update();a.isMenuVisible=1;a.mouseClickFunc=i.add(l,"click",function(e){var t;e=e.target;if(e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,b+"ItemSub")){t=a.items[e.id];if(t.isDisabled()){return}g=a;while(g){if(g.hideMenu){g.hideMenu()}g=g.settings.parent}if(t.settings.onclick){t.settings.onclick(e)}return false}});if(a.hasMenus()){a.mouseOverFunc=i.add(l,"mouseover",function(e){var t,r,i;e=e.target;if(e&&(e=n.getParent(e,"tr"))){t=a.items[e.id];if(a.lastMenu){a.lastMenu.collapse(1)}if(t.isDisabled()){return}if(e&&n.hasClass(e,b+"ItemSub")){r=n.getRect(e);t.showMenu(r.x+r.w-m,r.y-m,r.x);a.lastMenu=t;n.addClass(n.get(t.id).firstChild,b+"ItemActive")}}})}i.add(l,"keydown",a._keyHandler,a);a.onShowMenu.dispatch(a);if(f.keyboard_focus){a._setupKeyboardNav()}},hideMenu:function(e){var t=this,r=n.get("menu_"+t.id),s;if(!t.isMenuVisible){return}if(t.keyboardNav){t.keyboardNav.destroy()}i.remove(r,"mouseover",t.mouseOverFunc);i.remove(r,"click",t.mouseClickFunc);i.remove(r,"keydown",t._keyHandler);n.remove(r);t.isMenuVisible=0;if(!e){t.collapse(1)}if(t.element){t.element.hide()}if(s=n.get(t.id)){n.removeClass(s.firstChild,t.classPrefix+"ItemActive")}t.onHideMenu.dispatch(t)},add:function(e){var t=this,r;e=t.parent(e);if(t.isRendered&&(r=n.get("menu_"+t.id))){t._add(n.select("tbody",r)[0],e)}return e},collapse:function(e){this.parent(e);this.hideMenu(1)},remove:function(e){n.remove(e.id);this.destroy();return this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);if(e.keyboardNav){e.keyboardNav.destroy()}i.remove(t,"mouseover",e.mouseOverFunc);i.remove(n.select("a",t),"focus",e.mouseOverFunc);i.remove(t,"click",e.mouseClickFunc);i.remove(t,"keydown",e._keyHandler);if(e.element){e.element.remove()}n.remove(t)},renderNode:function(){var e=this,t=e.settings,i,o,u,a;a=n.create("div",{role:"listbox",id:"menu_"+e.id,"class":t["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(e.settings.parent){n.setAttrib(a,"aria-parent","menu_"+e.settings.parent.id)}u=n.add(a,"div",{role:"presentation",id:"menu_"+e.id+"_co","class":e.classPrefix+(t["class"]?" "+t["class"]:"")});e.element=new s("menu_"+e.id,{blocker:1,container:t.container});if(t.menu_line){n.add(u,"span",{"class":e.classPrefix+"Line"})}i=n.add(u,"table",{role:"presentation",id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});o=n.add(i,"tbody");r(e.items,function(t){e._add(o,t)});e.rendered=true;return a},_setupKeyboardNav:function(){var t,r,i=this;t=n.get("menu_"+i.id);r=n.select("a[role=option]","menu_"+i.id);r.splice(0,0,t);i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:r,onCancel:function(){i.hideMenu()},enableUpDown:true});t.focus()},_keyHandler:function(e){var t=this,n;switch(e.keyCode){case 37:if(t.settings.parent){t.hideMenu();t.settings.parent.focus();i.cancel(e)}break;case 39:if(t.mouseOverFunc){t.mouseOverFunc(e)}break}},_add:function(e,t){var r,i=t.settings,s,o,u,a=this.classPrefix,f;if(i.separator){o=n.add(e,"tr",{id:t.id,"class":a+"ItemSeparator"});n.add(o,"td",{"class":a+"ItemSeparator"});if(r=o.previousSibling){n.addClass(r,"mceLast")}return}r=o=n.add(e,"tr",{id:t.id,"class":a+"Item "+a+"ItemEnabled"});r=u=n.add(r,i.titleItem?"th":"td");r=s=n.add(r,"a",{id:t.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(i.parent){n.setAttrib(s,"aria-haspopup","true");n.setAttrib(s,"aria-owns","menu_"+t.id)}n.addClass(u,i["class"]);f=n.add(r,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")});if(i.icon_src){n.add(f,"img",{src:i.icon_src})}r=n.add(r,i.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title);if(t.settings.style){if(typeof t.settings.style=="function"){t.settings.style=t.settings.style()}n.setAttrib(r,"style",t.settings.style)}if(e.childNodes.length==1){n.addClass(o,"mceFirst")}if((r=o.previousSibling)&&n.hasClass(r,a+"ItemSeparator")){n.addClass(o,"mceFirst")}if(t.collapse){n.addClass(o,a+"ItemSub")}if(r=o.previousSibling){n.removeClass(r,"mceLast")}n.addClass(o,"mceLast")}})})(tinymce);(function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n);this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,r,i;i=t.encode(n.label||"");r='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(i?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">';if(n.image&&!(this.editor&&this.editor.forcedHighContrastMode)){r+='<span class="mceIcon '+n["class"]+'"><img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" /></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":"")}else{r+='<span class="mceIcon '+n["class"]+'"></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":"")}r+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>";r+="</a>";return r},postRender:function(){var t=this,n=t.settings,r;if(e.isIE&&t.editor){e.dom.Event.add(t.id,"mousedown",function(e){var n=t.editor.selection.getNode().nodeName;r=n==="IMG"?t.editor.selection.getBookmark():null})}e.dom.Event.add(t.id,"click",function(i){if(!t.isDisabled()){if(e.isIE&&t.editor&&r!==null){t.editor.selection.moveToBookmark(r)}return n.onclick.call(n.scope,i)}});e.dom.Event.add(t.id,"keyup",function(r){if(!t.isDisabled()&&r.keyCode==e.VK.SPACEBAR){return n.onclick.call(n.scope,r)}})}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,r){var s=this;s.parent(t,n,r);s.items=[];s.onChange=new i(s);s.onPostRender=new i(s);s.onAdd=new i(s);s.onRenderMenu=new e.util.Dispatcher(this);s.classPrefix="mceListBox";s.marked={}},select:function(e){var t=this,n,i;t.marked={};if(e==s){return t.selectByIndex(-1)}if(e&&typeof e=="function"){i=e}else{i=function(t){return t==e}}if(e!=t.selectedValue){r(t.items,function(e,r){if(i(e.value)){n=1;t.selectByIndex(r);return false}});if(!n){t.selectByIndex(-1)}}},selectByIndex:function(e){var n=this,r,i,s;n.marked={};if(e!=n.selectedIndex){r=t.get(n.id+"_text");s=t.get(n.id+"_voiceDesc");i=n.items[e];if(i){n.selectedValue=i.value;n.selectedIndex=e;t.setHTML(r,t.encode(i.title));t.setHTML(s,n.settings.title+" - "+i.title);t.removeClass(r,"mceTitle");t.setAttrib(n.id,"aria-valuenow",i.title)}else{t.setHTML(r,t.encode(n.settings.title));t.setHTML(s,t.encode(n.settings.title));t.addClass(r,"mceTitle");n.selectedValue=n.selectedIndex=null;t.setAttrib(n.id,"aria-valuenow",n.settings.title)}r=0}},mark:function(e){this.marked[e]=true},add:function(t,n,r){var i=this;r=r||{};r=e.extend(r,{title:t,value:n});i.items.push(r);i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,r=n.settings,i=n.classPrefix;e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(r["class"]?" "+r["class"]:"")+'"><tbody><tr>';e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title);e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>";e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>";e+="</tr></tbody></table></span>";return e},showMenu:function(){var i=this,s,o=t.get(this.id),u;if(i.isDisabled()||i.items.length===0){return}if(i.menu&&i.menu.isMenuVisible){return i.hideMenu()}if(!i.isMenuRendered){i.renderMenu();i.isMenuRendered=true}s=t.getPos(o);u=i.menu;u.settings.offset_x=s.x;u.settings.offset_y=s.y;u.settings.keyboard_focus=!e.isOpera;r(i.items,function(e){if(u.items[e.id]){u.items[e.id].setSelected(0)}});r(i.items,function(e){if(u.items[e.id]&&i.marked[e.value]){u.items[e.id].setSelected(1)}if(e.value===i.selectedValue){u.items[e.id].setSelected(1)}});u.showMenu(0,o.clientHeight);n.add(t.doc,"mousedown",i.hideMenu,i);t.addClass(i.id,i.classPrefix+"Selected")},hideMenu:function(e){var r=this;if(r.menu&&r.menu.isMenuVisible){t.removeClass(r.id,r.classPrefix+"Selected");if(e&&e.type=="mousedown"&&(e.target.id==r.id+"_text"||e.target.id==r.id+"_open")){return}if(!e||!t.getParent(e.target,".mceMenu")){t.removeClass(r.id,r.classPrefix+"Selected");n.remove(t.doc,"mousedown",r.hideMenu,r);r.menu.hideMenu()}}},renderMenu:function(){var e=this,n;n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150});n.onHideMenu.add(function(){e.hideMenu();e.focus()});n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(e.settings.onselect("")!==false){e.select("")}}});r(e.items,function(r){if(r.value===s){n.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(e.settings.onselect("")!==false){e.select("")}}})}else{r.id=t.uniqueId();r.role="option";r.onclick=function(){if(e.settings.onselect(r.value)!==false){e.select(r.value)}};n.add(r)}});e.onRenderMenu.dispatch(e,n);e.menu=n},postRender:function(){var r=this,i=r.classPrefix;n.add(r.id,"click",r.showMenu,r);n.add(r.id,"keydown",function(e){if(e.keyCode==32){r.showMenu(e);n.cancel(e)}});n.add(r.id,"focus",function(){if(!r._focused){r.keyDownHandler=n.add(r.id,"keydown",function(e){if(e.keyCode==40){r.showMenu();n.cancel(e)}});r.keyPressHandler=n.add(r.id,"keypress",function(e){var t;if(e.keyCode==13){t=r.selectedValue;r.selectedValue=null;n.cancel(e);r.settings.onselect(t)}})}r._focused=1});n.add(r.id,"blur",function(){n.remove(r.id,"keydown",r.keyDownHandler);n.remove(r.id,"keypress",r.keyPressHandler);r._focused=0});if(e.isIE6||!t.boxModel){n.add(r.id,"mouseover",function(){if(!t.hasClass(r.id,i+"Disabled")){t.addClass(r.id,i+"Hover")}});n.add(r.id,"mouseout",function(){if(!t.hasClass(r.id,i+"Disabled")){t.removeClass(r.id,i+"Hover")}})}r.onPostRender.dispatch(r,t.get(r.id))},destroy:function(){this.parent();n.clear(this.id+"_text");n.clear(this.id+"_open")}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t);this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e;this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t=this,n,i;if(e==s){return t.selectByIndex(-1)}if(e&&typeof e=="function"){i=e}else{i=function(t){return t==e}}if(e!=t.selectedValue){r(t.items,function(e,r){if(i(e.value)){n=1;t.selectByIndex(r);return false}});if(!n){t.selectByIndex(-1)}}},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1;this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,r){var i,s=this;r=r||{};r.value=n;if(s.isRendered()){t.add(t.get(this.id),"option",r,e)}i={title:e,value:n,attribs:r};s.items.push(i);s.onAdd.dispatch(s,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --");r(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)});e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox","aria-labelledby":n.id+"_aria"},e);e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title);return e},postRender:function(){function r(e){var t=i.items[e.target.selectedIndex-1];if(t&&(t=t.value)){i.onChange.dispatch(i,t);if(i.settings.onselect){i.settings.onselect(t)}}}var i=this,s,o=true;i.rendered=true;n.add(i.id,"change",r);n.add(i.id,"keydown",function(t){var u;n.remove(i.id,"change",s);o=false;u=n.add(i.id,"blur",function(){if(o){return}o=true;n.add(i.id,"change",r);n.remove(i.id,"blur",u)});if(e.isWebKit&&(t.keyCode==37||t.keyCode==39)){return n.prevent(t)}if(t.keyCode==13||t.keyCode==32){r(t);return n.cancel(t)}});i.onPostRender.dispatch(i,t.get(i.id))}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,r,i){this.parent(n,r,i);this.onRenderMenu=new e.util.Dispatcher(this);r.menu_container=r.menu_container||t.doc.body},showMenu:function(){var e=this,r,i,s=t.get(e.id),o;if(e.isDisabled()){return}if(!e.isMenuRendered){e.renderMenu();e.isMenuRendered=true}if(e.isMenuVisible){return e.hideMenu()}r=t.getPos(e.settings.menu_container);i=t.getPos(s);o=e.menu;o.settings.offset_x=i.x;o.settings.offset_y=i.y;o.settings.vp_offset_x=i.x;o.settings.vp_offset_y=i.y;o.settings.keyboard_focus=e._focused;o.showMenu(0,s.firstChild.clientHeight);n.add(t.doc,"mousedown",e.hideMenu,e);e.setState("Selected",1);e.isMenuVisible=1},renderMenu:function(){var e=this,t;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons});t.onHideMenu.add(function(){e.hideMenu();e.focus()});e.onRenderMenu.dispatch(e,t);e.menu=t},hideMenu:function(e){var r=this;if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id||e.id===r.id+"_open"})){return}if(!e||!t.getParent(e.target,".mceMenu")){r.setState("Selected",0);n.remove(t.doc,"mousedown",r.hideMenu,r);if(r.menu){r.menu.hideMenu()}}r.isMenuVisible=0},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){if(!e.isDisabled()){if(t.onclick){t.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n);this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,r=n.settings,i;e="<tbody><tr>";if(r.image){i=t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]})}else{i=t.createHTML("span",{"class":"mceAction "+r["class"]},"")}i+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},r.title);e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>";i=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>";e+="</tr></tbody>";e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e);return t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var r=this,i=r.settings,s;if(i.onclick){s=function(e){if(!r.isDisabled()){i.onclick(r.value);n.cancel(e)}};n.add(r.id+"_action","click",s);n.add(r.id,["click","keydown"],function(e){var t=32,i=14,o=13,u=38,a=40;if((e.keyCode===32||e.keyCode===13||e.keyCode===14)&&!e.altKey&&!e.ctrlKey&&!e.metaKey){s();n.cancel(e)}else{if(e.type==="click"||e.keyCode===a){r.showMenu();n.cancel(e)}}})}n.add(r.id+"_open","click",function(e){r.showMenu();n.cancel(e)});n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1});n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0});if(e.isIE6||!t.boxModel){n.add(r.id,"mouseover",function(){if(!t.hasClass(r.id,"mceSplitButtonDisabled")){t.addClass(r.id,"mceSplitButtonHover")}});n.add(r.id,"mouseout",function(){if(!t.hasClass(r.id,"mceSplitButtonDisabled")){t.removeClass(r.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();n.clear(this.id+"_action");n.clear(this.id+"_open");n.clear(this.id)}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,r){var i=this;i.parent(t,n,r);i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings);i.onShowMenu=new e.util.Dispatcher(i);i.onHideMenu=new e.util.Dispatcher(i);i.value=n.default_color},showMenu:function(){var r=this,i,s,o,u;if(r.isDisabled()){return}if(!r.isMenuRendered){r.renderMenu();r.isMenuRendered=true}if(r.isMenuVisible){return r.hideMenu()}o=t.get(r.id);t.show(r.id+"_menu");t.addClass(o,"mceSplitButtonSelected");u=t.getPos(o);t.setStyles(r.id+"_menu",{left:u.x,top:u.y+o.firstChild.clientHeight,zIndex:2e5});o=0;n.add(t.doc,"mousedown",r.hideMenu,r);r.onShowMenu.dispatch(r);if(r._focused){r._keyHandler=n.add(r.id+"_menu","keydown",function(e){if(e.keyCode==27){r.hideMenu()}});t.select("a",r.id+"_menu")[0].focus()}r.keyboardNav=new e.ui.KeyboardNavigation({root:r.id+"_menu",items:t.select("a",r.id+"_menu"),onCancel:function(){r.hideMenu();r.focus()}});r.keyboardNav.focus();r.isMenuVisible=1},hideMenu:function(e){var r=this;if(r.isMenuVisible){if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id+"_open"})){return}if(!e||!t.getParent(e.target,".mceSplitButtonMenu")){t.removeClass(r.id,"mceSplitButtonSelected");n.remove(t.doc,"mousedown",r.hideMenu,r);n.remove(r.id+"_menu","keydown",r._keyHandler);t.hide(r.id+"_menu")}r.isMenuVisible=0;r.onHideMenu.dispatch();r.keyboardNav.destroy()}},renderMenu:function(){var s=this,o,u=0,a=s.settings,f,l,c,h,p;h=t.add(a.menu_container,"div",{role:"listbox",id:s.id+"_menu","class":a.menu_class+" "+a["class"],style:"position:absolute;left:0;top:-1000px;"});o=t.add(h,"div",{"class":a["class"]+" mceSplitButtonMenu"});t.add(o,"span",{"class":"mceMenuLine"});f=t.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"});l=t.add(f,"tbody");u=0;i(r(a.colors,"array")?a.colors:a.colors.split(","),function(n){n=n.replace(/^#/,"");if(!(u--)){c=t.add(l,"tr");u=a.grid_width-1}f=t.add(c,"td");var r={href:"javascript:;",style:{backgroundColor:"#"+n},title:s.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};if(!e.isIE){r.role="option"}f=t.add(f,"a",r);if(s.editor.forcedHighContrastMode){f=t.add(f,"canvas",{width:16,height:16,"aria-hidden":"true"});if(f.getContext&&(p=f.getContext("2d"))){p.fillStyle="#"+n;p.fillRect(0,0,16,16)}else{t.remove(f)}}});if(a.more_colors_func){f=t.add(l,"tr");f=t.add(f,"td",{colspan:a.grid_width,"class":"mceMoreColors"});f=t.add(f,"a",{role:"option",id:s.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},a.more_colors_title);n.add(f,"click",function(e){a.more_colors_func.call(a.more_colors_scope||this);return n.cancel(e)})}t.addClass(o,"mceColorSplitMenu");n.add(s.id+"_menu","mousedown",function(e){return n.cancel(e)});n.add(s.id+"_menu","click",function(e){var n;e=t.getParent(e.target,"a",l);if(e&&e.nodeName.toLowerCase()=="a"&&(n=e.getAttribute("data-mce-color"))){s.setColor(n)}return false});return h},setColor:function(e){this.displayColor(e);this.hideMenu();this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e);n.value=e},postRender:function(){var e=this,n=e.id;e.parent();t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"});t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent();n.clear(e.id+"_menu");n.clear(e.id+"_more");t.remove(e.id+"_menu");if(e.keyboardNav){e.keyboardNav.destroy()}}})})(tinymce);(function(e){var t=e.DOM,n=e.each,r=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,r=[],i=n.controls,s=e.each,o=n.settings;r.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">');r.push("<span role='application'>");r.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(o.name)+"</span>");s(i,function(e){r.push(e.renderHTML())});r.push("</span>");r.push("</div>");return r.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var r=this,i=[];n(r.controls,function(e){n(e.controls,function(e){if(e.id){i.push(e)}})});r.keyNav=new e.ui.KeyboardNavigation({root:r.id,items:i,onCancel:function(){if(e.isWebKit){t.get(r.editor.id+"_ifr").focus()}r.editor.focus()},excludeFromTabOrder:!r.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();r.clear(e.id)}})})(tinymce);(function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e=this,n="",r,i,s=e.settings,o,u,a,f;f=e.controls;for(o=0;o<f.length;o++){i=f[o];u=f[o-1];a=f[o+1];if(o===0){r="mceToolbarStart";if(i.Button){r+=" mceToolbarStartButton"}else{if(i.SplitButton){r+=" mceToolbarStartSplitButton"}else{if(i.ListBox){r+=" mceToolbarStartListBox"}}}n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"))}if(u&&i.ListBox){if(u.Button||u.SplitButton){n+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))}}if(t.stdMode){n+='<td style="position: relative">'+i.renderHTML()+"</td>"}else{n+="<td>"+i.renderHTML()+"</td>"}if(a&&i.ListBox){if(a.Button||a.SplitButton){n+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->"))}}}r="mceToolbarEnd";if(i.Button){r+=" mceToolbarEndButton"}else{if(i.SplitButton){r+=" mceToolbarEndSplitButton"}else{if(i.ListBox){r+=" mceToolbarEndListBox"}}}n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"));return t.createHTML("table",{id:e.id,"class":"mceToolbar"+(s["class"]?" "+s["class"]:""),cellpadding:"0",cellspacing:"0",align:e.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+n+"</tr></tbody>")}})})(tinymce);(function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[];e.urls={};e.lookup={};e.onAdd=new t(e)},get:function(e){if(this.lookup[e]){return this.lookup[e].instance}else{return undefined}},dependencies:function(e){var t;if(this.lookup[e]){t=this.lookup[e].dependencies}return t||[]},requireLangPack:function(t){var n=e.settings;if(n&&n.language&&n.language_load!==false){e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")}},add:function(e,t,n){this.items.push(t);this.lookup[e]={instance:t,dependencies:n};this.onAdd.dispatch(this,e,t);return t},createUrl:function(e,t){if(typeof t==="object"){return t}else{return{prefix:e.prefix,resource:t,suffix:e.suffix}}},addComponents:function(t,n){var r=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,n,r,i){function s(){var s=o.dependencies(t);e.each(s,function(e){var t=o.createUrl(n,e);o.load(t.resource,t,undefined,undefined)});if(r){if(i){r.call(i)}else{r.call(e.ScriptLoader)}}}var o=this,u=n;if(o.urls[t]){return}if(typeof n==="object"){u=n.prefix+n.resource+n.suffix}if(u.indexOf("/")!==0&&u.indexOf("://")==-1){u=e.baseURL+"/"+u}o.urls[t]=u.substring(0,u.lastIndexOf("/"));if(o.lookup[t]){s()}else{e.ScriptLoader.add(u,s,i)}}});e.PluginManager=new e.AddOnManager;e.ThemeManager=new e.AddOnManager})(tinymce);(function(e){var t=e.each,n=e.extend,r=e.DOM,i=e.dom.Event,s=e.ThemeManager,o=e.PluginManager,u=e.explode,a=e.util.Dispatcher,f,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(e.documentBaseURL)){e.documentBaseURL+="/"}e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute(e.baseURL);e.baseURI=new e.util.URI(e.baseURL);e.onBeforeUnload=new a(e);i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)});e.onAddEditor=new a(e);e.onRemoveEditor=new a(e);e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(n){function s(e){var t=e.id;if(!t){t=e.name;if(t&&!r.get(t)){t=e.name}else{t=r.uniqueId()}e.setAttribute("id",t)}return t}function o(t,n,r){var i=t[n];if(!i){return}if(e.is(i,"string")){r=i.replace(/\.\w+$/,"");r=r?e.resolve(r):0;i=e.resolve(i)}return i.apply(r||this,Array.prototype.slice.call(arguments,2))}function a(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}var f=this,c,h=e.ScriptLoader,p,d=[],v;f.settings=n;i.bind(window,"ready",function(){var i,f;o(n,"onpageload");switch(n.mode){case"exact":i=n.elements||"";if(i.length>0){t(u(i),function(i){if(r.get(i)){v=new e.Editor(i,n);d.push(v);v.render(1)}else{t(document.forms,function(s){t(s.elements,function(t){if(t.name===i){i="mce_editor_"+l++;r.setAttrib(t,"id",i);v=new e.Editor(i,n);d.push(v);v.render(1)}})})}})}break;case"textareas":case"specific_textareas":t(r.select("textarea"),function(t){if(n.editor_deselector&&a(t,n.editor_deselector)){return}if(!n.editor_selector||a(t,n.editor_selector)){v=new e.Editor(s(t),n);d.push(v);v.render(1)}});break;default:if(n.types){t(n.types,function(i){t(r.select(i.selector),function(t){var r=new e.Editor(s(t),e.extend({},n,i));d.push(r);r.render(1)})})}else{if(n.selector){t(r.select(n.selector),function(t){var r=new e.Editor(s(t),n);d.push(r);r.render(1)})}}}if(n.oninit){i=f=0;t(d,function(e){f++;if(!e.initialized){e.onInit.add(function(){i++;if(i==f){o(n,"oninit")}})}else{i++}if(i==f){o(n,"oninit")}})}})},get:function(e){if(e===f){return this.editors}if(!this.editors.hasOwnProperty(e)){return f}return this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,r=n.editors;r[t.id]=t;r.push(t);n._setActive(t);n.onAddEditor.dispatch(n,t);if(e.adapter){e.adapter.patchEditor(t)}return t},remove:function(e){var t=this,n,r=t.editors;if(!r[e.id]){return null}delete r[e.id];for(n=0;n<r.length;n++){if(r[n]==e){r.splice(n,1);break}}if(t.activeEditor==e){t._setActive(r[0])}e.destroy();t.onRemoveEditor.dispatch(t,e);return e},execCommand:function(t,n,r){function i(){o.destroy();u.detachEvent("onunload",i);u=u.tinyMCE=u.tinymce=null}var s=this,o=s.get(r),u;switch(t){case"mceFocus":o.focus();return true;case"mceAddEditor":case"mceAddControl":if(!s.get(r)){(new e.Editor(r,s.settings)).render()}return true;case"mceAddFrameControl":u=r.window;u.tinyMCE=tinyMCE;u.tinymce=e;e.DOM.doc=u.document;e.DOM.win=u;o=new e.Editor(r.element_id,r);o.render();if(e.isIE){u.attachEvent("onunload",i)}r.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(o){o.remove()}return true;case"mceToggleEditor":if(!o){s.execCommand("mceAddControl",0,r);return true}if(o.isHidden()){o.show()}else{o.hide()}return true}if(s.activeEditor){return s.activeEditor.execCommand(t,n,r)}return false},execInstanceCommand:function(e,t,n,r){var i=this.get(e);if(i){return i.execCommand(t,n,r)}return false},triggerSave:function(){t(this.editors,function(e){e.save()})},addI18n:function(n,r){var i,s=this.i18n;if(!e.is(n,"string")){t(n,function(e,n){t(e,function(e,r){t(e,function(e,t){if(r==="common"){s[n+"."+t]=e}else{s[n+"."+r+"."+t]=e}})})})}else{t(r,function(e,t){s[n+"."+t]=e})}},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.extend,i=e.each,s=e.isGecko,o=e.isIE,u=e.isWebKit,a=e.is,f=e.ThemeManager,l=e.PluginManager,c=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var i=this,s=true;i.settings=n=r({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:s,submit_patch:s,add_unload_trigger:s,convert_urls:s,relative_urls:s,remove_script_host:s,table_inline_editing:false,object_resizing:s,accessibility_focus:s,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:s,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:s,directionality:"ltr",forced_root_block:"p",hidden_input:s,padd_empty_editor:s,render_ui:s,indentation:"30px",fix_table_elements:s,inline_styles:s,convert_fonts_to_spans:s,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:s,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:s},n);i.id=i.editorId=t;i.isNotDirty=false;i.plugins={};i.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI});i.baseURI=e.baseURI;i.contentCSS=[];i.contentStyles=[];i.setupEvents();i.execCommands={};i.queryStateCommands={};i.queryValueCommands={};i.execCallback("setup",i)},render:function(r){function s(){if(u.language&&u.language_load!==false){h.add(e.baseURL+"/langs/"+u.language+".js")}if(u.theme&&typeof u.theme!="function"&&u.theme.charAt(0)!="-"&&!f.urls[u.theme]){f.load(u.theme,"themes/"+u.theme+"/editor_template"+e.suffix+".js")}i(c(u.plugins),function(t){if(t&&!l.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var n=l.dependencies(t);i(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=l.createUrl(n,t);l.load(t.resource,t)})}else{if(t=="safari"){return}l.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}});h.loadQueue(function(){if(!o.removed){o.init()}})}var o=this,u=o.settings,a=o.id,h=e.ScriptLoader;if(!n.domLoaded){n.add(window,"ready",function(){o.render()});return}tinyMCE.settings=u;if(!o.getElement()){return}if(e.isIDevice&&!e.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(o.getElement().nodeName)&&u.hidden_input&&t.getParent(a,"form")){t.insertAfter(t.create("input",{type:"hidden",name:a}),a)}if(!u.content_editable){o.orgVisibility=o.getElement().style.visibility;o.getElement().style.visibility="hidden"}if(e.WindowManager){o.windowManager=new e.WindowManager(o)}if(u.encoding=="xml"){o.onGetContent.add(function(e,n){if(n.save){n.content=t.encode(n.content)}})}if(u.add_form_submit_trigger){o.onSubmit.addToTop(function(){if(o.initialized){o.save();o.isNotDirty=1}})}if(u.add_unload_trigger){o._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(o.initialized&&!o.destroyed&&!o.isHidden()){o.save({format:"raw",no_events:true})}})}e.addUnload(o.destroy,o);if(u.submit_patch){o.onBeforeRenderUI.add(function(){var t=o.getElement().form;if(!t){return}if(t._mceOldSubmit){return}if(!t.submit.nodeType&&!t.submit.length){o.formElement=t;t._mceOldSubmit=t.submit;t.submit=function(){e.triggerSave();o.isNotDirty=1;return o.formElement._mceOldSubmit(o.formElement)}}t=null})}s()},init:function(){function n(t){var r=l.get(t),o=l.urls[t]||e.documentBaseURL.replace(/\/$/,""),u;if(r&&e.inArray(S,t)===-1){i(l.dependencies(t),function(e){n(e)});u=new r(s,o);s.plugins[t]=u;if(u.init){u.init(s,o);S.push(t)}}}var r,s=this,u=s.settings,a,h,p,d=s.getElement(),v,m,g,y,b,w,E,S=[];e.add(s);u.aria_label=u.aria_label||t.getAttrib(d,"aria-label",s.getLang("aria.rich_text_area"));if(u.theme){if(typeof u.theme!="function"){u.theme=u.theme.replace(/-/,"");v=f.get(u.theme);s.theme=new v;if(s.theme.init){s.theme.init(s,f.urls[u.theme]||e.documentBaseURL.replace(/\/$/,""))}}else{s.theme=u.theme}}i(c(u.plugins.replace(/\-/g,"")),n);if(u.popup_css!==false){if(u.popup_css){u.popup_css=s.documentBaseURI.toAbsolute(u.popup_css)}else{u.popup_css=s.baseURI.toAbsolute("themes/"+u.theme+"/skins/"+u.skin+"/dialog.css")}}if(u.popup_css_add){u.popup_css+=","+s.documentBaseURI.toAbsolute(u.popup_css_add)}s.controlManager=new e.ControlManager(s);s.onBeforeRenderUI.dispatch(s,s.controlManager);if(u.render_ui&&s.theme){s.orgDisplay=d.style.display;if(typeof u.theme!="function"){a=u.width||d.style.width||d.offsetWidth;h=u.height||d.style.height||d.offsetHeight;p=u.min_height||100;w=/^[0-9\.]+(|px)$/i;if(w.test(""+a)){a=Math.max(parseInt(a,10)+(v.deltaWidth||0),100)}if(w.test(""+h)){h=Math.max(parseInt(h,10)+(v.deltaHeight||0),p)}v=s.theme.renderUI({targetNode:d,width:a,height:h,deltaWidth:u.delta_width,deltaHeight:u.delta_height});t.setStyles(v.sizeContainer||v.editorContainer,{width:a,height:h});h=(v.iframeHeight||h)+(typeof h=="number"?v.deltaHeight||0:"");if(h<p){h=p}}else{v=u.theme(s,d);if(v.editorContainer.nodeType){v.editorContainer=v.editorContainer.id=v.editorContainer.id||s.id+"_parent"}if(v.iframeContainer.nodeType){v.iframeContainer=v.iframeContainer.id=v.iframeContainer.id||s.id+"_iframecontainer"}h=v.iframeHeight||d.offsetHeight;if(o){s.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown",function(){e.lastIERng=e.selection.getRng()})})}}s.editorContainer=v.editorContainer}if(u.content_css){i(c(u.content_css),function(e){s.contentCSS.push(s.documentBaseURI.toAbsolute(e))})}if(u.content_style){s.contentStyles.push(u.content_style)}if(u.content_editable){d=r=v=null;return s.initContentBody()}if(document.domain&&location.hostname!=document.domain){e.relaxedDomain=document.domain}s.iframeHTML=u.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(u.document_base_url!=e.documentBaseURL){s.iframeHTML+='<base href="'+s.documentBaseURI.getURI()+'" />'}if(e.isIE8){if(u.ie7_compat){s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}}s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(E=0;E<s.contentCSS.length;E++){s.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+s.contentCSS[E]+'" />'}s.contentCSS=[];y=u.body_id||"tinymce";if(y.indexOf("=")!=-1){y=s.getParam("body_id","","hash");y=y[s.id]||y}b=u.body_class||"";if(b.indexOf("=")!=-1){b=s.getParam("body_class","","hash");b=b[s.id]||""}s.iframeHTML+='</head><body id="'+y+'" class="mceContentBody '+b+'" onload="window.parent.tinyMCE.get(\''+s.id+"').onLoad.dispatch();\"><br></body></html>";if(e.relaxedDomain&&(o||e.isOpera&&parseFloat(opera.version())<11)){g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}r=t.add(v.iframeContainer,"iframe",{id:s.id+"_ifr",src:g||'javascript:""',frameBorder:"0",allowTransparency:"true",title:u.aria_label,style:{width:"100%",height:h,display:"block"}});s.contentAreaContainer=v.iframeContainer;if(v.editorContainer){t.get(v.editorContainer).style.display=s.orgDisplay}d.style.visibility=s.orgVisibility;t.get(s.id).style.display="none";t.setAttrib(s.id,"aria-hidden",true);if(!e.relaxedDomain||!g){s.initContentBody()}d=r=v=null},initContentBody:function(){var n=this,r=n.settings,s=t.get(n.id),u=n.getDoc(),a,f,l;if((!o||!e.relaxedDomain)&&!r.content_editable){u.open();u.write(n.iframeHTML);u.close();if(e.relaxedDomain){u.domain=e.relaxedDomain}}if(r.content_editable){t.addClass(s,"mceContentBody");n.contentDocument=u=r.content_document||document;n.contentWindow=r.content_window||window;n.bodyElement=s;r.content_document=r.content_window=null}f=n.getBody();f.disabled=true;if(!r.readonly){f.contentEditable=n.getParam("content_editable_state",true)}f.disabled=false;n.schema=new e.html.Schema(r);n.dom=new e.dom.DOMUtils(u,{keep_values:true,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:true,root_element:r.content_editable?n.id:null,schema:n.schema});n.parser=new e.html.DomParser(r,n.schema);n.parser.addAttributeFilter("src,href,style",function(e,t){var r=e.length,i,s=n.dom,o,u;while(r--){i=e[r];o=i.attr(t);u="data-mce-"+t;if(!i.attributes.map[u]){if(t==="style"){i.attr(u,s.serializeStyle(s.parseStyle(o),i.name))}else{i.attr(u,n.convertURL(o,t,i.name))}}}});n.parser.addNodeFilter("script",function(e,t){var n=e.length,r;while(n--){r=e[n];r.attr("type","mce-"+(r.attr("type")||"text/javascript"))}});n.parser.addNodeFilter("#cdata",function(e,t){var n=e.length,r;while(n--){r=e[n];r.type=8;r.name="#comment";r.value="[CDATA["+r.value+"]]"}});n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,r){var i=t.length,s,o=n.schema.getNonEmptyElements();while(i--){s=t[i];if(s.isEmpty(o)){s.empty().append(new e.html.Node("br",1)).shortEnded=true}}});n.serializer=new e.dom.Serializer(r,n.dom,n.schema);n.selection=new e.dom.Selection(n.dom,n.getWin(),n.serializer,n);n.formatter=new e.Formatter(n);n.undoManager=new e.UndoManager(n);n.forceBlocks=new e.ForceBlocks(n);n.enterKey=new e.EnterKey(n);n.editorCommands=new e.EditorCommands(n);n.onExecCommand.add(function(e,t){if(!/^(FontName|FontSize)$/.test(t)){n.nodeChanged()}});n.serializer.onPreProcess.add(function(e,t){return n.onPreProcess.dispatch(n,t,e)});n.serializer.onPostProcess.add(function(e,t){return n.onPostProcess.dispatch(n,t,e)});n.onPreInit.dispatch(n);if(!r.browser_spellcheck&&!r.gecko_spellcheck){u.body.spellcheck=false}if(!r.readonly){n.bindNativeEvents()}n.controlManager.onPostRender.dispatch(n,n.controlManager);n.onPostRender.dispatch(n);n.quirks=e.util.Quirks(n);if(r.directionality){f.dir=r.directionality}if(r.nowrap){f.style.whiteSpace="nowrap"}if(r.protect){n.onBeforeSetContent.add(function(e,t){i(r.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})})}n.onSetContent.add(function(){n.addVisual(n.getBody())});if(r.padd_empty_editor){n.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}n.load({initial:true,format:"html"});n.startContent=n.getContent({format:"raw"});n.initialized=true;n.onInit.dispatch(n);n.execCallback("setupcontent_callback",n.id,f,u);n.execCallback("init_instance_callback",n);n.focus(true);n.nodeChanged({initial:true});if(n.contentStyles.length>0){l="";i(n.contentStyles,function(e){l+=e+"\r\n"});n.dom.addStyle(l)}i(n.contentCSS,function(e){n.dom.loadCSS(e)});if(r.auto_focus){setTimeout(function(){var t=e.get(r.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getBody().focus();t.getWin().focus()},100)}s=u=f=null},focus:function(t){var n,r=this,i=r.selection,s=r.settings.content_editable,o,u,a=r.getDoc(),f;if(!t){if(r.lastIERng){i.setRng(r.lastIERng)}o=i.getRng();if(o.item){u=o.item(0)}r._refreshContentEditable();if(!s){r.getWin().focus()}if(e.isGecko||s){f=r.getBody();if(f.setActive){f.setActive()}else{f.focus()}if(s){i.normalize()}}if(u&&u.ownerDocument==a){o=a.body.createControlRange();o.addElement(u);o.select()}}if(e.activeEditor!=r){if((n=e.activeEditor)!=null){n.onDeactivate.dispatch(n,r)}r.onActivate.dispatch(r,n)}e._setActive(r)},execCallback:function(t){var n=this,r=n.settings[t],i;if(!r){return}if(n.callbackLookup&&(i=n.callbackLookup[t])){r=i.func;i=i.scope}if(a(r,"string")){i=r.replace(/\.\w+$/,"");i=i?e.resolve(i):0;r=e.resolve(r);n.callbackLookup=n.callbackLookup||{};n.callbackLookup[t]={func:r,scope:i}}return r.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",r=e.i18n;if(!t){return""}return r[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return r[n+"."+t]||"{#"+t+"}"})},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(a(n)?n:"{#"+t+"}")},getParam:function(t,n,r){var s=e.trim,o=a(this.settings[t])?this.settings[t]:n,u;if(r==="hash"){u={};if(a(o,"string")){i(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("=");if(e.length>1){u[s(e[0])]=s(e[1])}else{u[s(e[0])]=s(e)}})}else{u=o}return u}return o},nodeChanged:function(e){var t=this,n=t.selection,r;if(t.initialized){e=e||{};r=n.getStart()||t.getBody();r=o&&r.ownerDocument!=t.getDoc()?t.getBody():r;e.parents=[];t.dom.getParent(r,function(t){if(t.nodeName=="BODY"){return true}e.parents.push(t)});t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,r,n.isCollapsed(),e)}},addButton:function(e,t){var n=this;n.buttons=n.buttons||{};n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){var s=this,o;if(s.settings.custom_shortcuts===false){return false}s.shortcuts=s.shortcuts||{};if(a(n,"string")){o=n;n=function(){s.execCommand(o,false,null)}}if(a(n,"object")){o=n;n=function(){s.execCommand(o[0],o[1],o[2])}}i(c(e),function(e){var o={func:n,scope:r||this,desc:s.translate(t),alt:false,ctrl:false,shift:false};i(c(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=true;break;default:o.charCode=e.charCodeAt(0);o.keyCode=e.toUpperCase().charCodeAt(0)}});s.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o});return true},execCommand:function(e,t,n,s){var o=this,u=0,a,f;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)&&(!s||!s.skip_focus)){o.focus()}s=r({},s);o.onBeforeExecCommand.dispatch(o,e,t,n,s);if(s.terminate){return false}if(o.execCallback("execcommand_callback",o.id,o.selection.getNode(),e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}if(a=o.execCommands[e]){f=a.func.call(a.scope,t,n);if(f!==true){o.onExecCommand.dispatch(o,e,t,n,s);return f}}i(o.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);u=1;return false}});if(u){return true}if(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}if(o.editorCommands.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}o.getDoc().execCommand(e,t,n);o.onExecCommand.dispatch(o,e,t,n,s)},queryCommandState:function(e){var t=this,n,r;if(t._isHidden()){return}if(n=t.queryStateCommands[e]){r=n.func.call(n.scope);if(r!==true){return r}}n=t.editorCommands.queryCommandState(e);if(n!==-1){return n}try{return this.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var t=this,n,r;if(t._isHidden()){return}if(n=t.queryValueCommands[e]){r=n.func.call(n.scope);if(r!==true){return r}}n=t.editorCommands.queryCommandValue(e);if(a(n)){return n}try{return this.getDoc().queryCommandValue(e)}catch(i){}},show:function(){var e=this;t.show(e.getContainer());t.hide(e.id);e.load()},hide:function(){var e=this,n=e.getDoc();if(o&&n){n.execCommand("SelectAll")}e.save();t.hide(e.getContainer());t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){this.onSetProgressState.dispatch(this,e,t,n);return e},load:function(e){var t=this,n=t.getElement(),r;if(n){e=e||{};e.load=true;r=t.setContent(a(n.value)?n.value:n.innerHTML,e);e.element=n;if(!e.no_events){t.onLoadContent.dispatch(t,e)}e.element=n=null;return r}},save:function(e){var n=this,r=n.getElement(),s,o;if(!r||!n.initialized){return}e=e||{};e.save=true;e.element=r;s=e.content=n.getContent(e);if(!e.no_events){n.onSaveContent.dispatch(n,e)}s=e.content;if(!/TEXTAREA|INPUT/i.test(r.nodeName)){r.innerHTML=s;if(o=t.getParent(n.id,"form")){i(o.elements,function(e){if(e.name==n.id){e.value=s;return false}})}}else{r.value=s}e.element=r=null;return s},setContent:function(t,n){var r=this,i,s=r.getBody(),o;n=n||{};n.format=n.format||"html";n.set=true;n.content=t;if(!n.no_events){r.onBeforeSetContent.dispatch(r,n)}t=n.content;if(!e.isIE&&(t.length===0||/^\s+$/.test(t))){o=r.settings.forced_root_block;if(o){t="<"+o+'><br data-mce-bogus="1"></'+o+">"}else{t='<br data-mce-bogus="1">'}s.innerHTML=t;r.selection.select(s,true);r.selection.collapse(true);return}if(n.format!=="raw"){t=(new e.html.Serializer({},r.schema)).serialize(r.parser.parse(t))}n.content=e.trim(t);r.dom.setHTML(s,n.content);if(!n.no_events){r.onSetContent.dispatch(r,n)}if(!r.settings.content_editable||document.activeElement===r.getBody()){r.selection.normalize()}return n.content},getContent:function(t){var n=this,r,i=n.getBody();t=t||{};t.format=t.format||"html";t.get=true;t.getInner=true;if(!t.no_events){n.onBeforeGetContent.dispatch(n,t)}if(t.format=="raw"){r=i.innerHTML}else{if(t.format=="text"){r=i.innerText||i.textContent}else{r=n.serializer.serialize(i,t)}}if(t.format!="text"){t.content=e.trim(r)}else{t.content=r}if(!t.no_events){n.onGetContent.dispatch(n,t)}return t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;if(!e.container){e.container=t.get(e.editorContainer||e.id+"_parent")}return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e=this,n;if(!e.contentWindow){n=t.get(e.id+"_ifr");if(n){e.contentWindow=n.contentWindow}}return e.contentWindow},getDoc:function(){var e=this,t;if(!e.contentDocument){t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback){return r.execCallback("urlconverter_callback",e,n,true,t)}if(!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0){return e}if(i.relative_urls){return r.documentBaseURI.toRelative(e)}e=r.documentBaseURI.toAbsolute(e,i.remove_script_host);return e},addVisual:function(e){var t=this,n=t.settings,r=t.dom,s;e=e||t.getBody();if(!a(t.hasVisual)){t.hasVisual=n.visual}i(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":s=n.visual_table_class||"mceItemTable";i=r.getAttrib(e,"border");if(!i||i=="0"){if(t.hasVisual){r.addClass(e,s)}else{r.removeClass(e,s)}}return;case"A":if(!r.getAttrib(e,"href",false)){i=r.getAttrib(e,"name")||e.id;s="mceItemAnchor";if(i){if(t.hasVisual){r.addClass(e,s)}else{r.removeClass(e,s)}}}return}});t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var r=this,i=r.getContainer(),s=r.getDoc();if(!r.removed){r.removed=1;if(o&&s){s.execCommand("SelectAll")}r.save();t.setStyle(r.id,"display",r.orgDisplay);if(!r.settings.content_editable){n.unbind(r.getWin());n.unbind(r.getDoc())}n.unbind(r.getBody());n.clear(i);r.execCallback("remove_instance_callback",r);r.onRemove.dispatch(r);r.onExecCommand.listeners=[];e.remove(r);t.remove(i)}},destroy:function(t){var r=this;if(r.destroyed){return}if(s){n.unbind(r.getDoc());n.unbind(r.getWin());n.unbind(r.getBody())}if(!t){e.removeUnload(r.destroy);tinyMCE.onBeforeUnload.remove(r._beforeUnload);if(r.theme&&r.theme.destroy){r.theme.destroy()}r.controlManager.destroy();r.selection.destroy();r.dom.destroy()}if(r.formElement){r.formElement.submit=r.formElement._mceOldSubmit;r.formElement._mceOldSubmit=null}r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null;if(r.selection){r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null}r.destroyed=1},_refreshContentEditable:function(){var e=this,t,n;if(e._isHidden()){t=e.getBody();n=t.parentNode;n.removeChild(t);n.appendChild(t);t.focus()}},_isHidden:function(){var e;if(!s){return 0}e=this.selection.getSel();return!e||!e.rangeCount||e.rangeCount===0}})})(tinymce);(function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,r=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)});if(r.cleanup_callback){n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)});n.onPreProcess.add(function(e,t){if(t.set){e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});n.onPostProcess.add(function(e,t){if(t.set){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(r.save_callback){n.onGetContent.add(function(e,t){if(t.save){t.content=e.execCallback("save_callback",e.id,t.content,e.getBody())}})}if(r.handle_event_callback){n.onEvent.add(function(e,t,r){if(n.execCallback("handle_event_callback",t,e,r)===false){t.preventDefault();t.stopPropagation()}})}if(r.handle_node_change_callback){n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,true,e.selection.isCollapsed())})}if(r.save_callback){n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());if(n){t.content=n}})}if(r.onchange_callback){n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})}};e.Editor.prototype.bindNativeEvents=function(){function n(e,t){var n=e.type;if(o.removed){return}if(o.onEvent.dispatch(o,e,t)!==false){o[l[e.fakeType||e.type]].dispatch(o,e,t)}}function r(e){o.focus(true)}function i(t,n){if(n.keyCode!=65||!e.VK.metaKeyPressed(n)){o.selection.normalize()}o.nodeChanged()}function s(n,r){if(n.altKey||n.ctrlKey||n.metaKey){t(o.shortcuts,function(t){var i=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl!=i||t.alt!=n.altKey||t.shift!=n.shiftKey){return}if(n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode){n.preventDefault();if(r){t.func.call(t.scope)}return true}})}}var o=this,u,a=o.settings,f=o.dom,l;l={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};t(l,function(t,r){var i=a.content_editable?o.getBody():o.getDoc();switch(r){case"contextmenu":f.bind(i,r,n);break;case"paste":f.bind(o.getBody(),r,n);break;case"submit":case"reset":f.bind(o.getElement().form||e.DOM.getParent(o.id,"form"),r,n);break;default:f.bind(i,r,n)}});f.bind(a.content_editable?o.getBody():e.isGecko?o.getDoc():o.getWin(),"focus",function(e){o.focus(true)});if(a.content_editable&&e.isOpera){f.bind(o.getBody(),"click",r);f.bind(o.getBody(),"keydown",r)}o.onMouseUp.add(i);o.onKeyUp.add(function(t,n){var r=n.keyCode;if(r>=33&&r<=36||r>=37&&r<=40||r==13||r==45||r==46||r==8||e.isMac&&(r==91||r==93)||n.ctrlKey){i(t,n)}});o.onReset.add(function(){o.setContent(o.startContent,{format:"raw"})});o.onKeyUp.add(function(e,t){s(t)});o.onKeyPress.add(function(e,t){s(t)});o.onKeyDown.add(function(e,t){s(t,true)});if(e.isOpera){o.onClick.add(function(e,t){t.preventDefault()})}}})(tinymce);(function(e){var t=e.each,n,r=true,i=false;e.EditorCommands=function(s){function o(e,t,n){var s;e=e.toLowerCase();if(s=g.exec[e]){s(e,t,n);return r}return i}function u(e){var t;e=e.toLowerCase();if(t=g.state[e]){return t(e)}return-1}function a(e){var t;e=e.toLowerCase();if(t=g.value[e]){return t(e)}return i}function f(e,n){n=n||"exec";t(e,function(e,r){t(r.toLowerCase().split(","),function(t){g[n][t]=e})})}function l(e,t,r){if(t===n){t=i}if(r===n){r=null}return s.getDoc().execCommand(e,t,r)}function c(e){return b.match(e)}function h(e,t){b.toggle(e,t?{value:t}:n)}function p(e){w=m.getBookmark(e)}function d(){m.moveToBookmark(w)}var v=s.dom,m=s.selection,g={state:{},exec:{},value:{}},y=s.settings,b=s.formatter,w;e.extend(this,{execCommand:o,queryCommandState:u,queryCommandValue:a,addCommands:f});f({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(t){var n=s.getDoc(),i;try{l(t)}catch(o){i=r}if(i||!n.queryCommandSupported(t)){if(e.isGecko){s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){if(e){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{s.windowManager.alert(s.getLang("clipboard_no_support"))}}},unlink:function(e){if(m.isCollapsed()){m.select(m.getNode())}l(e);m.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),function(e){if(n!=e){b.remove("align"+e)}});h("align"+n);o("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;l(e);t=v.getParent(m.getNode(),"ol,ul");if(t){n=t.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){p();v.split(n,t);d()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){h(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){h(e,n)},FontSize:function(t,n,r){var i,s;if(r>=1&&r<=7){s=e.explode(y.font_size_style_values);i=e.explode(y.font_size_classes);if(i){r=i[r-1]||r}else{r=s[r-1]||r}}h(t,r)},RemoveFormat:function(e){b.remove(e)},mceBlockQuote:function(e){h("blockquote")},FormatBlock:function(e,t,n){return h(n||"p")},mceCleanup:function(){var e=m.getBookmark();s.setContent(s.getContent({cleanup:r}),{cleanup:r});m.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||m.getNode();if(i!=s.getBody()){p();s.dom.remove(i,r);d()}},mceSelectNodeDepth:function(e,t,n){var r=0;v.getParent(m.getNode(),function(e){if(e.nodeType==1&&r++==n){m.select(e);return i}},s.getBody())},mceSelectNode:function(e,t,n){m.select(n)},mceInsertContent:function(t,n,r){var i,o,u,a,f,l,c,h,p,d,g,y,b,w;i=s.parser;o=new e.html.Serializer({},s.schema);b='<span id="mce_marker" data-mce-type="bookmark">﻿</span>';l={content:r,format:"html"};m.onBeforeSetContent.dispatch(m,l);r=l.content;if(r.indexOf("{$caret}")==-1){r+="{$caret}"}r=r.replace(/\{\$caret\}/,b);if(!m.isCollapsed()){s.getDoc().execCommand("Delete",false,null)}u=m.getNode();l={context:u.nodeName.toLowerCase()};f=i.parse(r,l);g=f.lastChild;if(g.attr("id")=="mce_marker"){c=g;for(g=g.prev;g;g=g.walk(true)){if(g.type==3||!v.isBlock(g.name)){g.parent.insert(c,g,g.name==="br");break}}}if(!l.invalid){r=o.serialize(f);g=u.firstChild;y=u.lastChild;if(!g||g===y&&g.nodeName==="BR"){v.setHTML(u,r)}else{m.setContent(r)}}else{m.setContent(b);u=m.getNode();a=s.getBody();if(u.nodeType==9){u=g=a}else{g=u}while(g!==a){u=g;g=g.parentNode}r=u==a?a.innerHTML:v.getOuterHTML(u);r=o.serialize(i.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(f)})));if(u==a){v.setHTML(a,r)}else{v.setOuterHTML(u,r)}}c=v.get("mce_marker");h=v.getRect(c);p=v.getViewPort(s.getWin());if(h.y+h.h>p.y+p.h||h.y<p.y||h.x>p.x+p.w||h.x<p.x){w=e.isIE?s.getDoc().documentElement:s.getBody();w.scrollLeft=h.x;w.scrollTop=h.y-p.h+25}d=v.createRng();g=c.previousSibling;if(g&&g.nodeType==3){d.setStart(g,g.nodeValue.length)}else{d.setStartBefore(c);d.setEndBefore(c)}v.remove(c);m.setRng(d);m.onSetContent.dispatch(m,l);s.addVisual()},mceInsertRawHTML:function(e,t,n){m.setContent("tiny_mce_marker");s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){h(n)},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var n,r,i;n=y.indentation;r=/[a-z%]+$/i.exec(n);n=parseInt(n);if(!u("InsertUnorderedList")&&!u("InsertOrderedList")){if(!y.forced_root_block&&!v.getParent(m.getNode(),v.isBlock)){b.apply("div")}t(m.getSelectedBlocks(),function(t){if(e=="outdent"){i=Math.max(0,parseInt(t.style.paddingLeft||0)-n);v.setStyle(t,"paddingLeft",i?i+r:"")}else{v.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+r)}})}else{l(e)}},mceRepaint:function(){var t;if(e.isGecko){try{p(r);if(m.getSel()){m.getSel().selectAllChildren(s.getBody())}m.collapse(r);d()}catch(n){}}},mceToggleFormat:function(e,t,n){b.toggle(n)},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual;s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",false,n.replace(/\{\$selection\}/g,m.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;if(typeof n=="string"){n={href:n}}r=v.getParent(m.getNode(),"a");n.href=n.href.replace(" ","%20");if(!r||!n.href){b.remove("link")}if(n.href){b.apply("link",n,r)}},selectAll:function(){var e=v.getRoot(),t=v.createRng();if(m.getRng().setStart){t.setStart(e,0);t.setEnd(e,e.childNodes.length);m.setRng(t)}else{l("SelectAll")}}});f({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7);var i=m.isCollapsed()?[v.getParent(m.getNode(),v.isBlock)]:m.getSelectedBlocks();var s=e.map(i,function(e){return!!b.matchNode(e,n)});return e.inArray(s,r)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return c(e)},mceBlockQuote:function(){return c("blockquote")},Outdent:function(){var e;if(y.inline_styles){if((e=v.getParent(m.getStart(),v.isBlock))&&parseInt(e.style.paddingLeft)>0){return r}if((e=v.getParent(m.getEnd(),v.isBlock))&&parseInt(e.style.paddingLeft)>0){return r}}return u("InsertUnorderedList")||u("InsertOrderedList")||!y.inline_styles&&!!v.getParent(m.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=v.getParent(m.getNode(),"ul,ol");return t&&(e==="insertunorderedlist"&&t.tagName==="UL"||e==="insertorderedlist"&&t.tagName==="OL")}},"state");f({"FontSize,FontName":function(e){var t=0,n;if(n=v.getParent(m.getNode(),"span")){if(e=="fontsize"){t=n.style.fontSize}else{t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return t}},"value");f({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}})(tinymce);(function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function r(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function i(){s.typing=false;s.add()}var s,o=0,u=[],a,f,l,c;onBeforeAdd=new t(s);f=new t(s);l=new t(s);c=new t(s);f.add(function(e,t){if(e.hasUndo()){return n.onChange.dispatch(n,t,e)}});l.add(function(e,t){return n.onUndo.dispatch(n,t,e)});c.add(function(e,t){return n.onRedo.dispatch(n,t,e)});n.onInit.add(function(){s.add()});n.onBeforeExecCommand.add(function(e,t,n,r,i){if(t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!i||!i.skip_undo)){s.beforeChange()}});n.onExecCommand.add(function(e,t,n,r,i){if(t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!i||!i.skip_undo)){s.add()}});n.onSaveContent.add(i);n.dom.bind(n.dom.getRoot(),"dragend",i);n.dom.bind(n.getBody(),"focusout",function(e){if(!n.removed&&s.typing){i()}});n.onKeyUp.add(function(e,t){var n=t.keyCode;if(n>=33&&n<=36||n>=37&&n<=40||n==45||n==13||t.ctrlKey){i()}});n.onKeyDown.add(function(e,t){var n=t.keyCode;if(n>=33&&n<=36||n>=37&&n<=40||n==45){if(s.typing){i()}return}if((n<16||n>20)&&n!=224&&n!=91&&!s.typing){s.beforeChange();s.typing=true;s.add()}});n.onMouseDown.add(function(e,t){if(s.typing){i()}});n.addShortcut("ctrl+z","undo_desc","Undo");n.addShortcut("ctrl+y","redo_desc","Redo");s={data:u,typing:false,onBeforeAdd:onBeforeAdd,onAdd:f,onUndo:l,onRedo:c,beforeChange:function(){a=n.selection.getBookmark(2,true)},add:function(e){var t,i=n.settings,f;e=e||{};e.content=r();s.onBeforeAdd.dispatch(s,e);f=u[o];if(f&&f.content==e.content){return null}if(u[o]){u[o].beforeBookmark=a}if(i.custom_undo_redo_levels){if(u.length>i.custom_undo_redo_levels){for(t=0;t<u.length-1;t++){u[t]=u[t+1]}u.length--;o=u.length}}e.bookmark=n.selection.getBookmark(2,true);if(o<u.length-1){u.length=o+1}u.push(e);o=u.length-1;s.onAdd.dispatch(s,e);n.isNotDirty=0;return e},undo:function(){var e,t;if(s.typing){s.add();s.typing=false}if(o>0){e=u[--o];n.setContent(e.content,{format:"raw"});n.selection.moveToBookmark(e.beforeBookmark);s.onUndo.dispatch(s,e)}return e},redo:function(){var e;if(o<u.length-1){e=u[++o];n.setContent(e.content,{format:"raw"});n.selection.moveToBookmark(e.bookmark);s.onRedo.dispatch(s,e)}return e},clear:function(){u=[];o=0;s.typing=false},hasUndo:function(){return o>0||this.typing},hasRedo:function(){return o<u.length-1&&!this.typing}};return s}})(tinymce);tinymce.ForceBlocks=function(e){function t(){var t=i.getStart(),o=e.getBody(),u,a,f,l,c,h,p,d=-16777215,v,m;if(!t||t.nodeType!==1||!n.forced_root_block){return}while(t&&t!=o){if(s[t.nodeName]){return}t=t.parentNode}u=i.getRng();if(u.setStart){a=u.startContainer;f=u.startOffset;l=u.endContainer;c=u.endOffset}else{if(u.item){t=u.item(0);u=e.getDoc().body.createTextRange();u.moveToElementText(t)}m=u.parentElement().ownerDocument===e.getDoc();tmpRng=u.duplicate();tmpRng.collapse(true);f=tmpRng.move("character",d)*-1;if(!tmpRng.collapsed){tmpRng=u.duplicate();tmpRng.collapse(false);c=tmpRng.move("character",d)*-1-f}}t=o.firstChild;while(t){if(t.nodeType===3||t.nodeType==1&&!s[t.nodeName]){if(t.nodeType===3&&t.nodeValue.length==0){p=t;t=t.nextSibling;r.remove(p);continue}if(!h){h=r.create(n.forced_root_block);t.parentNode.insertBefore(h,t);v=true}p=t;t=t.nextSibling;h.appendChild(p)}else{h=null;t=t.nextSibling}}if(v){if(u.setStart){u.setStart(a,f);u.setEnd(l,c);i.setRng(u)}else{if(m){try{u=e.getDoc().body.createTextRange();u.moveToElementText(o);u.collapse(true);u.moveStart("character",f);if(c>0){u.moveEnd("character",c)}u.select()}catch(g){}}}e.nodeChanged()}}var n=e.settings,r=e.dom,i=e.selection,s=e.schema.getBlockElements();if(n.forced_root_block){e.onKeyUp.add(t);e.onNodeChange.add(t)}};(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this,s;n=n||{};i.editor=t;i.controls={};i.onAdd=new e.util.Dispatcher(i);i.onPostRender=new e.util.Dispatcher(i);i.prefix=n.prefix||t.id+"_";i._cls={};i.onPostRender.add(function(){r(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;if(n=this.get(e)){n.setActive(t)}return n},setDisabled:function(e,t){var n=null;if(n=this.get(e)){n.setDisabled(t)}return n},add:function(e){var t=this;if(e){t.controls[e.id]=e;t.onAdd.dispatch(e,t)}return e},createControl:function(e){var t,n,i,s=this,o=s.editor,u,a;if(!s.controlFactories){s.controlFactories=[];r(o.plugins,function(e){if(e.createControl){s.controlFactories.push(e)}})}u=s.controlFactories;for(n=0,i=u.length;n<i;n++){t=u[n].createControl(e,s);if(t){return s.add(t)}}if(e==="|"||e==="separator"){return s.createSeparator()}if(o.buttons&&(t=o.buttons[e])){return s.createButton(e,t)}return s.add(t)},createDropMenu:function(t,n,r){var s=this,o=s.editor,u,a,f,l;n=i({"class":"mceDropDown",constrain:o.settings.constrain_menus},n);n["class"]=n["class"]+" "+o.getParam("skin")+"Skin";if(f=o.getParam("skin_variant")){n["class"]+=" "+o.getParam("skin")+"Skin"+f.substring(0,1).toUpperCase()+f.substring(1)}n["class"]+=o.settings.directionality=="rtl"?" mceRtl":"";t=s.prefix+t;l=r||s._cls.dropmenu||e.ui.DropMenu;u=s.controls[t]=new l(t,n);u.onAddItem.add(function(e,t){var n=t.settings;n.title=o.getLang(n.title,n.title);if(!n.onclick){n.onclick=function(e){if(n.cmd){o.execCommand(n.cmd,n.ui||false,n.value)}}}});o.onRemove.add(function(){u.destroy()});if(e.isIE){u.onShowMenu.add(function(){o.focus();a=o.selection.getBookmark(1)});u.onHideMenu.add(function(){if(a){o.selection.moveToBookmark(a);a=0}})}return s.add(u)},createListBox:function(t,r,s){function o(t){return t.settings.use_accessible_selects&&!e.isGecko}var u=this,a=u.editor,f,l,c;if(u.get(t)){return null}r.title=a.translate(r.title);r.scope=r.scope||a;if(!r.onselect){r.onselect=function(e){a.execCommand(r.cmd,r.ui||false,e||r.value)}}r=i({title:r.title,"class":"mce_"+t,scope:r.scope,control_manager:u},r);t=u.prefix+t;if(a.settings.use_native_selects||o(a)){l=new e.ui.NativeListBox(t,r)}else{c=s||u._cls.listbox||e.ui.ListBox;l=new c(t,r,a)}u.controls[t]=l;if(e.isWebKit){l.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){a.bookmark=a.selection.getBookmark(1)});n.add(t,"focus",function(){a.selection.moveToBookmark(a.bookmark);a.bookmark=null})})}if(l.hideMenu){a.onMouseDown.add(l.hideMenu,l)}return u.add(l)},createButton:function(t,n,r){var s=this,o=s.editor,u,a,f;if(s.get(t)){return null}n.title=o.translate(n.title);n.label=o.translate(n.label);n.scope=n.scope||o;if(!n.onclick&&!n.menu_button){n.onclick=function(){o.execCommand(n.cmd,n.ui||false,n.value)}}n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:o.getLang("unavailable",""),scope:n.scope,control_manager:s},n);t=s.prefix+t;if(n.menu_button){f=r||s._cls.menubutton||e.ui.MenuButton;a=new f(t,n,o);o.onMouseDown.add(a.hideMenu,a)}else{f=s._cls.button||e.ui.Button;a=new f(t,n,o)}return s.add(a)},createMenuButton:function(e,t,n){t=t||{};t.menu_button=1;return this.createButton(e,t,n)},createSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f;if(s.get(t)){return null}n.title=o.translate(n.title);n.scope=n.scope||o;if(!n.onclick){n.onclick=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}if(!n.onselect){n.onselect=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n);t=s.prefix+t;f=r||s._cls.splitbutton||e.ui.SplitButton;a=s.add(new f(t,n,o));o.onMouseDown.add(a.hideMenu,a);return a},createColorSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f,l;if(s.get(t)){return null}n.title=o.translate(n.title);n.scope=n.scope||o;if(!n.onclick){n.onclick=function(t){if(e.isIE){l=o.selection.getBookmark(1)}o.execCommand(n.cmd,n.ui||false,t||n.value)}}if(!n.onselect){n.onselect=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}n=i({title:n.title,"class":"mce_"+t,menu_class:o.getParam("skin")+"Skin",scope:n.scope,more_colors_title:o.getLang("more_colors")},n);t=s.prefix+t;f=r||s._cls.colorsplitbutton||e.ui.ColorSplitButton;a=new f(t,n,o);o.onMouseDown.add(a.hideMenu,a);o.onRemove.add(function(){a.destroy()});if(e.isIE){a.onShowMenu.add(function(){o.focus();l=o.selection.getBookmark(1)});a.onHideMenu.add(function(){if(l){o.selection.moveToBookmark(l);l=0}})}return s.add(a)},createToolbar:function(t,n,r){var i,s=this,o;t=s.prefix+t;o=r||s._cls.toolbar||e.ui.Toolbar;i=new o(t,n,s.editor);if(s.get(t)){return null}return s.add(i)},createToolbarGroup:function(t,n,r){var i,s=this,o;t=s.prefix+t;o=r||this._cls.toolbarGroup||e.ui.ToolbarGroup;i=new o(t,n,s.editor);if(s.get(t)){return null}return s.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){r(this.controls,function(e){e.destroy()});this.controls=null}})})(tinymce);(function(e){var t=e.util.Dispatcher,n=e.each,r=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e;n.onOpen=new t(n);n.onClose=new t(n);n.params={};n.features={}},open:function(t,s){var o=this,u="",a,f,l=o.editor.settings.dialog_type=="modal",c,h,p,d=e.DOM.getViewPort(),v;t=t||{};s=s||{};h=i?d.w:screen.width;p=i?d.h:screen.height;t.name=t.name||"mc_"+(new Date).getTime();t.width=parseInt(t.width||320);t.height=parseInt(t.height||240);t.resizable=true;t.left=t.left||parseInt(h/2)-t.width/2;t.top=t.top||parseInt(p/2)-t.height/2;s.inline=false;s.mce_width=t.width;s.mce_height=t.height;s.mce_auto_focus=t.auto_focus;if(l){if(r){t.center=true;t.help=false;t.dialogWidth=t.width+"px";t.dialogHeight=t.height+"px";t.scroll=t.scrollbars||false}}n(t,function(t,n){if(e.is(t,"boolean")){t=t?"yes":"no"}if(!/^(name|url)$/.test(n)){if(r&&l){u+=(u?";":"")+n+":"+t}else{u+=(u?",":"")+n+"="+t}}});o.features=t;o.params=s;o.onOpen.dispatch(o,t,s);v=t.url||t.file;v=e._addVer(v);try{if(r&&l){c=1;window.showModalDialog(v,window,u)}else{c=window.open(v,t.name,u)}}catch(m){}if(!c){alert(o.editor.getLang("popup_blocked"))}},close:function(e){e.close();this.onClose.dispatch(this)},createInstance:function(t,n,r,i,s,o){var u=e.resolve(t);return new u(n,r,i,s,o)},confirm:function(e,t,n,r){r=r||window;t.call(n||this,r.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,r){var i=this;r=r||window;r.alert(i._decode(i.editor.getLang(e,e)));if(t){t.call(n||i)}},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})})(tinymce);(function(e){e.Formatter=function(t){function n(e){return!!t.schema.getTextBlocks()[e.toLowerCase()]}function r(e,t){return P.getParents(e,t,P.getRoot())}function i(e){return e.nodeType===1&&e.id==="_mce_caret"}function s(){a({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"b",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"i",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(e){return true},onformat:function(e,t,n){D(n,function(t,n){P.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});D("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){a(e,{block:e,remove:"all"})});a(t.settings.formats)}function o(){t.addShortcut("ctrl+b","bold_desc","Bold");t.addShortcut("ctrl+i","italic_desc","Italic");t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++){t.addShortcut("ctrl+"+e,"",["FormatBlock",false,"h"+e])}t.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);t.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);t.addShortcut("ctrl+9","",["FormatBlock",false,"address"])}function u(e){return e?_[e]:_}function a(e,t){if(e){if(typeof e!=="string"){D(e,function(e,t){a(t,e)})}else{t=t.length?t:[t];D(t,function(e){if(e.deep===J){e.deep=!e.selector}if(e.split===J){e.split=!e.selector||e.inline}if(e.remove===J&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof e.classes==="string"){e.classes=e.classes.split(/\s+/)}});_[e]=t}}}function f(r,s,o){function a(e,t){t=t||v;if(e){if(t.onformat){t.onformat(e,t,s,o)}D(t.styles,function(t,n){P.setStyle(e,n,w(t,s))});D(t.attributes,function(t,n){P.setAttrib(e,n,w(t,s))});D(t.classes,function(t){t=w(t,s);if(!P.hasClass(e,t)){P.addClass(e,t)}})}}function l(){function e(e,t){var n=new B(t);for(o=n.current();o;o=n.prev()){if(o.childNodes.length>1||o==e||o.tagName=="BR"){return o}}}var n=t.selection.getRng();var r=n.startContainer;var i=n.endContainer;if(r!=i&&n.endOffset===0){var s=e(r,i);var u=s.nodeType==3?s.length:s.childNodes.length;n.setEnd(s,u)}return n}function c(t,n,r,i,s){var o=[],u=-1,a,f=-1,l=-1,c;D(t.childNodes,function(e,t){if(e.nodeName==="UL"||e.nodeName==="OL"){u=t;a=e;return false}});D(t.childNodes,function(e,t){if(e.nodeName==="SPAN"&&P.getAttrib(e,"data-mce-type")=="bookmark"){if(e.id==n.id+"_start"){f=t}else{if(e.id==n.id+"_end"){l=t}}}});if(u<=0||f<u&&l>u){D(e.grep(t.childNodes),s);return 0}else{c=P.clone(r,X);D(e.grep(t.childNodes),function(e,t){if(f<u&&t<u||f>u&&t>u){o.push(e);e.parentNode.removeChild(e)}});if(f<u){t.insertBefore(c,a)}else{if(f>u){t.insertBefore(c,a.nextSibling)}}i.push(c);D(o,function(e){c.appendChild(e)});return c}}function p(t,o,u){var f=[],l,p,m=true;l=v.inline||v.block;p=P.create(l);a(p);j.walk(t,function(t){function g(t){var w,E,S,x,T;T=m;w=t.nodeName.toLowerCase();E=t.parentNode.nodeName.toLowerCase();if(t.nodeType===1&&K(t)){T=m;m=K(t)==="true";x=true}if(y(w,"br")){b=0;if(v.block){P.remove(t)}return}if(v.wrapper&&h(t,r,s)){b=0;return}if(m&&!x&&v.block&&!v.wrapper&&n(w)){t=P.rename(t,l);a(t);f.push(t);b=0;return}if(v.selector){D(d,function(e){if("collapsed"in e&&e.collapsed!==N){return}if(P.is(t,e.selector)&&!i(t)){a(t,e);S=true}});if(!v.inline||S){b=0;return}}if(m&&!x&&F(l,w)&&F(E,l)&&!(!u&&t.nodeType===3&&t.nodeValue.length===1&&t.nodeValue.charCodeAt(0)===65279)&&!i(t)){if(!b){b=P.clone(p,X);t.parentNode.insertBefore(b,t);f.push(b)}b.appendChild(t)}else{if(w=="li"&&o){b=c(t,o,p,f,g)}else{b=0;D(e.grep(t.childNodes),g);if(x){m=T}b=0}}}var b;D(t,g)});if(v.wrap_links===false){D(f,function(t){function n(t){var r,i,s;if(t.nodeName==="A"){i=P.clone(p,X);f.push(i);s=e.grep(t.childNodes);for(r=0;r<s.length;r++){i.appendChild(s[r])}t.appendChild(i)}D(e.grep(t.childNodes),n)}n(t)})}D(f,function(e){function t(e){var t=0;D(e.childNodes,function(e){if(!E(e)&&!k(e)){t++}});return t}function n(e){var t,n;D(e.childNodes,function(e){if(e.nodeType==1&&!k(e)&&!i(e)){t=e;return X}});if(t&&g(t,v)){n=P.clone(t,X);a(n);P.replace(n,e,V);P.remove(t,1)}return n||e}var o;o=t(e);if((f.length>1||!q(e))&&o===0){P.remove(e,1);return}if(v.inline||v.wrapper){if(!v.exact&&o===1){e=n(e)}D(d,function(t){D(P.select(t.inline,e),function(e){var n;if(t.wrap_links===false){n=e.parentNode;do{if(n.nodeName==="A"){return}}while(n=n.parentNode)}T(t,s,e,t.exact?e:null)})});if(h(e.parentNode,r,s)){P.remove(e,1);e=0;return V}if(v.merge_with_parents){P.getParent(e.parentNode,function(t){if(h(t,r,s)){P.remove(e,1);e=0;return V}})}if(e&&v.merge_siblings!==false){e=L(C(e),e);e=L(e,C(e,V))}}})}var d=u(r),v=d[0],m,b,S,N=H.isCollapsed();if(v){if(o){if(o.nodeType){b=P.createRng();b.setStartBefore(o);b.setEndAfter(o);p(x(b,d),null,true)}else{p(o,null,true)}}else{if(!N||!v.inline||P.select("td.mceSelected,th.mceSelected").length){var A=t.selection.getNode();if(!R&&d[0].defaultBlock&&!P.getParent(A,P.isBlock)){f(d[0].defaultBlock)}t.selection.setRng(l());m=H.getBookmark();p(x(H.getRng(V),d),m);if(v.styles&&(v.styles.color||v.styles.textDecoration)){e.walk(A,G,"childNodes");G(A)}H.moveToBookmark(m);M(H.getRng(V));t.nodeChanged()}else{O("apply",r,s)}}}}function l(n,i,s){function o(t){var n,r,s,u,a,f;if(t.nodeType===3){return}if(t.nodeType===1&&K(t)){a=w;w=K(t)==="true";f=true}n=e.grep(t.childNodes);if(w&&!f){for(r=0,s=v.length;r<s;r++){if(T(v[r],i,t,t)){break}}}if(m.deep){if(n.length){for(r=0,s=n.length;r<s;r++){o(n[r])}if(f){w=a}}}}function a(e){var t;D(r(e.parentNode).reverse(),function(e){var r;if(!t&&e.id!="_start"&&e.id!="_end"){r=h(e,n,i);if(r&&r.split!==false){t=e}}});return t}function f(e,t,n,r){var s,o,u,a,f,l;if(e){l=e.parentNode;for(s=t.parentNode;s&&s!=l;s=s.parentNode){o=P.clone(s,X);for(f=0;f<v.length;f++){if(T(v[f],i,o,o)){o=0;break}}if(o){if(u){o.appendChild(u)}if(!a){a=o}u=o}}if(r&&(!m.mixed||!q(e))){t=P.split(e,t)}if(u){n.parentNode.insertBefore(u,n);a.appendChild(n)}}return t}function l(e){return f(a(e),e,e,true)}function c(e){var t=P.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];if(k(n)){n=n[e?"firstChild":"lastChild"]}P.remove(t,true);return n}function d(e){var n,r,i;e=x(e,v,V);if(m.split){n=A(e,V);r=A(e);if(n!=r){if(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild){n=(n.nodeName=="TD"?n.firstChild:n.firstChild.firstChild)||n}n=S(n,"span",{id:"_start","data-mce-type":"bookmark"});r=S(r,"span",{id:"_end","data-mce-type":"bookmark"});l(n);l(r);n=c(V);r=c()}else{n=r=l(n)}e.startContainer=n.parentNode;e.startOffset=U(n);e.endContainer=r.parentNode;e.endOffset=U(r)+1}j.walk(e,function(e){D(e,function(e){o(e);if(e.nodeType===1&&t.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&Q(e.parentNode)==="underline"){T({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,e)}})})}var v=u(n),m=v[0],g,y,b,w=true;if(s){if(s.nodeType){b=P.createRng();b.setStartBefore(s);b.setEndAfter(s);d(b)}else{d(s)}return}if(!H.isCollapsed()||!m.inline||P.select("td.mceSelected,th.mceSelected").length){g=H.getBookmark();d(H.getRng(V));H.moveToBookmark(g);if(m.inline&&p(n,i,H.getStart())){M(H.getRng(true))}t.nodeChanged()}else{O("remove",n,i)}}function c(e,t,n){var r=u(e);if(p(e,t,n)&&(!("toggle"in r[0])||r[0].toggle)){l(e,t,n)}else{f(e,t,n)}}function h(e,t,n,r){function i(e,t,i){var s,o,u=t[i],a;if(t.onmatch){return t.onmatch(e,t,i)}if(u){if(u.length===J){for(s in u){if(u.hasOwnProperty(s)){if(i==="attributes"){o=P.getAttrib(e,s)}else{o=b(e,s)}if(r&&!o&&!t.exact){return}if((!r||t.exact)&&!y(o,w(u[s],n))){return}}}}else{for(a=0;a<u.length;a++){if(i==="attributes"?P.getAttrib(e,u[a]):b(e,u[a])){return t}}}}return t}var s=u(t),o,a,f;if(s&&e){for(a=0;a<s.length;a++){o=s[a];if(g(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(f=o.classes){for(a=0;a<f.length;a++){if(!P.hasClass(e,f[a])){return}}}return o}}}}function p(e,t,n){function r(n){n=P.getParent(n,function(n){return!!h(n,e,t,true)});return h(n,e,t)}var i;if(n){return r(n)}n=H.getNode();if(r(n)){return V}i=H.getStart();if(i!=n){if(r(i)){return V}}return X}function d(e,t){var n,r=[],i={},s,o,u;n=H.getStart();P.getParent(n,function(n){var s,o;for(s=0;s<e.length;s++){o=e[s];if(!i[o]&&h(n,o,t)){i[o]=true;r.push(o)}}},P.getRoot());return r}function v(e){var t=u(e),n,i,s,o,a;if(t){n=H.getStart();i=r(n);for(o=t.length-1;o>=0;o--){a=t[o].selector;if(!a){return V}for(s=i.length-1;s>=0;s--){if(P.is(i[s],a)){return V}}}}return X}function m(e,n,i){var s;if(!$){$={};s={};t.onNodeChange.addToTop(function(e,t,n){var i=r(n),o={};D($,function(e,t){D(i,function(n){if(h(n,t,{},e.similar)){if(!s[t]){D(e,function(e){e(true,{node:n,format:t,parents:i})});s[t]=e}o[t]=e;return false}})});D(s,function(e,t){if(!o[t]){delete s[t];D(e,function(e){e(false,{node:n,format:t,parents:i})})}})})}D(e.split(","),function(e){if(!$[e]){$[e]=[];$[e].similar=i}$[e].push(n)});return this}function g(e,t){if(y(e,t.inline)){return V}if(y(e,t.block)){return V}if(t.selector){return P.is(e,t.selector)}}function y(e,t){e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()==t.toLowerCase()}function b(e,t){var n=P.getStyle(e,t);if(t=="color"||t=="backgroundColor"){n=P.toHex(n)}if(t=="fontWeight"&&n==700){n="bold"}return""+n}function w(e,t){if(typeof e!="string"){e=e(t)}else{if(t){e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})}}return e}function E(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function S(e,t,n){var r=P.create(t,n);e.parentNode.insertBefore(r,e);r.appendChild(e);return r}function x(e,i,s){function o(e){function t(e){return e.nodeName=="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,r,s,o,u,a;n=r=e?m:b;u=e?"previousSibling":"nextSibling";a=P.getRoot();if(n.nodeType==3&&!E(n)){if(e?g>0:w<n.nodeValue.length){return n}}for(;;){if(!i[0].block_expand&&q(r)){return r}for(o=r[u];o;o=o[u]){if(!k(o)&&!E(o)&&!t(o)){return r}}if(r.parentNode==a){n=r;break}r=r.parentNode}return n}function u(e,t){if(t===J){t=e.nodeType===3?e.length:e.childNodes.length}while(e&&e.hasChildNodes()){e=e.childNodes[t];if(e){t=e.nodeType===3?e.length:e.childNodes.length}}return{node:e,offset:t}}function a(e){var t=e;while(t){if(t.nodeType===1&&K(t)){return K(t)==="false"?t:e}t=t.parentNode}return e}function f(e,n,r){function i(e,t){var n,i,o=e.nodeValue;if(typeof t=="undefined"){t=r?o.length:0}if(r){n=o.lastIndexOf(" ",t);i=o.lastIndexOf(" ",t);n=n>i?n:i;if(n!==-1&&!s){n++}}else{n=o.indexOf(" ",t);i=o.indexOf(" ",t);n=n!==-1&&(i===-1||n<i)?n:i}return n}var o,u,a,f;if(e.nodeType===3){a=i(e,n);if(a!==-1){return{container:e,offset:a}}f=e}o=new B(e,P.getParent(e,q)||t.getBody());while(u=o[r?"prev":"next"]()){if(u.nodeType===3){f=u;a=i(u);if(a!==-1){return{container:u,offset:a}}}else{if(q(u)){break}}}if(f){if(r){n=0}else{n=f.length}return{container:f,offset:n}}}function l(t,n){var s,o,u,a;if(t.nodeType==3&&t.nodeValue.length===0&&t[n]){t=t[n]}s=r(t);for(o=0;o<s.length;o++){for(u=0;u<i.length;u++){a=i[u];if("collapsed"in a&&a.collapsed!==e.collapsed){continue}if(P.is(s[o],a.selector)){return s[o]}}}return t}function c(e,t,s){var o;if(!i[0].wrapper){o=P.getParent(e,i[0].block)}if(!o){o=P.getParent(e.nodeType==3?e.parentNode:e,n)}if(o&&i[0].wrapper){o=r(o,"ul,ol").reverse()[0]||o}if(!o){o=e;while(o[t]&&!q(o[t])){o=o[t];if(y(o,"br")){break}}}return o||e}var h,p,d,v,m=e.startContainer,g=e.startOffset,b=e.endContainer,w=e.endOffset;if(m.nodeType==1&&m.hasChildNodes()){p=m.childNodes.length-1;m=m.childNodes[g>p?p:g];if(m.nodeType==3){g=0}}if(b.nodeType==1&&b.hasChildNodes()){p=b.childNodes.length-1;b=b.childNodes[w>p?p:w-1];if(b.nodeType==3){w=b.nodeValue.length}}m=a(m);b=a(b);if(k(m.parentNode)||k(m)){m=k(m)?m:m.parentNode;m=m.nextSibling||m;if(m.nodeType==3){g=0}}if(k(b.parentNode)||k(b)){b=k(b)?b:b.parentNode;b=b.previousSibling||b;if(b.nodeType==3){w=b.length}}if(i[0].inline){if(e.collapsed){v=f(m,g,true);if(v){m=v.container;g=v.offset}v=f(b,w);if(v){b=v.container;w=v.offset}}d=u(b,w);if(d.node){while(d.node&&d.offset===0&&d.node.previousSibling){d=u(d.node.previousSibling)}if(d.node&&d.offset>0&&d.node.nodeType===3&&d.node.nodeValue.charAt(d.offset-1)===" "){if(d.offset>1){b=d.node;b.splitText(d.offset-1)}}}}if(i[0].inline||i[0].block_expand){if(!i[0].inline||m.nodeType!=3||g===0){m=o(true)}if(!i[0].inline||b.nodeType!=3||w===b.nodeValue.length){b=o()}}if(i[0].selector&&i[0].expand!==X&&!i[0].inline){m=l(m,"previousSibling");b=l(b,"nextSibling")}if(i[0].block||i[0].selector){m=c(m,"previousSibling");b=c(b,"nextSibling");if(i[0].block){if(!q(m)){m=o(true)}if(!q(b)){b=o()}}}if(m.nodeType==1){g=U(m);m=m.parentNode}if(b.nodeType==1){w=U(b)+1;b=b.parentNode}return{startContainer:m,startOffset:g,endContainer:b,endOffset:w}}function T(e,t,n,r){var i,s,o;if(!g(n,e)){return X}if(e.remove!="all"){D(e.styles,function(e,i){e=w(e,t);if(typeof i==="number"){i=e;r=0}if(!r||y(b(r,i),e)){P.setStyle(n,i,"")}o=1});if(o&&P.getAttrib(n,"style")==""){n.removeAttribute("style");n.removeAttribute("data-mce-style")}D(e.attributes,function(e,i){var s;e=w(e,t);if(typeof i==="number"){i=e;r=0}if(!r||y(P.getAttrib(r,i),e)){if(i=="class"){e=P.getAttrib(n,i);if(e){s="";D(e.split(/\s+/),function(e){if(/mce\w+/.test(e)){s+=(s?" ":"")+e}});if(s){P.setAttrib(n,i,s);return}}}if(i=="class"){n.removeAttribute("className")}if(W.test(i)){n.removeAttribute("data-mce-"+i)}n.removeAttribute(i)}});D(e.classes,function(e){e=w(e,t);if(!r||P.hasClass(r,e)){P.removeClass(n,e)}});s=P.getAttribs(n);for(i=0;i<s.length;i++){if(s[i].nodeName.indexOf("_")!==0){return X}}}if(e.remove!="none"){N(n,e);return V}}function N(t,n){function r(e,t,n){e=C(e,t,n);return!e||e.nodeName=="BR"||q(e)}var i=t.parentNode,s;if(n.block){if(!R){if(q(t)&&!q(i)){if(!r(t,X)&&!r(t.firstChild,V,1)){t.insertBefore(P.create("br"),t.firstChild)}if(!r(t,V)&&!r(t.lastChild,X,1)){t.appendChild(P.create("br"))}}}else{if(i==P.getRoot()){if(!n.list_block||!y(t,n.list_block)){D(e.grep(t.childNodes),function(e){if(F(R,e.nodeName.toLowerCase())){if(!s){s=S(e,R)}else{s.appendChild(e)}}else{s=0}})}}}}if(n.selector&&n.inline&&!y(n.inline,t)){return}P.remove(t,1)}function C(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t]){if(e.nodeType==1||!E(e)){return e}}}}function k(e){return e&&e.nodeType==1&&e.getAttribute("data-mce-type")=="bookmark"}function L(t,n){function r(e,t){function n(e){var t={};D(P.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();if(r.indexOf("_")!==0&&r!=="style"){t[r]=P.getAttrib(e,r)}});return t}function r(e,t){var n,r;for(r in e){if(e.hasOwnProperty(r)){n=t[r];if(n===J){return X}if(e[r]!=n){return X}delete t[r]}}for(r in t){if(t.hasOwnProperty(r)){return X}}return V}if(e.nodeName!=t.nodeName){return X}if(!r(n(e),n(t))){return X}if(!r(P.parseStyle(P.getAttrib(e,"style")),P.parseStyle(P.getAttrib(t,"style")))){return X}return V}function i(e,t){for(o=e;o;o=o[t]){if(o.nodeType==3&&o.nodeValue.length!==0){return e}if(o.nodeType==1&&!k(o)){return o}}return e}var s,o,u;if(t&&n){t=i(t,"previousSibling");n=i(n,"nextSibling");if(r(t,n)){for(o=t.nextSibling;o&&o!=n;){u=o;o=o.nextSibling;t.appendChild(u)}P.remove(n);D(e.grep(n.childNodes),function(e){t.appendChild(e)});return t}}return n}function n(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function A(e,n){var r,i,s,o;r=e[n?"startContainer":"endContainer"];i=e[n?"startOffset":"endOffset"];if(r.nodeType==1){s=r.childNodes.length-1;if(!n&&i){i--}r=r.childNodes[i>s?s:i]}if(r.nodeType===3&&n&&i>=r.nodeValue.length){r=(new B(r,t.getBody())).next()||r}if(r.nodeType===3&&!n&&i===0){r=(new B(r,t.getBody())).prev()||r}return r}function O(n,r,i){function s(e){var n=P.create("span",{id:g,"data-mce-bogus":true,style:y?"color:red":""});if(e){n.appendChild(t.getDoc().createTextNode(z))}return n}function o(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==z||e.childNodes.length>1){return false}if(t&&e.nodeType===1){t.push(e)}e=e.firstChild}return true}function a(e){while(e){if(e.id===g){return e}e=e.parentNode}}function c(e){var t;if(e){t=new B(e,e);for(e=t.current();e;e=t.next()){if(e.nodeType===3){return e}}}}function p(e,t){var n,r;if(!e){e=a(H.getStart());if(!e){while(e=P.get(g)){p(e,false)}}}else{r=H.getRng(true);if(o(e)){if(t!==false){r.setStartBefore(e);r.setEndBefore(e)}P.remove(e)}else{n=c(e);if(n.nodeValue.charAt(0)===z){n=n.deleteData(0,1)}P.remove(e,1)}H.setRng(r)}}function d(){var e,t,n,o,l,h,p;e=H.getRng(true);o=e.startOffset;h=e.startContainer;p=h.nodeValue;t=a(H.getStart());if(t){n=c(t)}if(p&&o>0&&o<p.length&&/\w/.test(p.charAt(o))&&/\w/.test(p.charAt(o-1))){l=H.getBookmark();e.collapse(true);e=x(e,u(r));e=j.split(e);f(r,i,e);H.moveToBookmark(l)}else{if(!t||n.nodeValue!==z){t=s(true);n=t.firstChild;e.insertNode(t);o=1;f(r,i,t)}else{f(r,i,t)}H.setCursorLocation(n,o)}}function v(){var e=H.getRng(true),t,n,o,a,f,c,p=[],d,v;t=e.startContainer;n=e.startOffset;f=t;if(t.nodeType==3){if(n!=t.nodeValue.length||t.nodeValue===z){a=true}f=f.parentNode}while(f){if(h(f,r,i)){c=f;break}if(f.nextSibling){a=true}p.push(f);f=f.parentNode}if(!c){return}if(a){o=H.getBookmark();e.collapse(true);e=x(e,u(r),true);e=j.split(e);l(r,i,e);H.moveToBookmark(o)}else{v=s();f=v;for(d=p.length-1;d>=0;d--){f.appendChild(P.clone(p[d],false));f=f.firstChild}f.appendChild(P.doc.createTextNode(z));f=f.firstChild;P.insertAfter(v,c);H.setCursorLocation(f,1)}}function m(){var t,n,r;n=a(H.getStart());if(n&&!P.isEmpty(n)){e.walk(n,function(e){if(e.nodeType==1&&e.id!==g&&!P.isEmpty(e)){P.setAttrib(e,"data-mce-bogus",null)}},"childNodes")}}var g="_mce_caret",y=t.settings.caret_debug;if(!self._hasCaretEvents){t.onBeforeGetContent.addToTop(function(){var e=[],t;if(o(a(H.getStart()),e)){t=e.length;while(t--){P.setAttrib(e[t],"data-mce-bogus","1")}}});e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){p();m()})});t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;if(n==8||n==37||n==39){p(a(H.getStart()))}m()});H.onSetContent.add(m);self._hasCaretEvents=true}if(n=="apply"){d()}else{v()}}function M(e){var t=e.startContainer,n=e.startOffset,r,i,s,o,u;if(t.nodeType==3&&n>=t.nodeValue.length){n=U(t);t=t.parentNode;r=true}if(t.nodeType==1){o=t.childNodes;t=o[Math.min(n,o.length-1)];i=new B(t,P.getParent(t,P.isBlock));if(n>o.length-1||r){i.next()}for(s=i.current();s;s=i.next()){if(s.nodeType==3&&!E(s)){u=P.create("a",null,z);s.parentNode.insertBefore(u,s);e.setStart(s,0);H.setRng(e);P.remove(u);return}}}}var _={},D=e.each,P=t.dom,H=t.selection,B=e.dom.TreeWalker,j=new e.dom.RangeUtils(P),F=t.schema.isValidChild,I=e.isArray,q=P.isBlock,R=t.settings.forced_root_block,U=P.nodeIndex,z="﻿",W=/^(src|href|style)$/,X=false,V=true,$,J,K=P.getContentEditable;var Q=function(e){var n;t.dom.getParent(e,function(e){n=t.dom.getStyle(e,"text-decoration");return n&&n!=="none"});return n};var G=function(e){var n;if(e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1){n=Q(e.parentNode);if(t.dom.getStyle(e,"color")&&n){t.dom.setStyle(e,"text-decoration",n)}else{if(t.dom.getStyle(e,"textdecoration")===n){t.dom.setStyle(e,"text-decoration",null)}}}};e.extend(this,{get:u,register:a,apply:f,remove:l,toggle:c,match:p,matchAll:d,matchNode:h,canApply:v,formatChanged:m});s();o()}})(tinymce);tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){if(e){o.setStyle(t,n,e)}});o.rename(t,"span")}function r(n,r){o=n.dom;if(u.convert_fonts_to_spans){e.each(o.select("font,u,strike",r.node),function(e){i[e.nodeName.toLowerCase()](t.dom,e)})}}var i,s,o,u=t.settings;if(u.inline_styles){s=e.explode(u.font_size_legacy_values);i={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:s[parseInt(t.size,10)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}};t.onPreProcess.add(r);t.onSetContent.add(r);t.onInit.add(function(){t.selection.onSetContent.add(r)})}});(function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function r(r){function f(e){return e&&i.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&i.getContentEditable(e)!=="true"}function l(t){var n;if(e.isIE&&i.isBlock(t)){n=s.getRng();t.appendChild(i.create("span",null," "));s.select(t);t.lastChild.outerHTML="";s.setRng(n)}}function c(e){var t=e,n=[],r;while(t=t.firstChild){if(i.isBlock(t)){return}if(t.nodeType==1&&!a[t.nodeName.toLowerCase()]){n.push(t)}}r=n.length;while(r--){t=n[r];if(!t.hasChildNodes()||t.firstChild==t.lastChild&&t.firstChild.nodeValue===""){i.remove(t)}else{if(t.nodeName=="A"&&(t.innerText||t.textContent)===" "){i.remove(t)}}}}function h(e){var r,o,u,f,l,c=e,h;u=i.createRng();if(e.hasChildNodes()){r=new t(e,e);while(o=r.current()){if(o.nodeType==3){u.setStart(o,0);u.setEnd(o,0);break}if(a[o.nodeName.toLowerCase()]){u.setStartBefore(o);u.setEndBefore(o);break}c=o;o=r.next()}if(!o){u.setStart(c,0);u.setEnd(c,0)}}else{if(e.nodeName=="BR"){if(e.nextSibling&&i.isBlock(e.nextSibling)){if(!L||L<9){h=i.create("br");e.parentNode.insertBefore(h,e)}u.setStartBefore(e);u.setEndBefore(e)}else{u.setStartAfter(e);u.setEndAfter(e)}}else{u.setStart(e,0);u.setEnd(e,0)}}s.setRng(u);i.remove(h);l=i.getViewPort(n.getWin());f=i.getPos(e).y;if(f<l.y||f+25>l.y+l.h){n.getWin().scrollTo(0,f<l.y?f:f-l.h+25)}}function p(t){var n=N,r,s,u;r=t||D=="TABLE"?i.create(t||H):k.cloneNode(false);u=r;if(o.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)){if(n.id=="_mce_caret"){continue}s=n.cloneNode(false);i.setAttrib(s,"id","");if(r.hasChildNodes()){s.appendChild(r.firstChild);r.appendChild(s)}else{u=s;r.appendChild(s)}}}while(n=n.parentNode)}if(!e.isIE){u.innerHTML='<br data-mce-bogus="1">'}return r}function d(e){var n,r,i;if(N.nodeType==3&&(e?C>0:C<N.nodeValue.length)){return false}if(N.parentNode==k&&B&&!e){return true}if(e&&N.nodeType==1&&N==k.firstChild){return true}if(N.nodeName==="TABLE"||N.previousSibling&&N.previousSibling.nodeName=="TABLE"){return B&&!e||!B&&e}n=new t(N,k);if(N.nodeType==3){if(e&&C==0){n.prev()}else{if(!e&&C==N.nodeValue.length){n.next()}}}while(r=n.current()){if(r.nodeType===1){if(!r.getAttribute("data-mce-bogus")){i=r.nodeName.toLowerCase();if(a[i]&&i!=="br"){return false}}}else{if(r.nodeType===3&&!/^[ \t\r\n]*$/.test(r.nodeValue)){return false}}if(e){n.prev()}else{n.next()}}return true}function v(e,t){var n,r,s,o,u,a=H||"P";r=i.getParent(e,i.isBlock);if(!r||!f(r)){r=r||T;if(!r.hasChildNodes()){n=i.create(a);r.appendChild(n);S.setStart(n,0);S.setEnd(n,0);return n}o=e;while(o.parentNode!=r){o=o.parentNode}while(o&&!i.isBlock(o)){s=o;o=o.previousSibling}if(s){n=i.create(a);s.parentNode.insertBefore(n,s);o=s;while(o&&!i.isBlock(o)){u=o.nextSibling;n.appendChild(o);o=u}S.setStart(e,t);S.setEnd(e,t)}}return e}function m(){function e(e){var t=_[e?"firstChild":"lastChild"];while(t){if(t.nodeType==1){break}t=t[e?"nextSibling":"previousSibling"]}return t===k}O=H?p(H):i.create("BR");if(e(true)&&e()){i.replace(O,_)}else{if(e(true)){_.parentNode.insertBefore(O,_)}else{if(e()){i.insertAfter(O,_);l(O)}else{x=S.cloneRange();x.setStartAfter(k);x.setEndAfter(_);M=x.extractContents();i.insertAfter(M,_);i.insertAfter(O,_)}}}i.remove(k);h(O);u.add()}function g(){var e=new t(N,k),n;while(n=e.current()){if(n.nodeName=="BR"){return true}n=e.next()}}function y(){var t,n,r;if(N&&N.nodeType==3&&C>=N.nodeValue.length){if(!e.isIE&&!g()){t=i.create("br");S.insertNode(t);S.setStartAfter(t);S.setEndAfter(t);n=true}}t=i.create("br");S.insertNode(t);if(e.isIE&&D=="PRE"&&(!L||L<8)){t.parentNode.insertBefore(i.doc.createTextNode("\r"),t)}r=i.create("span",{},"&nbsp;");t.parentNode.insertBefore(r,t);s.scrollIntoView(r);i.remove(r);if(!n){S.setStartAfter(t);S.setEndAfter(t)}else{S.setStartBefore(t);S.setEndBefore(t)}s.setRng(S);u.add()}function b(e){do{if(e.nodeType===3){e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")}e=e.firstChild}while(e)}function w(e){var t=i.getRoot(),n,r;n=e;while(n!==t&&i.getContentEditable(n)!=="false"){if(i.getContentEditable(n)==="true"){r=n}n=n.parentNode}return n!==t?r:t}function E(t){var n;if(!e.isIE){t.normalize();n=t.lastChild;if(!n||/^(left|right)$/gi.test(i.getStyle(n,"float",true))){i.add(t,"br")}}}var S=s.getRng(true),x,T,N,C,k,L,A,O,M,_,D,P,H,B;if(!S.collapsed){n.execCommand("Delete");return}if(r.isDefaultPrevented()){return}N=S.startContainer;C=S.startOffset;H=(o.force_p_newlines?"p":"")||o.forced_root_block;H=H?H.toUpperCase():"";L=i.doc.documentMode;A=r.shiftKey;if(N.nodeType==1&&N.hasChildNodes()){B=C>N.childNodes.length-1;N=N.childNodes[Math.min(C,N.childNodes.length-1)]||N;if(B&&N.nodeType==3){C=N.nodeValue.length}else{C=0}}T=w(N);if(!T){return}u.beforeChange();if(!i.isBlock(T)&&T!=i.getRoot()){if(!H||A){y()}return}if(H&&!A||!H&&A){N=v(N,C)}k=i.getParent(N,i.isBlock);_=k?i.getParent(k.parentNode,i.isBlock):null;D=k?k.nodeName.toUpperCase():"";P=_?_.nodeName.toUpperCase():"";if(P=="LI"&&!r.ctrlKey){k=_;D=P}if(D=="LI"){if(!H&&A){y();return}if(i.isEmpty(k)){if(/^(UL|OL|LI)$/.test(_.parentNode.nodeName)){return false}m();return}}if(D=="PRE"&&o.br_in_pre!==false){if(!A){y();return}}else{if(!H&&!A&&D!="LI"||H&&A){y();return}}H=H||"P";if(d()){if(/^(H[1-6]|PRE)$/.test(D)&&P!="HGROUP"){O=p(H)}else{O=p()}if(o.end_container_on_empty_block&&f(_)&&i.isEmpty(k)){O=i.split(_,k)}else{i.insertAfter(O,k)}h(O)}else{if(d(true)){O=k.parentNode.insertBefore(p(),k);l(O)}else{x=S.cloneRange();x.setEndAfter(k);M=x.extractContents();b(M);O=M.firstChild;i.insertAfter(M,k);c(O);E(k);h(O)}}i.setAttrib(O,"id","");u.add()}var i=n.dom,s=n.selection,o=n.settings,u=n.undoManager,a=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){if(t.keyCode==13){if(r(t)!==false){t.preventDefault()}}})}})(tinymce)